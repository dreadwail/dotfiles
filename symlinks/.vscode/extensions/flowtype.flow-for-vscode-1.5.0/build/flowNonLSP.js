"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var vscode=require("vscode"),child_process=_interopDefault(require("child_process")),path$1=require("path"),path$1__default=_interopDefault(path$1),fs$1=_interopDefault(require("fs")),invariant=_interopDefault(require("assert")),url=_interopDefault(require("url")),EventEmitter=_interopDefault(require("events")),module$1=_interopDefault(require("module")),util=_interopDefault(require("util")),crypto=_interopDefault(require("crypto")),constants=_interopDefault(require("constants")),os=_interopDefault(require("os")),prettier=_interopDefault(require("prettier/standalone")),parserFlow=_interopDefault(require("prettier/parser-flow")),src=function(e){try{return e()}catch(e){}},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var windows=isexe;function checkPathExt(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function checkStat(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&checkPathExt(t,r)}function isexe(e,t,r){fs$1.stat(e,function(n,i){r(n,!n&&checkStat(i,e,t))})}function sync(e,t){return checkStat(fs$1.statSync(e),e,t)}isexe.sync=sync;var core,mode=isexe$1;function isexe$1(e,t,r){fs$1.stat(e,function(e,n){r(e,!e&&checkStat$1(n,t))})}function sync$1(e,t){return checkStat$1(fs$1.statSync(e),t)}function checkStat$1(e,t){return e.isFile()&&checkMode(e,t)}function checkMode(e,t){var r=e.mode,n=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8);return r&parseInt("001",8)||r&c&&i===s||r&a&&n===o||r&(a|c)&&0===o}isexe$1.sync=sync$1,core="win32"===process.platform||commonjsGlobal.TESTING_WINDOWS?windows:mode;var isexe_1=isexe$2;function isexe$2(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(r,n){isexe$2(e,t||{},function(e,t){e?n(e):r(t)})})}core(e,t||{},function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)})}function sync$2(e,t){try{return core.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}isexe$2.sync=sync$2;var which_1=which;which.sync=whichSync;var isWindows="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,COLON=isWindows?";":":";function getNotFoundError(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function getPathInfo(e,t){var r=t.colon||COLON,n=t.path||process.env.PATH||"",i=[""];n=n.split(r);var o="";return isWindows&&(n.unshift(process.cwd()),i=(o=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(r),-1!==e.indexOf(".")&&""!==i[0]&&i.unshift("")),(e.match(/\//)||isWindows&&e.match(/\\/))&&(n=[""]),{env:n,ext:i,extExe:o}}function which(e,t,r){"function"==typeof t&&(r=t,t={});var n=getPathInfo(e,t),i=n.env,o=n.ext,s=n.extExe,a=[];!function n(c,u){if(c===u)return t.all&&a.length?r(null,a):r(getNotFoundError(e));var l=i[c];'"'===l.charAt(0)&&'"'===l.slice(-1)&&(l=l.slice(1,-1));var p=path$1__default.join(l,e);!l&&/^\.[\\\/]/.test(e)&&(p=e.slice(0,2)+p),function e(i,l){if(i===l)return n(c+1,u);var h=o[i];isexe_1(p+h,{pathExt:s},function(n,o){if(!n&&o){if(!t.all)return r(null,p+h);a.push(p+h)}return e(i+1,l)})}(0,o.length)}(0,i.length)}function whichSync(e,t){for(var r=getPathInfo(e,t=t||{}),n=r.env,i=r.ext,o=r.extExe,s=[],a=0,c=n.length;a<c;a++){var u=n[a];'"'===u.charAt(0)&&'"'===u.slice(-1)&&(u=u.slice(1,-1));var l=path$1__default.join(u,e);!u&&/^\.[\\\/]/.test(e)&&(l=e.slice(0,2)+l);for(var p=0,h=i.length;p<h;p++){var f=l+i[p];try{if(isexe_1.sync(f,{pathExt:o})){if(!t.all)return f;s.push(f)}}catch(e){}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw getNotFoundError(e)}var pathKey=e=>{const t=(e=e||{}).env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).find(e=>"PATH"===e.toUpperCase())||"Path"};const pathKey$1=pathKey();function resolveCommandAttempt(e,t){const r=process.cwd(),n=null!=e.options.cwd;if(n)try{process.chdir(e.options.cwd)}catch(e){}let i;try{i=which_1.sync(e.command,{path:(e.options.env||process.env)[pathKey$1],pathExt:t?path$1__default.delimiter:void 0})}catch(e){}finally{process.chdir(r)}return i&&(i=path$1__default.resolve(n?e.options.cwd:"",i)),i}function resolveCommand(e){return resolveCommandAttempt(e)||resolveCommandAttempt(e,!0)}var resolveCommand_1=resolveCommand;const metaCharsRegExp=/([()\][%!^"`<>&|;, *?])/g;function escapeCommand(e){return e=e.replace(metaCharsRegExp,"^$1")}function escapeArgument(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(metaCharsRegExp,"^$1"),t&&(e=e.replace(metaCharsRegExp,"^$1")),e}var command=escapeCommand,argument=escapeArgument,_escape={command:command,argument:argument},shebangRegex=/^#!.*/,shebangCommand=function(e){var t=e.match(shebangRegex);if(!t)return null;var r=t[0].replace(/#! ?/,"").split(" "),n=r[0].split("/").pop(),i=r[1];return"env"===n?i:n+(i?" "+i:"")};function readShebang(e){let t,r;Buffer.alloc?t=Buffer.alloc(150):(t=new Buffer(150)).fill(0);try{r=fs$1.openSync(e,"r"),fs$1.readSync(r,t,0,150,0),fs$1.closeSync(r)}catch(e){}return shebangCommand(t.toString())}var readShebang_1=readShebang,semver=createCommonjsModule(function(e,t){var r;t=e.exports=H,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=a++;s[p]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=a++;s[h]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var b=a++;s[b]="(?:"+s[u]+"|"+s[l]+")";var d=a++;s[d]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var m=a++;s[m]="(?:-?("+s[b]+"(?:\\."+s[b]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,g="v?"+s[p]+s[d]+"?"+s[y]+"?";s[_]="^"+g+"$";var w="[v=\\s]*"+s[h]+s[m]+"?"+s[y]+"?",S=a++;s[S]="^"+w+"$";var O=a++;s[O]="((?:<|>)?=?)";var x=a++;s[x]=s[u]+"|x|X|\\*";var E=a++;s[E]=s[c]+"|x|X|\\*";var j=a++;s[j]="[v=\\s]*("+s[E]+")(?:\\.("+s[E]+")(?:\\.("+s[E]+")(?:"+s[d]+")?"+s[y]+"?)?)?";var T=a++;s[T]="[v=\\s]*("+s[x]+")(?:\\.("+s[x]+")(?:\\.("+s[x]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var A=a++;s[A]="^"+s[O]+"\\s*"+s[j]+"$";var R=a++;s[R]="^"+s[O]+"\\s*"+s[T]+"$";var C=a++;s[C]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=a++;s[I]="(?:~>?)";var $=a++;s[$]="(\\s*)"+s[I]+"\\s+",o[$]=new RegExp(s[$],"g");var N=a++;s[N]="^"+s[I]+s[j]+"$";var P=a++;s[P]="^"+s[I]+s[T]+"$";var k=a++;s[k]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[k]+"\\s+",o[M]=new RegExp(s[M],"g");var F=a++;s[F]="^"+s[k]+s[j]+"$";var L=a++;s[L]="^"+s[k]+s[T]+"$";var G=a++;s[G]="^"+s[O]+"\\s*("+w+")$|^$";var D=a++;s[D]="^"+s[O]+"\\s*("+g+")$|^$";var U=a++;s[U]="(\\s*)"+s[O]+"\\s*("+w+"|"+s[j]+")",o[U]=new RegExp(s[U],"g");var W=a++;s[W]="^\\s*("+s[j]+")\\s+-\\s+("+s[j]+")\\s*$";var V=a++;s[V]="^\\s*("+s[T]+")\\s+-\\s+("+s[T]+")\\s*$";var B=a++;s[B]="(<|>)?=?\\s*\\*";for(var q=0;q<35;q++)r(q,s[q]),o[q]||(o[q]=new RegExp(s[q]));function z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof H)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[S]:o[_]).test(e))return null;try{return new H(e,t)}catch(e){return null}}function H(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof H){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof H))return new H(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=z,t.valid=function(e,t){var r=z(e,t);return r?r.version:null},t.clean=function(e,t){var r=z(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=H,H.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},H.prototype.toString=function(){return this.version},H.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof H||(e=new H(e,this.options)),this.compareMain(e)||this.comparePre(e)},H.prototype.compareMain=function(e){return e instanceof H||(e=new H(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},H.prototype.comparePre=function(e){if(e instanceof H||(e=new H(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return X(n,i)}while(++t)},H.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new H(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Z(e,t))return null;var r=z(e),n=z(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},t.compareIdentifiers=X;var Y=/^[0-9]+$/;function X(e,t){var r=Y.test(e),n=Y.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new H(e,r).compare(new H(t,r))}function K(e,t,r){return J(e,t,r)>0}function Q(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return K(e,r,n);case">=":return te(e,r,n);case"<":return Q(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new H(e,t).major},t.minor=function(e,t){return new H(e,t).minor},t.patch=function(e,t){return new H(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,r){return J(t,e,r)},t.sort=function(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})},t.rsort=function(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})},t.gt=K,t.lt=Q,t.eq=Z,t.neq=ee,t.gte=te,t.lte=re,t.cmp=ne,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,i,o,s,a,c,u,l,p,h){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":p?"<="+c+"."+u+"."+l+"-"+p:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function pe(e,t,r,n){var i,o,s,a,c;switch(e=new H(e,n),t=new se(t,n),r){case">":i=K,o=re,s=Q,a=">",c=">=";break;case"<":i=Q,o=te,s=K,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],p=null,h=null;if(l.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),p=p||e,h=h||e,i(e.semver,p.semver,n)?p=e:s(e.semver,h.semver,n)&&(h=e)}),p.operator===a||p.operator===c)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[G]:o[D],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new H(r[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new H(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[V]:o[W];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(o[U],"$1$2$3"),r("comparator trim",e,o[U]),e=(e=(e=e.replace(o[$],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[G]:o[D],s=e.split(" ").map(function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[L]:o[F];return e.replace(n,function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var n=t.loose?o[P]:o[N];return e.replace(n,function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var n=t.loose?o[R]:o[A];return e.replace(n,function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s),p=l;return"="===n&&p&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&p?(u&&(o=0),s=0,">"===n?(n=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[B],"")}(e,t),r("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,this.options)},this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new H(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new H(n=e,r)))}),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new H(n=e,r)))}),n},t.minVersion=function(e,t){e=new se(e,t);var r=new H("0.0.0");if(e.test(r))return r;if(r=new H("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(e){var t=new H(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!K(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return pe(e,t,"<",r)},t.gtr=function(e,t,r){return pe(e,t,">",r)},t.outside=pe,t.prerelease=function(e,t){var r=z(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof H)return e;if("string"!=typeof e)return null;var t=e.match(o[C]);if(null==t)return null;return z(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),semver_1=semver.SEMVER_SPEC_VERSION,semver_2=semver.re,semver_3=semver.src,semver_4=semver.parse,semver_5=semver.valid,semver_6=semver.clean,semver_7=semver.SemVer,semver_8=semver.inc,semver_9=semver.diff,semver_10=semver.compareIdentifiers,semver_11=semver.rcompareIdentifiers,semver_12=semver.major,semver_13=semver.minor,semver_14=semver.patch,semver_15=semver.compare,semver_16=semver.compareLoose,semver_17=semver.rcompare,semver_18=semver.sort,semver_19=semver.rsort,semver_20=semver.gt,semver_21=semver.lt,semver_22=semver.eq,semver_23=semver.neq,semver_24=semver.gte,semver_25=semver.lte,semver_26=semver.cmp,semver_27=semver.Comparator,semver_28=semver.Range,semver_29=semver.toComparators,semver_30=semver.satisfies,semver_31=semver.maxSatisfying,semver_32=semver.minSatisfying,semver_33=semver.minVersion,semver_34=semver.validRange,semver_35=semver.ltr,semver_36=semver.gtr,semver_37=semver.outside,semver_38=semver.prerelease,semver_39=semver.intersects,semver_40=semver.coerce;const isWin="win32"===process.platform,isExecutableRegExp=/\.(?:com|exe)$/i,isCmdShimRegExp=/node_modules[\\\/].bin[\\\/][^\\\/]+\.cmd$/i,supportsShellOption=src(()=>semver.satisfies(process.version,"^4.8.0 || ^5.7.0 || >= 6.0.0",!0))||!1;function detectShebang(e){e.file=resolveCommand_1(e);const t=e.file&&readShebang_1(e.file);return t?(e.args.unshift(e.file),e.command=t,resolveCommand_1(e)):e.file}function parseNonShell(e){if(!isWin)return e;const t=detectShebang(e),r=!isExecutableRegExp.test(t);if(e.options.forceShell||r){const r=isCmdShimRegExp.test(t);e.command=path$1__default.normalize(e.command),e.command=_escape.command(e.command),e.args=e.args.map(e=>_escape.argument(e,r));const n=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${n}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function parseShell(e){if(supportsShellOption)return e;const t=[e.command].concat(e.args).join(" ");return isWin?(e.command="string"==typeof e.options.shell?e.options.shell:process.env.comspec||"cmd.exe",e.args=["/d","/s","/c",`"${t}"`],e.options.windowsVerbatimArguments=!0):("string"==typeof e.options.shell?e.command=e.options.shell:"android"===process.platform?e.command="/system/bin/sh":e.command="/bin/sh",e.args=["-c",t]),e}function parse(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const n={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?parseShell(n):parseNonShell(n)}var parse_1=parse;const isWin$1="win32"===process.platform;function notFoundError(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function hookChildProcess(e,t){if(!isWin$1)return;const r=e.emit;e.emit=function(n,i){if("exit"===n){const n=verifyENOENT(i,t);if(n)return r.call(e,"error",n)}return r.apply(e,arguments)}}function verifyENOENT(e,t){return isWin$1&&1===e&&!t.file?notFoundError(t.original,"spawn"):null}function verifyENOENTSync(e,t){return isWin$1&&1===e&&!t.file?notFoundError(t.original,"spawnSync"):null}var enoent={hookChildProcess:hookChildProcess,verifyENOENT:verifyENOENT,verifyENOENTSync:verifyENOENTSync,notFoundError:notFoundError};function spawn(e,t,r){const n=parse_1(e,t,r),i=child_process.spawn(n.command,n.args,n.options);return enoent.hookChildProcess(i,n),i}function spawnSync(e,t,r){const n=parse_1(e,t,r),i=child_process.spawnSync(n.command,n.args,n.options);return i.error=i.error||enoent.verifyENOENTSync(i.status,n),i}var crossSpawn=spawn,spawn_1=spawn,sync$3=spawnSync,_parse=parse_1,_enoent=enoent;crossSpawn.spawn=spawn_1,crossSpawn.sync=sync$3,crossSpawn._parse=_parse,crossSpawn._enoent=_enoent;const REMOTE_PATH_URI_PREFIX="nuclide://";function isRemote(e){return e.startsWith(REMOTE_PATH_URI_PREFIX)}function isLocal(e){return!isRemote(e)}function createRemoteUri(e,t){return`nuclide://${e}${t}`}function parse$1(e){if(isLocal(e))return{auth:null,host:null,hostname:null,href:e,path:e,pathname:e,protocol:null,query:null,search:null,slashes:null};const t=url.parse(_escapeBackslashes(e));invariant(t.path,`Nuclide URIs must contain paths, '${String(t.path)}' found while parsing '${e}'`);let r=t.path;null!=t.hash&&(r+=t.hash),invariant(t.pathname,`Nuclide URIs must contain pathnamess, '${String(t.pathname)}' found while parsing '${e}'`);let n=t.pathname;return null!=t.hash&&(n+=t.hash),{auth:t.auth,host:t.host,hostname:t.hostname,href:decodeURI(t.href),path:decodeURI(r),pathname:decodeURI(n),protocol:t.protocol,query:t.query,search:t.search,slashes:t.slashes}}function parseRemoteUri(e){if(!isRemote(e))throw new Error("Expected remote uri. Got "+e);const t=parse$1(e);return invariant(t.hostname,`Remote Nuclide URIs must contain hostnames, '${String(t.hostname)}' found `+`while parsing '${e}'`),{auth:t.auth,host:t.host,hostname:t.hostname,href:t.href,path:t.path,pathname:t.pathname,protocol:t.protocol,query:t.query,search:t.search,slashes:t.slashes}}function getPath(e){return parse$1(e).path}function getHostname(e){return parseRemoteUri(e).hostname}function getHostnameOpt(e){return null==e||isLocal(e)?null:getHostname(e)}function join(e,...t){const r=_pathModuleFor(e);if(isRemote(e)){const{hostname:n,path:i}=parseRemoteUri(e);return t.splice(0,0,i),createRemoteUri(n,r.join.apply(null,t))}return t.splice(0,0,e),r.join.apply(null,t)}function normalize(e){const t=_pathModuleFor(e);if(isRemote(e)){const{hostname:r,path:n}=parseRemoteUri(e);return createRemoteUri(r,t.normalize(n))}return t.normalize(e)}function normalizeDir(e){return ensureTrailingSeparator(normalize(e))}function getParent(e){return normalize(join(e,".."))}function relative(e,t){const r=_pathModuleFor(e),n=isRemote(e);if(n!==isRemote(t)||n&&getHostname(e)!==getHostname(t))throw new Error(`Cannot relative urls on different hosts: ${e} and ${t}`);return n?r.relative(getPath(e),getPath(t)):r.relative(e,t)}function basename(e,t=""){return _pathModuleFor(e).basename(getPath(e),t)}function dirname(e){const t=_pathModuleFor(e);if(isRemote(e)){const{hostname:r,path:n}=parseRemoteUri(e);return createRemoteUri(r,t.dirname(n))}return t.dirname(e)}function extname(e){return _pathModuleFor(e).extname(getPath(e))}function stripExtension(e){const t=extname(e);return 0===t.length?e:e.slice(0,-1*t.length)}function uriToNuclideUri(e){const t=url.parse(_escapeBackslashes(e),!1);return"file:"===t.protocol&&t.path?t.path:isRemote(e)?e:null}function nuclideUriToUri(e){return isRemote(e)?e:"file://"+e}function contains(e,t){if(t.length<e.length)return!(t.length<e.length-1)&&(endsWithSeparator(e)&&e.startsWith(t));if(!t.startsWith(e))return!1;if(endsWithSeparator(e)||e.length===t.length)return!0;const r=_pathModuleFor(t);return t.slice(e.length).startsWith(r.sep)}function collapse(e){return e.filter(t=>!e.some(e=>contains(e,t)&&e!==t))}const hostFormatters=[];function registerHostnameFormatter(e){return hostFormatters.push(e),{dispose:()=>{const t=hostFormatters.indexOf(e);t>=0&&hostFormatters.splice(t,1)}}}function nuclideUriToDisplayString(e){if(isRemote(e)){let t=getHostname(e);for(const e of hostFormatters){const r=e(t);if(r){t=r;break}}return`${t}/${getPath(e)}`}return e}function ensureTrailingSeparator(e){const t=_pathModuleFor(e);return e.endsWith(t.sep)?e:e+t.sep}function trimTrailingSeparator(e){const t=_pathModuleFor(e);let r=e;for(;r.endsWith(t.sep)&&!isRoot(r);)r=r.slice(0,-1*t.sep.length);return r}function endsWithSeparator(e){const t=_pathModuleFor(e);return e.endsWith(t.sep)}function isAbsolute(e){return!!isRemote(e)||_pathModuleFor(e).isAbsolute(e)}function resolve(e,...t){const r=_pathModuleFor(e);if(isRemote(e)){const{hostname:n,path:i}=parseRemoteUri(e);return t.splice(0,0,i),createRemoteUri(n,r.resolve.apply(null,t))}return t.splice(0,0,e),r.resolve.apply(null,t)}function expandHomeDir(e){if(!e.startsWith("~"))return e;const{HOME:t}=process.env;return invariant(null!=t),"~"===e?t:e.startsWith("~/")?path$1__default.posix.resolve(t,e.replace("~",".")):e}function splitPathList(e){invariant(e.indexOf(REMOTE_PATH_URI_PREFIX)<0,"Splitting remote URIs is not supported");const t=_pathModuleFor(e);return e.split(t.delimiter)}function joinPathList(e){if(0===e.length)return"";invariant(e.every(e=>!isRemote(e)),"Joining of remote URIs is not supported");const t=_pathModuleFor(e[0]);return e.join(t.delimiter)}function ensureLocalPrefix(e){const t=_pathModuleFor(e);invariant(!isRemote(e),"Local prefix can not be added to a remote path"),invariant(!isAbsolute(e),"Local prefix can not be added to an absolute path");const r=`.${t.sep}`;return e.startsWith(r)?e:r+e}function isRoot(e){return dirname(e)===e}function parsePath(e){return _pathModuleFor(e).parse(getPath(e))}function split(e){const t=[];let r=e,n=dirname(r);for(;r!==n;)t.push(basename(r)),n=dirname(r=n);return isAbsolute(e)&&t.push(n),t.reverse(),t}function _pathModuleFor(e){const t=path$1__default.posix,r=path$1__default.win32;return e.startsWith(t.sep)?t:e.indexOf("://")>-1?t:":"===e[1]&&e[2]===r.sep?r:e.split(r.sep).length>e.split(t.sep).length?r:t}function _escapeBackslashes(e){return e.replace(/\\/g,"%5C")}var nuclideUri={basename:basename,dirname:dirname,extname:extname,stripExtension:stripExtension,isRemote:isRemote,isLocal:isLocal,createRemoteUri:createRemoteUri,parse:parse$1,parseRemoteUri:parseRemoteUri,getPath:getPath,getHostname:getHostname,getHostnameOpt:getHostnameOpt,join:join,relative:relative,normalize:normalize,normalizeDir:normalizeDir,getParent:getParent,uriToNuclideUri:uriToNuclideUri,nuclideUriToUri:nuclideUriToUri,contains:contains,collapse:collapse,nuclideUriToDisplayString:nuclideUriToDisplayString,registerHostnameFormatter:registerHostnameFormatter,ensureTrailingSeparator:ensureTrailingSeparator,trimTrailingSeparator:trimTrailingSeparator,endsWithSeparator:endsWithSeparator,isAbsolute:isAbsolute,resolve:resolve,expandHomeDir:expandHomeDir,splitPathList:splitPathList,joinPathList:joinPathList,ensureLocalPrefix:ensureLocalPrefix,isRoot:isRoot,parsePath:parsePath,split:split,_pathModuleFor:_pathModuleFor};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var __window="undefined"!=typeof window&&window,__self="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,__global=void 0!==commonjsGlobal&&commonjsGlobal,_root=__window||__global||__self,root_1=_root;!function(){if(!_root)throw new Error("RxJS could not find any global context (window, self, global)")}();var root={root:root_1};function isFunction(e){return"function"==typeof e}var isFunction_2=isFunction,isFunction_1={isFunction:isFunction_2},isArray_1=Array.isArray||function(e){return e&&"number"==typeof e.length},isArray={isArray:isArray_1};function isObject(e){return null!=e&&"object"==typeof e}var tryCatchTarget,isObject_2=isObject,isObject_1={isObject:isObject_2},errorObject_1={e:{}},errorObject={errorObject:errorObject_1};function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObject.errorObject.e=e,errorObject.errorObject}}function tryCatch(e){return tryCatchTarget=e,tryCatcher}var tryCatch_2=tryCatch,tryCatch_1={tryCatch:tryCatch_2},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},UnsubscriptionError=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return __extends(t,e),t}(Error),UnsubscriptionError_2=UnsubscriptionError,UnsubscriptionError_1={UnsubscriptionError:UnsubscriptionError_2},Subscription=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=n?n.length:0;r;)r.remove(this),r=++s<a&&n[s]||null;if(isFunction_1.isFunction(i))tryCatch_1.tryCatch(i).call(this)===errorObject.errorObject&&(t=!0,e=e||(errorObject.errorObject.e instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(errorObject.errorObject.e.errors):[errorObject.errorObject.e]));if(isArray.isArray(o))for(s=-1,a=o.length;++s<a;){var c=o[s];if(isObject_1.isObject(c))if(tryCatch_1.tryCatch(c.unsubscribe).call(c)===errorObject.errorObject){t=!0,e=e||[];var u=errorObject.errorObject.e;u instanceof UnsubscriptionError_1.UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(u.errors)):e.push(u)}}if(t)throw new UnsubscriptionError_1.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),Subscription_2=Subscription;function flattenUnsubscriptionErrors(e){return e.reduce(function(e,t){return e.concat(t instanceof UnsubscriptionError_1.UnsubscriptionError?t.errors:t)},[])}var Subscription_1={Subscription:Subscription_2},empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}},Observer={empty:empty},rxSubscriber=createCommonjsModule(function(e,t){var r=root.root.Symbol;t.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber}),rxSubscriber_1=rxSubscriber.rxSubscriber,rxSubscriber_2=rxSubscriber.$$rxSubscriber,__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Subscriber=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Observer.empty;break;case 1:if(!r){this.destination=Observer.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,r,n,i)}}return __extends$1(t,e),t.prototype[rxSubscriber.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(Subscription_1.Subscription),Subscriber_2=Subscriber,SafeSubscriber=function(e){function t(t,r,n,i){var o;e.call(this),this._parentSubscriber=t;var s=this;isFunction_1.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==Observer.empty&&(s=Object.create(r),isFunction_1.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}return __extends$1(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Subscriber),Subscriber_1={Subscriber:Subscriber_2};function toSubscriber(e,t,r){if(e){if(e instanceof Subscriber_1.Subscriber)return e;if(e[rxSubscriber.rxSubscriber])return e[rxSubscriber.rxSubscriber]()}return e||t||r?new Subscriber_1.Subscriber(e,t,r):new Subscriber_1.Subscriber(Observer.empty)}var toSubscriber_2=toSubscriber,toSubscriber_1={toSubscriber:toSubscriber_2},observable=createCommonjsModule(function(e,t){function r(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}t.getSymbolObservable=r,t.observable=r(root.root),t.$$observable=t.observable}),observable_1=observable.getSymbolObservable,observable_2=observable.observable,observable_3=observable.$$observable,Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=toSubscriber_1.toSubscriber(e,t,r);if(n?n.call(i,this.source):i.add(this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(root.root.Rx&&root.root.Rx.config&&root.root.Rx.config.Promise?t=root.root.Rx.config.Promise:root.root.Promise&&(t=root.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;i=r.subscribe(function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[observable.observable]=function(){return this},e.create=function(t){return new e(t)},e}(),Observable_2=Observable,Observable_1={Observable:Observable_2},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ObjectUnsubscribedError=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return __extends$2(t,e),t}(Error),ObjectUnsubscribedError_2=ObjectUnsubscribedError,ObjectUnsubscribedError_1={ObjectUnsubscribedError:ObjectUnsubscribedError_2},__extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},SubjectSubscription=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return __extends$3(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(Subscription_1.Subscription),SubjectSubscription_2=SubjectSubscription,SubjectSubscription_1={SubjectSubscription:SubjectSubscription_2},__extends$4=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},SubjectSubscriber=function(e){function t(t){e.call(this,t),this.destination=t}return __extends$4(t,e),t}(Subscriber_1.Subscriber),SubjectSubscriber_1=SubjectSubscriber,Subject=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return __extends$4(t,e),t.prototype[rxSubscriber.rxSubscriber]=function(){return new SubjectSubscriber(this)},t.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.isStopped?(e.complete(),Subscription_1.Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription_1.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new Observable_1.Observable;return e.source=this,e},t.create=function(e,t){return new AnonymousSubject(e,t)},t}(Observable_1.Observable),Subject_2=Subject,AnonymousSubject=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return __extends$4(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Subscription_1.Subscription.EMPTY},t}(Subject),AnonymousSubject_1=AnonymousSubject,Subject_1={SubjectSubscriber:SubjectSubscriber_1,Subject:Subject_2,AnonymousSubject:AnonymousSubject_1},__extends$5=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsyncSubject=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return __extends$5(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Subscription_1.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(Subject_1.Subject),AsyncSubject_2=AsyncSubject,AsyncSubject_1={AsyncSubject:AsyncSubject_2},__extends$6=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},BoundCallbackObservable=function(e){function t(t,r,n,i,o){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=i,this.scheduler=o}return __extends$6(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new t(e,r,i,this,n)}},t.prototype._subscribe=function(e){var r=this.callbackFunc,n=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context});if(!o){o=this.subject=new AsyncSubject_1.AsyncSubject;var s=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject;if(i){var s=tryCatch_1.tryCatch(i).apply(this,t);s===errorObject.errorObject?o.error(errorObject.errorObject.e):(o.next(s),o.complete())}else o.next(t.length<=1?t[0]:t),o.complete()};s.source=this,tryCatch_1.tryCatch(r).apply(this.context,n.concat(s))===errorObject.errorObject&&o.error(errorObject.errorObject.e)}return o.subscribe(e)},t.dispatch=function(e){var t=this,r=e.source,n=e.subscriber,i=e.context,o=r.callbackFunc,s=r.args,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new AsyncSubject_1.AsyncSubject;var u=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=e.source,o=i.selector,s=i.subject;if(o){var c=tryCatch_1.tryCatch(o).apply(this,r);c===errorObject.errorObject?t.add(a.schedule(dispatchError,0,{err:errorObject.errorObject.e,subject:s})):t.add(a.schedule(dispatchNext,0,{value:c,subject:s}))}else{var u=r.length<=1?r[0]:r;t.add(a.schedule(dispatchNext,0,{value:u,subject:s}))}};u.source=r,tryCatch_1.tryCatch(o).apply(i,s.concat(u))===errorObject.errorObject&&c.error(errorObject.errorObject.e)}t.add(c.subscribe(n))},t}(Observable_1.Observable),BoundCallbackObservable_2=BoundCallbackObservable;function dispatchNext(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function dispatchError(e){var t=e.err;e.subject.error(t)}var BoundCallbackObservable_1={BoundCallbackObservable:BoundCallbackObservable_2},bindCallback_1=BoundCallbackObservable_1.BoundCallbackObservable.create,bindCallback={bindCallback:bindCallback_1};Observable_1.Observable.bindCallback=bindCallback.bindCallback;var __extends$7=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},BoundNodeCallbackObservable=function(e){function t(t,r,n,i,o){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=i,this.scheduler=o}return __extends$7(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new t(e,r,i,this,n)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(dispatch,0,{source:this,subscriber:e,context:this.context});if(!i){i=this.subject=new AsyncSubject_1.AsyncSubject;var o=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,o=n.subject,s=t.shift();if(s)o.error(s);else if(i){var a=tryCatch_1.tryCatch(i).apply(this,t);a===errorObject.errorObject?o.error(errorObject.errorObject.e):(o.next(a),o.complete())}else o.next(t.length<=1?t[0]:t),o.complete()};o.source=this,tryCatch_1.tryCatch(t).apply(this.context,r.concat(o))===errorObject.errorObject&&i.error(errorObject.errorObject.e)}return i.subscribe(e)},t}(Observable_1.Observable),BoundNodeCallbackObservable_2=BoundNodeCallbackObservable;function dispatch(e){var t=this,r=e.source,n=e.subscriber,i=e.context,o=r,s=o.callbackFunc,a=o.args,c=o.scheduler,u=r.subject;if(!u){u=r.subject=new AsyncSubject_1.AsyncSubject;var l=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=e.source,o=i.selector,s=i.subject,a=r.shift();if(a)t.add(c.schedule(dispatchError$1,0,{err:a,subject:s}));else if(o){var u=tryCatch_1.tryCatch(o).apply(this,r);u===errorObject.errorObject?t.add(c.schedule(dispatchError$1,0,{err:errorObject.errorObject.e,subject:s})):t.add(c.schedule(dispatchNext$1,0,{value:u,subject:s}))}else{var l=r.length<=1?r[0]:r;t.add(c.schedule(dispatchNext$1,0,{value:l,subject:s}))}};l.source=r,tryCatch_1.tryCatch(s).apply(i,a.concat(l))===errorObject.errorObject&&t.add(c.schedule(dispatchError$1,0,{err:errorObject.errorObject.e,subject:u}))}t.add(u.subscribe(n))}function dispatchNext$1(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function dispatchError$1(e){var t=e.err;e.subject.error(t)}var BoundNodeCallbackObservable_1={BoundNodeCallbackObservable:BoundNodeCallbackObservable_2},bindNodeCallback_1=BoundNodeCallbackObservable_1.BoundNodeCallbackObservable.create,bindNodeCallback={bindNodeCallback:bindNodeCallback_1};function isScheduler(e){return e&&"function"==typeof e.schedule}Observable_1.Observable.bindNodeCallback=bindNodeCallback.bindNodeCallback;var isScheduler_2=isScheduler,isScheduler_1={isScheduler:isScheduler_2},__extends$8=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ScalarObservable=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return __extends$8(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(Observable_1.Observable),ScalarObservable_2=ScalarObservable,ScalarObservable_1={ScalarObservable:ScalarObservable_2},__extends$9=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},EmptyObservable=function(e){function t(t){e.call(this),this.scheduler=t}return __extends$9(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(Observable_1.Observable),EmptyObservable_2=EmptyObservable,EmptyObservable_1={EmptyObservable:EmptyObservable_2},__extends$a=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ArrayObservable=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return __extends$a(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];isScheduler_1.isScheduler(n)?e.pop():n=null;var i=e.length;return i>1?new t(e,n):1===i?new ScalarObservable_1.ScalarObservable(e[0],n):new EmptyObservable_1.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t[r]),i.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:r,index:0,count:n,subscriber:e});for(var o=0;o<n&&!e.closed;o++)e.next(r[o]);e.complete()},t}(Observable_1.Observable),ArrayObservable_2=ArrayObservable,ArrayObservable_1={ArrayObservable:ArrayObservable_2},__extends$b=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},OuterSubscriber=function(e){function t(){e.apply(this,arguments)}return __extends$b(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Subscriber_1.Subscriber),OuterSubscriber_2=OuterSubscriber,OuterSubscriber_1={OuterSubscriber:OuterSubscriber_2},isArrayLike_1=function(e){return e&&"number"==typeof e.length},isArrayLike={isArrayLike:isArrayLike_1};function isPromise(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var isPromise_2=isPromise,isPromise_1={isPromise:isPromise_2},iterator=createCommonjsModule(function(e,t){function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}t.symbolIteratorPonyfill=r,t.iterator=r(root.root),t.$$iterator=t.iterator}),iterator_1=iterator.symbolIteratorPonyfill,iterator_2=iterator.iterator,iterator_3=iterator.$$iterator,__extends$c=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},InnerSubscriber=function(e){function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return __extends$c(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Subscriber_1.Subscriber),InnerSubscriber_2=InnerSubscriber,InnerSubscriber_1={InnerSubscriber:InnerSubscriber_2};function subscribeToResult(e,t,r,n){var i=new InnerSubscriber_1.InnerSubscriber(e,r,n);if(i.closed)return null;if(t instanceof Observable_1.Observable)return t._isScalar?(i.next(t.value),i.complete(),null):t.subscribe(i);if(isArrayLike.isArrayLike(t)){for(var o=0,s=t.length;o<s&&!i.closed;o++)i.next(t[o]);i.closed||i.complete()}else{if(isPromise_1.isPromise(t))return t.then(function(e){i.closed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,function(e){root.root.setTimeout(function(){throw e})}),i;if(t&&"function"==typeof t[iterator.iterator])for(var a=t[iterator.iterator]();;){var c=a.next();if(c.done){i.complete();break}if(i.next(c.value),i.closed)break}else if(t&&"function"==typeof t[observable.observable]){var u=t[observable.observable]();if("function"==typeof u.subscribe)return u.subscribe(new InnerSubscriber_1.InnerSubscriber(e,r,n));i.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var l="You provided "+(isObject_1.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";i.error(new TypeError(l))}}return null}var subscribeToResult_2=subscribeToResult,subscribeToResult_1={subscribeToResult:subscribeToResult_2},__extends$d=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},none={};function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&isArray.isArray(e[0])&&(e=e[0].slice()),e.unshift(this),this.lift.call(new ArrayObservable_1.ArrayObservable(e),new CombineLatestOperator(r))}var combineLatest_2=combineLatest,CombineLatestOperator=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new CombineLatestSubscriber(e,this.project))},e}(),CombineLatestOperator_1=CombineLatestOperator,CombineLatestSubscriber=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return __extends$d(t,e),t.prototype._next=function(e){this.values.push(none),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(subscribeToResult_1.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===none?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber),CombineLatestSubscriber_1=CombineLatestSubscriber,combineLatest_1={combineLatest:combineLatest_2,CombineLatestOperator:CombineLatestOperator_1,CombineLatestSubscriber:CombineLatestSubscriber_1};function combineLatest$1(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,n=null;return isScheduler_1.isScheduler(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&isArray.isArray(e[0])&&(e=e[0]),new ArrayObservable_1.ArrayObservable(e,n).lift(new combineLatest_1.CombineLatestOperator(r))}var combineLatest_3=combineLatest$1,combineLatest_2$1={combineLatest:combineLatest_3};Observable_1.Observable.combineLatest=combineLatest_2$1.combineLatest;var __extends$e=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new MergeAllOperator(e))}var mergeAll_2=mergeAll,MergeAllOperator=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new MergeAllSubscriber(e,this.concurrent))},e}(),MergeAllOperator_1=MergeAllOperator,MergeAllSubscriber=function(e){function t(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return __extends$e(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(subscribeToResult_1.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),MergeAllSubscriber_1=MergeAllSubscriber,mergeAll_1={mergeAll:mergeAll_2,MergeAllOperator:MergeAllOperator_1,MergeAllSubscriber:MergeAllSubscriber_1};function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(concatStatic.apply(void 0,[this].concat(e)))}var concat_2=concat;function concatStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,n=e;return isScheduler_1.isScheduler(n[e.length-1])&&(r=n.pop()),null===r&&1===e.length&&e[0]instanceof Observable_1.Observable?e[0]:new ArrayObservable_1.ArrayObservable(e,r).lift(new mergeAll_1.MergeAllOperator(1))}var concatStatic_1=concatStatic,concat_1={concat:concat_2,concatStatic:concatStatic_1},concat_2$1=concat_1.concatStatic,concat$1={concat:concat_2$1};Observable_1.Observable.concat=concat$1.concat;var __extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},DeferObservable=function(e){function t(t){e.call(this),this.observableFactory=t}return __extends$f(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new DeferSubscriber(e,this.observableFactory)},t}(Observable_1.Observable),DeferObservable_2=DeferObservable,DeferSubscriber=function(e){function t(t,r){e.call(this,t),this.factory=r,this.tryDefer()}return __extends$f(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(subscribeToResult_1.subscribeToResult(this,e))},t}(OuterSubscriber_1.OuterSubscriber),DeferObservable_1={DeferObservable:DeferObservable_2},defer_1=DeferObservable_1.DeferObservable.create,defer={defer:defer_1};Observable_1.Observable.defer=defer.defer;var empty_1=EmptyObservable_1.EmptyObservable.create,empty$1={empty:empty_1};Observable_1.Observable.empty=empty$1.empty;var __extends$g=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ForkJoinObservable=function(e){function t(t,r){e.call(this),this.sources=t,this.resultSelector=r}return __extends$g(t,e),t.create=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(null===e||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&isArray.isArray(e[0])&&(e=e[0]),0===e.length?new EmptyObservable_1.EmptyObservable:new t(e,n)},t.prototype._subscribe=function(e){return new ForkJoinSubscriber(e,this.sources,this.resultSelector)},t}(Observable_1.Observable),ForkJoinObservable_2=ForkJoinObservable,ForkJoinSubscriber=function(e){function t(t,r,n){e.call(this,t),this.sources=r,this.resultSelector=n,this.completed=0,this.haveValues=0;var i=r.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var s=r[o],a=subscribeToResult_1.subscribeToResult(this,s,null,o);a&&(a.outerIndex=o,this.add(a))}}return __extends$g(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this.haveValues,n=this.resultSelector,i=this.values,o=i.length;if(e._hasValue){if(this.completed++,this.completed===o){if(r===o){var s=n?n.apply(this,i):i;t.next(s)}t.complete()}}else t.complete()},t}(OuterSubscriber_1.OuterSubscriber),ForkJoinObservable_1={ForkJoinObservable:ForkJoinObservable_2},forkJoin_1=ForkJoinObservable_1.ForkJoinObservable.create,forkJoin={forkJoin:forkJoin_1};Observable_1.Observable.forkJoin=forkJoin.forkJoin;var __extends$h=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},PromiseObservable=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return __extends$h(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){root.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return n.schedule(dispatchNext$2,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(dispatchNext$2,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(n.schedule(dispatchError$2,0,{err:t,subscriber:e}))}).then(null,function(e){root.root.setTimeout(function(){throw e})})},t}(Observable_1.Observable),PromiseObservable_2=PromiseObservable;function dispatchNext$2(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function dispatchError$2(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}var PromiseObservable_1={PromiseObservable:PromiseObservable_2},__extends$i=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},IteratorObservable=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=getIterator(t)}return __extends$i(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)i.error(e.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var i=r.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(Observable_1.Observable),IteratorObservable_2=IteratorObservable,StringIterator=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[iterator.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),ArrayIterator=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=toLength(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[iterator.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();function getIterator(e){var t=e[iterator.iterator];if(!t&&"string"==typeof e)return new StringIterator(e);if(!t&&void 0!==e.length)return new ArrayIterator(e);if(!t)throw new TypeError("object is not iterable");return e[iterator.iterator]()}var maxSafeInteger=Math.pow(2,53)-1;function toLength(e){var t=+e.length;return isNaN(t)?0:0!==t&&numberIsFinite(t)?(t=sign(t)*Math.floor(Math.abs(t)))<=0?0:t>maxSafeInteger?maxSafeInteger:t:t}function numberIsFinite(e){return"number"==typeof e&&root.root.isFinite(e)}function sign(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}var IteratorObservable_1={IteratorObservable:IteratorObservable_2},__extends$j=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ArrayLikeObservable=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return __extends$j(t,e),t.create=function(e,r){var n=e.length;return 0===n?new EmptyObservable_1.EmptyObservable:1===n?new ScalarObservable_1.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;i.closed||(r>=n?i.complete():(i.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:e});for(var o=0;o<i&&!e.closed;o++)e.next(r[o]);e.complete()},t}(Observable_1.Observable),ArrayLikeObservable_2=ArrayLikeObservable,ArrayLikeObservable_1={ArrayLikeObservable:ArrayLikeObservable_2},Notification=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Observable_1.Observable.of(this.value);case"E":return Observable_1.Observable.throw(this.error);case"C":return Observable_1.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):this.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return this.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Notification_2=Notification,Notification_1={Notification:Notification_2},__extends$k=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function observeOn(e,t){return void 0===t&&(t=0),this.lift(new ObserveOnOperator(e,t))}var observeOn_2=observeOn,ObserveOnOperator=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new ObserveOnSubscriber(e,this.scheduler,this.delay))},e}(),ObserveOnOperator_1=ObserveOnOperator,ObserveOnSubscriber=function(e){function t(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return __extends$k(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new ObserveOnMessage(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Notification_1.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Notification_1.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete())},t}(Subscriber_1.Subscriber),ObserveOnSubscriber_1=ObserveOnSubscriber,ObserveOnMessage=function(e,t){this.notification=e,this.destination=t},ObserveOnMessage_1=ObserveOnMessage,observeOn_1={observeOn:observeOn_2,ObserveOnOperator:ObserveOnOperator_1,ObserveOnSubscriber:ObserveOnSubscriber_1,ObserveOnMessage:ObserveOnMessage_1},__extends$l=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},FromObservable=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return __extends$l(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[observable.observable])return e instanceof Observable_1.Observable&&!r?e:new t(e,r);if(isArray.isArray(e))return new ArrayObservable_1.ArrayObservable(e,r);if(isPromise_1.isPromise(e))return new PromiseObservable_1.PromiseObservable(e,r);if("function"==typeof e[iterator.iterator]||"string"==typeof e)return new IteratorObservable_1.IteratorObservable(e,r);if(isArrayLike.isArrayLike(e))return new ArrayLikeObservable_1.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[observable.observable]().subscribe(e):t[observable.observable]().subscribe(new observeOn_1.ObserveOnSubscriber(e,r,0))},t}(Observable_1.Observable),FromObservable_2=FromObservable,FromObservable_1={FromObservable:FromObservable_2},from_2=FromObservable_1.FromObservable.create,from_1={from:from_2};Observable_1.Observable.from=from_1.from;var __extends$m=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},toString=Object.prototype.toString;function isNodeStyleEventEmitter(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function isJQueryStyleEventEmitter(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function isNodeList(e){return!!e&&"[object NodeList]"===toString.call(e)}function isHTMLCollection(e){return!!e&&"[object HTMLCollection]"===toString.call(e)}function isEventTarget(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var FromEventObservable=function(e){function t(t,r,n,i){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return __extends$m(t,e),t.create=function(e,r,n,i){return isFunction_1.isFunction(n)&&(i=n,n=void 0),new t(e,r,i,n)},t.setupSubscription=function(e,r,n,i,o){var s;if(isNodeList(e)||isHTMLCollection(e))for(var a=0,c=e.length;a<c;a++)t.setupSubscription(e[a],r,n,i,o);else if(isEventTarget(e)){var u=e;e.addEventListener(r,n,o),s=function(){return u.removeEventListener(r,n)}}else if(isJQueryStyleEventEmitter(e)){var l=e;e.on(r,n),s=function(){return l.off(r,n)}}else{if(!isNodeStyleEventEmitter(e))throw new TypeError("Invalid event target");var p=e;e.addListener(r,n),s=function(){return p.removeListener(r,n)}}i.add(new Subscription_1.Subscription(s))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,i=this.options,o=this.selector,s=o?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=tryCatch_1.tryCatch(o).apply(void 0,t);n===errorObject.errorObject?e.error(errorObject.errorObject.e):e.next(n)}:function(t){return e.next(t)};t.setupSubscription(r,n,s,e,i)},t}(Observable_1.Observable),FromEventObservable_2=FromEventObservable,FromEventObservable_1={FromEventObservable:FromEventObservable_2},fromEvent_1=FromEventObservable_1.FromEventObservable.create,fromEvent={fromEvent:fromEvent_1};Observable_1.Observable.fromEvent=fromEvent.fromEvent;var __extends$n=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},FromEventPatternObservable=function(e){function t(t,r,n){e.call(this),this.addHandler=t,this.removeHandler=r,this.selector=n}return __extends$n(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];t._callSelector(e,r)}:function(t){e.next(t)},i=this._callAddHandler(n,e);isFunction_1.isFunction(r)&&e.add(new Subscription_1.Subscription(function(){r(n,i)}))},t.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(t){e.error(t)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},t}(Observable_1.Observable),FromEventPatternObservable_2=FromEventPatternObservable,FromEventPatternObservable_1={FromEventPatternObservable:FromEventPatternObservable_2},fromEventPattern_1=FromEventPatternObservable_1.FromEventPatternObservable.create,fromEventPattern={fromEventPattern:fromEventPattern_1};Observable_1.Observable.fromEventPattern=fromEventPattern.fromEventPattern;var fromPromise_1=PromiseObservable_1.PromiseObservable.create,fromPromise={fromPromise:fromPromise_1};Observable_1.Observable.fromPromise=fromPromise.fromPromise;var __extends$o=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},selfSelector=function(e){return e},GenerateObservable=function(e){function t(t,r,n,i,o){e.call(this),this.initialState=t,this.condition=r,this.iterate=n,this.resultSelector=i,this.scheduler=o}return __extends$o(t,e),t.create=function(e,r,n,i,o){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||selfSelector,e.scheduler):void 0===i||isScheduler_1.isScheduler(i)?new t(e,r,n,selfSelector,i):new t(e,r,n,i,o)},t.prototype._subscribe=function(e){var r=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:r});for(var n=this.condition,i=this.resultSelector,o=this.iterate;;){if(n){var s=void 0;try{s=n(r)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var a=void 0;try{a=i(r)}catch(t){return void e.error(t)}if(e.next(a),e.closed)break;try{r=o(r)}catch(t){return void e.error(t)}}},t.dispatch=function(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}},t}(Observable_1.Observable),GenerateObservable_2=GenerateObservable,GenerateObservable_1={GenerateObservable:GenerateObservable_2};Observable_1.Observable.generate=GenerateObservable_1.GenerateObservable.create;var __extends$p=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},IfObservable=function(e){function t(t,r,n){e.call(this),this.condition=t,this.thenSource=r,this.elseSource=n}return __extends$p(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this.condition,r=this.thenSource,n=this.elseSource;return new IfSubscriber(e,t,r,n)},t}(Observable_1.Observable),IfObservable_2=IfObservable,IfSubscriber=function(e){function t(t,r,n,i){e.call(this,t),this.condition=r,this.thenSource=n,this.elseSource=i,this.tryIf()}return __extends$p(t,e),t.prototype.tryIf=function(){var e=this.condition,t=this.thenSource,r=this.elseSource;try{var n=e()?t:r;n?this.add(subscribeToResult_1.subscribeToResult(this,n)):this._complete()}catch(e){this._error(e)}},t}(OuterSubscriber_1.OuterSubscriber),IfObservable_1={IfObservable:IfObservable_2},_if_1=IfObservable_1.IfObservable.create,_if={_if:_if_1};function isNumeric(e){return!isArray.isArray(e)&&e-parseFloat(e)+1>=0}Observable_1.Observable.if=_if._if;var isNumeric_2=isNumeric,isNumeric_1={isNumeric:isNumeric_2},__extends$q=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Action=function(e){function t(t,r){e.call(this)}return __extends$q(t,e),t.prototype.schedule=function(e,t){return this},t}(Subscription_1.Subscription),Action_2=Action,Action_1={Action:Action_2},__extends$r=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsyncAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return __extends$r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),root.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;root.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null))},t}(Action_1.Action),AsyncAction_2=AsyncAction,AsyncAction_1={AsyncAction:AsyncAction_2},Scheduler=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}(),Scheduler_2=Scheduler,Scheduler_1={Scheduler:Scheduler_2},__extends$s=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsyncScheduler=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return __extends$s(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Scheduler_1.Scheduler),AsyncScheduler_2=AsyncScheduler,AsyncScheduler_1={AsyncScheduler:AsyncScheduler_2},async_1=new AsyncScheduler_1.AsyncScheduler(AsyncAction_1.AsyncAction),async={async:async_1},__extends$t=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},IntervalObservable=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=async.async),e.call(this),this.period=t,this.scheduler=r,(!isNumeric_1.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=async.async)}return __extends$t(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=async.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=this.period,n=this.scheduler;e.add(n.schedule(t.dispatch,r,{index:0,subscriber:e,period:r}))},t}(Observable_1.Observable),IntervalObservable_2=IntervalObservable,IntervalObservable_1={IntervalObservable:IntervalObservable_2},interval_1=IntervalObservable_1.IntervalObservable.create,interval={interval:interval_1};function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(mergeStatic.apply(void 0,[this].concat(e)))}Observable_1.Observable.interval=interval.interval;var merge_2=merge;function mergeStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return isScheduler_1.isScheduler(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof Observable_1.Observable?e[0]:new ArrayObservable_1.ArrayObservable(e,n).lift(new mergeAll_1.MergeAllOperator(r))}var mergeStatic_1=mergeStatic,merge_1={merge:merge_2,mergeStatic:mergeStatic_1},merge_2$1=merge_1.mergeStatic,merge$1={merge:merge_2$1};Observable_1.Observable.merge=merge$1.merge;var __extends$u=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function race(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&isArray.isArray(e[0])&&(e=e[0]),this.lift.call(raceStatic.apply(void 0,[this].concat(e)))}var race_2=race;function raceStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!isArray.isArray(e[0]))return e[0];e=e[0]}return new ArrayObservable_1.ArrayObservable(e).lift(new RaceOperator)}var raceStatic_1=raceStatic,RaceOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new RaceSubscriber(e))},e}(),RaceOperator_1=RaceOperator,RaceSubscriber=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends$u(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=subscribeToResult_1.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber),RaceSubscriber_1=RaceSubscriber,race_1={race:race_2,raceStatic:raceStatic_1,RaceOperator:RaceOperator_1,RaceSubscriber:RaceSubscriber_1};Observable_1.Observable.race=race_1.raceStatic;var __extends$v=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},NeverObservable=function(e){function t(){e.call(this)}return __extends$v(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){},t}(Observable_1.Observable),NeverObservable_2=NeverObservable,NeverObservable_1={NeverObservable:NeverObservable_2},never_1=NeverObservable_1.NeverObservable.create,never={never:never_1};Observable_1.Observable.never=never.never;var of_1=ArrayObservable_1.ArrayObservable.of,of={of:of_1};Observable_1.Observable.of=of.of;var __extends$w=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function onErrorResumeNext(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&isArray.isArray(e[0])&&(e=e[0]),this.lift(new OnErrorResumeNextOperator(e))}var onErrorResumeNext_2=onErrorResumeNext;function onErrorResumeNextStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r;return 1===e.length&&isArray.isArray(e[0])&&(e=e[0]),r=e.shift(),new FromObservable_1.FromObservable(r,null).lift(new OnErrorResumeNextOperator(e))}var onErrorResumeNextStatic_1=onErrorResumeNextStatic,OnErrorResumeNextOperator=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new OnErrorResumeNextSubscriber(e,this.nextSources))},e}(),OnErrorResumeNextSubscriber=function(e){function t(t,r){e.call(this,t),this.destination=t,this.nextSources=r}return __extends$w(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(subscribeToResult_1.subscribeToResult(this,e)):this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),onErrorResumeNext_1={onErrorResumeNext:onErrorResumeNext_2,onErrorResumeNextStatic:onErrorResumeNextStatic_1};Observable_1.Observable.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNextStatic;var __extends$x=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function dispatch$1(e){var t=e.obj,r=e.keys,n=e.length,i=e.index,o=e.subscriber;if(i!==n){var s=r[i];o.next([s,t[s]]),e.index=i+1,this.schedule(e)}else o.complete()}var PairsObservable=function(e){function t(t,r){e.call(this),this.obj=t,this.scheduler=r,this.keys=Object.keys(t)}return __extends$x(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this.keys,r=this.scheduler,n=t.length;if(r)return r.schedule(dispatch$1,0,{obj:this.obj,keys:t,length:n,index:0,subscriber:e});for(var i=0;i<n;i++){var o=t[i];e.next([o,this.obj[o]])}e.complete()},t}(Observable_1.Observable),PairsObservable_2=PairsObservable,PairsObservable_1={PairsObservable:PairsObservable_2},pairs_1=PairsObservable_1.PairsObservable.create,pairs={pairs:pairs_1};Observable_1.Observable.pairs=pairs.pairs;var __extends$y=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},RangeObservable=function(e){function t(t,r,n){e.call(this),this.start=t,this._count=r,this.scheduler=n}return __extends$y(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),void 0===r&&(r=0),new t(e,r,n)},t.dispatch=function(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=0,n=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:r,count:i,start:n,subscriber:e});for(;;){if(r++>=i){e.complete();break}if(e.next(n++),e.closed)break}},t}(Observable_1.Observable),RangeObservable_2=RangeObservable,RangeObservable_1={RangeObservable:RangeObservable_2},range_1=RangeObservable_1.RangeObservable.create,range={range:range_1};Observable_1.Observable.range=range.range;var __extends$z=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},UsingObservable=function(e){function t(t,r){e.call(this),this.resourceFactory=t,this.observableFactory=r}return __extends$z(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t,r=this.resourceFactory,n=this.observableFactory;try{return t=r(),new UsingSubscriber(e,t,n)}catch(t){e.error(t)}},t}(Observable_1.Observable),UsingObservable_2=UsingObservable,UsingSubscriber=function(e){function t(t,r,n){e.call(this,t),this.resource=r,this.observableFactory=n,t.add(r),this.tryUse()}return __extends$z(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(subscribeToResult_1.subscribeToResult(this,e))}catch(e){this._error(e)}},t}(OuterSubscriber_1.OuterSubscriber),UsingObservable_1={UsingObservable:UsingObservable_2},using_1=UsingObservable_1.UsingObservable.create,using={using:using_1};Observable_1.Observable.using=using.using;var __extends$A=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ErrorObservable=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return __extends$A(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var r=this.error,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{error:r,subscriber:e});e.error(r)},t}(Observable_1.Observable),ErrorObservable_2=ErrorObservable,ErrorObservable_1={ErrorObservable:ErrorObservable_2},_throw_1=ErrorObservable_1.ErrorObservable.create,_throw={_throw:_throw_1};function isDate(e){return e instanceof Date&&!isNaN(+e)}Observable_1.Observable.throw=_throw._throw;var isDate_2=isDate,isDate_1={isDate:isDate_2},__extends$B=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},TimerObservable=function(e){function t(t,r,n){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,isNumeric_1.isNumeric(r)?this.period=Number(r)<1?1:Number(r):isScheduler_1.isScheduler(r)&&(n=r),isScheduler_1.isScheduler(n)||(n=async.async),this.scheduler=n,this.dueTime=isDate_1.isDate(t)?+t-this.scheduler.now():t}return __extends$B(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),new t(e,r,n)},t.dispatch=function(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}},t.prototype._subscribe=function(e){var r=this.period,n=this.dueTime;return this.scheduler.schedule(t.dispatch,n,{index:0,period:r,subscriber:e})},t}(Observable_1.Observable),TimerObservable_2=TimerObservable,TimerObservable_1={TimerObservable:TimerObservable_2},timer_1=TimerObservable_1.TimerObservable.create,timer={timer:timer_1};Observable_1.Observable.timer=timer.timer;var __extends$C=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function zipProto(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(zipStatic.apply(void 0,[this].concat(e)))}var zipProto_1=zipProto;function zipStatic(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new ArrayObservable_1.ArrayObservable(e).lift(new ZipOperator(r))}var zipStatic_1=zipStatic,ZipOperator=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new ZipSubscriber(e,this.project))},e}(),ZipOperator_1=ZipOperator,ZipSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=n}return __extends$C(t,e),t.prototype._next=function(e){var t=this.iterators;isArray.isArray(e)?t.push(new StaticArrayIterator(e)):"function"==typeof e[iterator.iterator]?t.push(new StaticIterator(e[iterator.iterator]())):t.push(new ZipBufferIterator(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.project?this._tryProject(o):r.next(o),i&&r.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber_1.Subscriber),ZipSubscriber_1=ZipSubscriber,StaticIterator=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),StaticArrayIterator=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[iterator.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),ZipBufferIterator=function(e){function t(t,r,n){e.call(this,t),this.parent=r,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return __extends$C(t,e),t.prototype[iterator.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return subscribeToResult_1.subscribeToResult(this,this.observable,this,t)},t}(OuterSubscriber_1.OuterSubscriber),zip={zipProto:zipProto_1,zipStatic:zipStatic_1,ZipOperator:ZipOperator_1,ZipSubscriber:ZipSubscriber_1},zip_2=zip.zipStatic,zip$1={zip:zip_2};Observable_1.Observable.zip=zip$1.zip;var __extends$D=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function map(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new MapOperator(e,t))}var map_2=map,MapOperator=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new MapSubscriber(e,this.project,this.thisArg))},e}(),MapOperator_1=MapOperator,MapSubscriber=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return __extends$D(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber_1.Subscriber),map_1={map:map_2,MapOperator:MapOperator_1},__extends$E=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function getCORSRequest(){if(root.root.XMLHttpRequest)return new root.root.XMLHttpRequest;if(root.root.XDomainRequest)return new root.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function getXMLHttpRequest(){if(root.root.XMLHttpRequest)return new root.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new root.root.ActiveXObject(e))break}catch(e){}return new root.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}function ajaxGet(e,t){return void 0===t&&(t=null),new AjaxObservable({method:"GET",url:e,headers:t})}var ajaxGet_1=ajaxGet;function ajaxPost(e,t,r){return new AjaxObservable({method:"POST",url:e,body:t,headers:r})}var ajaxPost_1=ajaxPost;function ajaxDelete(e,t){return new AjaxObservable({method:"DELETE",url:e,headers:t})}var ajaxDelete_1=ajaxDelete;function ajaxPut(e,t,r){return new AjaxObservable({method:"PUT",url:e,body:t,headers:r})}var ajaxPut_1=ajaxPut;function ajaxPatch(e,t,r){return new AjaxObservable({method:"PATCH",url:e,body:t,headers:r})}var ajaxPatch_1=ajaxPatch;function ajaxGetJSON(e,t){return new AjaxObservable({method:"GET",url:e,responseType:"json",headers:t}).lift(new map_1.MapOperator(function(e,t){return e.response},null))}var ajaxGetJSON_1=ajaxGetJSON,AjaxObservable=function(e){function t(t){e.call(this);var r={async:!0,createXHR:function(){return this.crossDomain?getCORSRequest.call(this):getXMLHttpRequest()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);this.request=r}var r;return __extends$E(t,e),t.prototype._subscribe=function(e){return new AjaxSubscriber(e,this.request)},t.create=((r=function(e){return new t(e)}).get=ajaxGet,r.post=ajaxPost,r.delete=ajaxDelete,r.put=ajaxPut,r.patch=ajaxPatch,r.getJSON=ajaxGetJSON,r),t}(Observable_1.Observable),AjaxObservable_2=AjaxObservable,AjaxSubscriber=function(e){function t(t,r){e.call(this,t),this.request=r,this.done=!1;var n=r.headers=r.headers||{};r.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in n||root.root.FormData&&r.body instanceof root.root.FormData||void 0===r.body||(n["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=this.serializeBody(r.body,r.headers["Content-Type"]),this.send()}return __extends$E(t,e),t.prototype.next=function(e){this.done=!0;var t=this.xhr,r=this.request,n=this.destination,i=new AjaxResponse(e,t,r);n.next(i)},t.prototype.send=function(){var e=this.request,t=this.request,r=t.user,n=t.method,i=t.url,o=t.async,s=t.password,a=t.headers,c=t.body,u=e.createXHR,l=tryCatch_1.tryCatch(u).call(e);if(l===errorObject.errorObject)this.error(errorObject.errorObject.e);else{this.xhr=l,this.setupEvents(l,e);if((r?tryCatch_1.tryCatch(l.open).call(l,n,i,o,r,s):tryCatch_1.tryCatch(l.open).call(l,n,i,o))===errorObject.errorObject)return this.error(errorObject.errorObject.e),null;if(l.timeout=e.timeout,l.responseType=e.responseType,"withCredentials"in l&&(l.withCredentials=!!e.withCredentials),this.setHeaders(l,a),(c?tryCatch_1.tryCatch(l.send).call(l,c):tryCatch_1.tryCatch(l.send).call(l))===errorObject.errorObject)return this.error(errorObject.errorObject.e),null}return l},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(root.root.FormData&&e instanceof root.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;function n(e){var t=n,r=t.subscriber,i=t.progressSubscriber,o=t.request;i&&i.error(e),r.error(new AjaxTimeoutError(this,o))}if(e.ontimeout=n,n.request=t,n.subscriber=this,n.progressSubscriber=r,e.upload&&"withCredentials"in e){var i,o;if(r)i=function(e){i.progressSubscriber.next(e)},root.root.XDomainRequest?e.onprogress=i:e.upload.onprogress=i,i.progressSubscriber=r;o=function(e){var t=o,r=t.progressSubscriber,n=t.subscriber,i=t.request;r&&r.error(e),n.error(new AjaxError("ajax error",this,i))},e.onerror=o,o.request=t,o.subscriber=this,o.progressSubscriber=r}function s(e){var t=s,r=t.subscriber,n=t.progressSubscriber,i=t.request;if(4===this.readyState){var o=1223===this.status?204:this.status,a="text"===this.responseType?this.response||this.responseText:this.response;0===o&&(o=a?200:0),200<=o&&o<300?(n&&n.complete(),r.next(e),r.complete()):(n&&n.error(e),r.error(new AjaxError("ajax error "+o,this,i)))}}e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=r,s.request=t},t.prototype.unsubscribe=function(){var t=this.done,r=this.xhr;!t&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(Subscriber_1.Subscriber),AjaxSubscriber_1=AjaxSubscriber,AjaxResponse=function(e,t,r){switch(this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.responseType){case"json":this.response="response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");break;case"xml":this.response=t.responseXML;break;case"text":default:this.response="response"in t?t.response:t.responseText}},AjaxResponse_1=AjaxResponse,AjaxError=function(e){function t(t,r,n){e.call(this,t),this.message=t,this.xhr=r,this.request=n,this.status=r.status}return __extends$E(t,e),t}(Error),AjaxError_1=AjaxError,AjaxTimeoutError=function(e){function t(t,r){e.call(this,"ajax timeout",t,r)}return __extends$E(t,e),t}(AjaxError),AjaxTimeoutError_1=AjaxTimeoutError,AjaxObservable_1={ajaxGet:ajaxGet_1,ajaxPost:ajaxPost_1,ajaxDelete:ajaxDelete_1,ajaxPut:ajaxPut_1,ajaxPatch:ajaxPatch_1,ajaxGetJSON:ajaxGetJSON_1,AjaxObservable:AjaxObservable_2,AjaxSubscriber:AjaxSubscriber_1,AjaxResponse:AjaxResponse_1,AjaxError:AjaxError_1,AjaxTimeoutError:AjaxTimeoutError_1},ajax_1=AjaxObservable_1.AjaxObservable.create,ajax={ajax:ajax_1};Observable_1.Observable.ajax=ajax.ajax;var __extends$F=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},QueueAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return __extends$F(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(AsyncAction_1.AsyncAction),QueueAction_2=QueueAction,QueueAction_1={QueueAction:QueueAction_2},__extends$G=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},QueueScheduler=function(e){function t(){e.apply(this,arguments)}return __extends$G(t,e),t}(AsyncScheduler_1.AsyncScheduler),QueueScheduler_2=QueueScheduler,QueueScheduler_1={QueueScheduler:QueueScheduler_2},queue_1=new QueueScheduler_1.QueueScheduler(QueueAction_1.QueueAction),queue={queue:queue_1},__extends$H=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReplaySubject=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=n,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return __extends$H(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new ReplayEvent(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError?t=Subscription_1.Subscription.EMPTY:this.isStopped?t=Subscription_1.Subscription.EMPTY:(this.observers.push(e),t=new SubjectSubscription_1.SubjectSubscription(this,e)),n&&e.add(e=new observeOn_1.ObserveOnSubscriber(e,n));for(var i=r.length,o=0;o<i&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||queue.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(Subject_1.Subject),ReplaySubject_2=ReplaySubject,ReplayEvent=function(e,t){this.time=e,this.value=t},ReplaySubject_1={ReplaySubject:ReplaySubject_2};function assignImpl(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=t.length,i=0;i<n;i++){var o=t[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=o[s])}return e}var assignImpl_1=assignImpl;function getAssign(e){return e.Object.assign||assignImpl}var getAssign_1=getAssign,assign_1=getAssign(root.root),assign={assignImpl:assignImpl_1,getAssign:getAssign_1,assign:assign_1},__extends$I=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},WebSocketSubject=function(e){function t(t,r){if(t instanceof Observable_1.Observable)e.call(this,r,t);else{if(e.call(this),this.WebSocketCtor=root.root.WebSocket,this._output=new Subject_1.Subject,"string"==typeof t?this.url=t:assign.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new ReplaySubject_1.ReplaySubject}}return __extends$I(t,e),t.prototype.resultSelector=function(e){return JSON.parse(e.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var r=new t(this,this.destination);return r.operator=e,r},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new ReplaySubject_1.ReplaySubject),this._output=new Subject_1.Subject},t.prototype.multiplex=function(e,t,r){var n=this;return new Observable_1.Observable(function(i){var o=tryCatch_1.tryCatch(e)();o===errorObject.errorObject?i.error(errorObject.errorObject.e):n.next(o);var s=n.subscribe(function(e){var t=tryCatch_1.tryCatch(r)(e);t===errorObject.errorObject?i.error(errorObject.errorObject.e):t&&i.next(e)},function(e){return i.error(e)},function(){return i.complete()});return function(){var e=tryCatch_1.tryCatch(t)();e===errorObject.errorObject?i.error(errorObject.errorObject.e):n.next(e),s.unsubscribe()}})},t.prototype._connectSocket=function(){var e=this,t=this.WebSocketCtor,r=this._output,n=null;try{n=this.protocol?new t(this.url,this.protocol):new t(this.url),this.socket=n,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(e){return void r.error(e)}var i=new Subscription_1.Subscription(function(){e.socket=null,n&&1===n.readyState&&n.close()});n.onopen=function(t){var o=e.openObserver;o&&o.next(t);var s=e.destination;e.destination=Subscriber_1.Subscriber.create(function(e){return 1===n.readyState&&n.send(e)},function(t){var i=e.closingObserver;i&&i.next(void 0),t&&t.code?n.close(t.code,t.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()},function(){var t=e.closingObserver;t&&t.next(void 0),n.close(),e._resetState()}),s&&s instanceof ReplaySubject_1.ReplaySubject&&i.add(s.subscribe(e.destination))},n.onerror=function(t){e._resetState(),r.error(t)},n.onclose=function(t){e._resetState();var n=e.closeObserver;n&&n.next(t),t.wasClean?r.complete():r.error(t)},n.onmessage=function(t){var n=tryCatch_1.tryCatch(e.resultSelector)(t);n===errorObject.errorObject?r.error(errorObject.errorObject.e):r.next(n)}},t.prototype._subscribe=function(e){var t=this,r=this.source;if(r)return r.subscribe(e);this.socket||this._connectSocket();var n=new Subscription_1.Subscription;return n.add(this._output.subscribe(e)),n.add(function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),n},t.prototype.unsubscribe=function(){var t=this.source,r=this.socket;r&&1===r.readyState&&(r.close(),this._resetState()),e.prototype.unsubscribe.call(this),t||(this.destination=new ReplaySubject_1.ReplaySubject)},t}(Subject_1.AnonymousSubject),WebSocketSubject_2=WebSocketSubject,WebSocketSubject_1={WebSocketSubject:WebSocketSubject_2},webSocket_1=WebSocketSubject_1.WebSocketSubject.create,webSocket={webSocket:webSocket_1};Observable_1.Observable.webSocket=webSocket.webSocket;var __extends$J=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function buffer(e){return this.lift(new BufferOperator(e))}var buffer_2=buffer,BufferOperator=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new BufferSubscriber(e,this.closingNotifier))},e}(),BufferSubscriber=function(e){function t(t,r){e.call(this,t),this.buffer=[],this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$J(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(OuterSubscriber_1.OuterSubscriber),buffer_1={buffer:buffer_2};Observable_1.Observable.prototype.buffer=buffer_1.buffer;var __extends$K=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferCount(e,t){return void 0===t&&(t=null),this.lift(new BufferCountOperator(e,t))}var bufferCount_2=bufferCount,BufferCountOperator=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?BufferSkipCountSubscriber:BufferCountSubscriber}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),BufferCountSubscriber=function(e){function t(t,r){e.call(this,t),this.bufferSize=r,this.buffer=[]}return __extends$K(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(Subscriber_1.Subscriber),BufferSkipCountSubscriber=function(e){function t(t,r,n){e.call(this,t),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return __extends$K(t,e),t.prototype._next=function(e){var t=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var o=n.length;o--;){var s=n[o];s.push(e),s.length===t&&(n.splice(o,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,r=this.destination;t.length>0;){var n=t.shift();n.length>0&&r.next(n)}e.prototype._complete.call(this)},t}(Subscriber_1.Subscriber),bufferCount_1={bufferCount:bufferCount_2};Observable_1.Observable.prototype.bufferCount=bufferCount_1.bufferCount;var __extends$L=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferTime(e){var t=arguments.length,r=async.async;isScheduler_1.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),this.lift(new BufferTimeOperator(e,n,i,r))}var bufferTime_2=bufferTime,BufferTimeOperator=function(){function e(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new BufferTimeSubscriber(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),Context=function(){this.buffer=[]},BufferTimeSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.bufferTimeSpan=r,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=o,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly){var a={subscriber:this,context:s,bufferTimeSpan:r};this.add(s.closeAction=o.schedule(dispatchBufferTimeSpanOnly,r,a))}else{var c={subscriber:this,context:s},u={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:this,scheduler:o};this.add(s.closeAction=o.schedule(dispatchBufferClose,r,c)),this.add(o.schedule(dispatchBufferCreation,n,u))}}return __extends$L(t,e),t.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,i=0;i<n;i++){var o=r[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,r=this.destination;t.length>0;){var n=t.shift();r.next(n.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,r,n))}},t.prototype.openContext=function(){var e=new Context;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(Subscriber_1.Subscriber);function dispatchBufferTimeSpanOnly(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function dispatchBufferCreation(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler,o=n.openContext();n.closed||(n.add(o.closeAction=i.schedule(dispatchBufferClose,r,{subscriber:n,context:o})),this.schedule(e,t))}function dispatchBufferClose(e){var t=e.subscriber,r=e.context;t.closeContext(r)}var bufferTime_1={bufferTime:bufferTime_2};Observable_1.Observable.prototype.bufferTime=bufferTime_1.bufferTime;var __extends$M=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferToggle(e,t){return this.lift(new BufferToggleOperator(e,t))}var bufferToggle_2=bufferToggle,BufferToggleOperator=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new BufferToggleSubscriber(e,this.openings,this.closingSelector))},e}(),BufferToggleSubscriber=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$M(t,e),t.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},t.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var n=r.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,r=new Subscription_1.Subscription,n={buffer:[],subscription:r};t.push(n);var i=subscribeToResult_1.subscribeToResult(this,e,n);!i||i.closed?this.closeBuffer(n):(i.context=n,this.add(i),r.add(i))},t}(OuterSubscriber_1.OuterSubscriber),bufferToggle_1={bufferToggle:bufferToggle_2};Observable_1.Observable.prototype.bufferToggle=bufferToggle_1.bufferToggle;var __extends$N=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function bufferWhen(e){return this.lift(new BufferWhenOperator(e))}var bufferWhen_2=bufferWhen,BufferWhenOperator=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new BufferWhenSubscriber(e,this.closingSelector))},e}(),BufferWhenSubscriber=function(e){function t(t,r){e.call(this,t),this.closingSelector=r,this.subscribing=!1,this.openBuffer()}return __extends$N(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,r,n,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var r=tryCatch_1.tryCatch(this.closingSelector)();r===errorObject.errorObject?this.error(errorObject.errorObject.e):(e=new Subscription_1.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(subscribeToResult_1.subscribeToResult(this,r)),this.subscribing=!1)},t}(OuterSubscriber_1.OuterSubscriber),bufferWhen_1={bufferWhen:bufferWhen_2};Observable_1.Observable.prototype.bufferWhen=bufferWhen_1.bufferWhen;var __extends$O=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function _catch(e){var t=new CatchOperator(e),r=this.lift(t);return t.caught=r}var _catch_2=_catch,CatchOperator=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new CatchSubscriber(e,this.selector,this.caught))},e}(),CatchSubscriber=function(e){function t(t,r,n){e.call(this,t),this.selector=r,this.caught=n}return __extends$O(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(subscribeToResult_1.subscribeToResult(this,r))}},t}(OuterSubscriber_1.OuterSubscriber),_catch_1={_catch:_catch_2};function combineAll(e){return this.lift(new combineLatest_1.CombineLatestOperator(e))}Observable_1.Observable.prototype.catch=_catch_1._catch,Observable_1.Observable.prototype._catch=_catch_1._catch;var combineAll_2=combineAll,combineAll_1={combineAll:combineAll_2};function concatAll(){return this.lift(new mergeAll_1.MergeAllOperator(1))}Observable_1.Observable.prototype.combineAll=combineAll_1.combineAll,Observable_1.Observable.prototype.combineLatest=combineLatest_1.combineLatest,Observable_1.Observable.prototype.concat=concat_1.concat;var concatAll_2=concatAll,concatAll_1={concatAll:concatAll_2};Observable_1.Observable.prototype.concatAll=concatAll_1.concatAll;var __extends$P=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeMap(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new MergeMapOperator(e,t,r))}var mergeMap_2=mergeMap,MergeMapOperator=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapSubscriber(e,this.project,this.resultSelector,this.concurrent))},e}(),MergeMapOperator_1=MergeMapOperator,MergeMapSubscriber=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends$P(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),MergeMapSubscriber_1=MergeMapSubscriber,mergeMap_1={mergeMap:mergeMap_2,MergeMapOperator:MergeMapOperator_1,MergeMapSubscriber:MergeMapSubscriber_1};function concatMap(e,t){return this.lift(new mergeMap_1.MergeMapOperator(e,t,1))}var concatMap_2=concatMap,concatMap_1={concatMap:concatMap_2};Observable_1.Observable.prototype.concatMap=concatMap_1.concatMap;var __extends$Q=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeMapTo(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new MergeMapToOperator(e,t,r))}var mergeMapTo_2=mergeMapTo,MergeMapToOperator=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapToSubscriber(e,this.ish,this.resultSelector,this.concurrent))},e}(),MergeMapToOperator_1=MergeMapToOperator,MergeMapToSubscriber=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends$Q(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,t,e,r)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r,n,i){this.add(subscribeToResult_1.subscribeToResult(this,e,n,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,s=this.destination;o?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i,o=this.resultSelector,s=this.destination;try{i=o(e,t,r,n)}catch(e){return void s.error(e)}s.next(i)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),MergeMapToSubscriber_1=MergeMapToSubscriber,mergeMapTo_1={mergeMapTo:mergeMapTo_2,MergeMapToOperator:MergeMapToOperator_1,MergeMapToSubscriber:MergeMapToSubscriber_1};function concatMapTo(e,t){return this.lift(new mergeMapTo_1.MergeMapToOperator(e,t,1))}var concatMapTo_2=concatMapTo,concatMapTo_1={concatMapTo:concatMapTo_2};Observable_1.Observable.prototype.concatMapTo=concatMapTo_1.concatMapTo;var __extends$R=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function count(e){return this.lift(new CountOperator(e,this))}var count_2=count,CountOperator=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new CountSubscriber(e,this.predicate,this.source))},e}(),CountSubscriber=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.count=0,this.index=0}return __extends$R(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(Subscriber_1.Subscriber),count_1={count:count_2};Observable_1.Observable.prototype.count=count_1.count;var __extends$S=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function dematerialize(){return this.lift(new DeMaterializeOperator)}var dematerialize_2=dematerialize,DeMaterializeOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new DeMaterializeSubscriber(e))},e}(),DeMaterializeSubscriber=function(e){function t(t){e.call(this,t)}return __extends$S(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(Subscriber_1.Subscriber),dematerialize_1={dematerialize:dematerialize_2};Observable_1.Observable.prototype.dematerialize=dematerialize_1.dematerialize;var __extends$T=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function debounce(e){return this.lift(new DebounceOperator(e))}var debounce_2=debounce,DebounceOperator=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new DebounceSubscriber(e,this.durationSelector))},e}(),DebounceSubscriber=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1,this.durationSubscription=null}return __extends$T(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=subscribeToResult_1.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=null,r.unsubscribe(),this.remove(r)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(OuterSubscriber_1.OuterSubscriber),debounce_1={debounce:debounce_2};Observable_1.Observable.prototype.debounce=debounce_1.debounce;var __extends$U=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function debounceTime(e,t){return void 0===t&&(t=async.async),this.lift(new DebounceTimeOperator(e,t))}var debounceTime_2=debounceTime,DebounceTimeOperator=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new DebounceTimeSubscriber(e,this.dueTime,this.scheduler))},e}(),DebounceTimeSubscriber=function(e){function t(t,r,n){e.call(this,t),this.dueTime=r,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return __extends$U(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$3,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(Subscriber_1.Subscriber);function dispatchNext$3(e){e.debouncedNext()}var debounceTime_1={debounceTime:debounceTime_2};Observable_1.Observable.prototype.debounceTime=debounceTime_1.debounceTime;var __extends$V=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function defaultIfEmpty(e){return void 0===e&&(e=null),this.lift(new DefaultIfEmptyOperator(e))}var defaultIfEmpty_2=defaultIfEmpty,DefaultIfEmptyOperator=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new DefaultIfEmptySubscriber(e,this.defaultValue))},e}(),DefaultIfEmptySubscriber=function(e){function t(t,r){e.call(this,t),this.defaultValue=r,this.isEmpty=!0}return __extends$V(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Subscriber_1.Subscriber),defaultIfEmpty_1={defaultIfEmpty:defaultIfEmpty_2};Observable_1.Observable.prototype.defaultIfEmpty=defaultIfEmpty_1.defaultIfEmpty;var __extends$W=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function delay(e,t){void 0===t&&(t=async.async);var r=isDate_1.isDate(e)?+e-t.now():Math.abs(e);return this.lift(new DelayOperator(r,t))}var delay_2=delay,DelayOperator=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new DelaySubscriber(e,this.delay,this.scheduler))},e}(),DelaySubscriber=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return __extends$W(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new DelayMessage(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Notification_1.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(Notification_1.Notification.createComplete())},t}(Subscriber_1.Subscriber),DelayMessage=function(e,t){this.time=e,this.notification=t},delay_1={delay:delay_2};Observable_1.Observable.prototype.delay=delay_1.delay;var __extends$X=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function delayWhen(e,t){return t?new SubscriptionDelayObservable(this,t).lift(new DelayWhenOperator(e)):this.lift(new DelayWhenOperator(e))}var delayWhen_2=delayWhen,DelayWhenOperator=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new DelayWhenSubscriber(e,this.delayDurationSelector))},e}(),DelayWhenSubscriber=function(e){function t(t,r){e.call(this,t),this.delayDurationSelector=r,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return __extends$X(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),r=null;return-1!==t&&(r=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),r},t.prototype.tryDelay=function(e,t){var r=subscribeToResult_1.subscribeToResult(this,e,t);r&&!r.closed&&(this.add(r),this.delayNotifierSubscriptions.push(r)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),SubscriptionDelayObservable=function(e){function t(t,r){e.call(this),this.source=t,this.subscriptionDelay=r}return __extends$X(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(e,this.source))},t}(Observable_1.Observable),SubscriptionDelaySubscriber=function(e){function t(t,r){e.call(this),this.parent=t,this.source=r,this.sourceSubscribed=!1}return __extends$X(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(Subscriber_1.Subscriber),delayWhen_1={delayWhen:delayWhen_2};function minimalSetImpl(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}Observable_1.Observable.prototype.delayWhen=delayWhen_1.delayWhen;var minimalSetImpl_1=minimalSetImpl,Set$1=root.root.Set||minimalSetImpl(),_Set={minimalSetImpl:minimalSetImpl_1,Set:Set$1},__extends$Y=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function distinct(e,t){return this.lift(new DistinctOperator(e,t))}var distinct_2=distinct,DistinctOperator=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new DistinctSubscriber(e,this.keySelector,this.flushes))},e}(),DistinctSubscriber=function(e){function t(t,r,n){e.call(this,t),this.keySelector=r,this.values=new _Set.Set,n&&this.add(subscribeToResult_1.subscribeToResult(this,n))}return __extends$Y(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(OuterSubscriber_1.OuterSubscriber),DistinctSubscriber_1=DistinctSubscriber,distinct_1={distinct:distinct_2,DistinctSubscriber:DistinctSubscriber_1};Observable_1.Observable.prototype.distinct=distinct_1.distinct;var __extends$Z=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function distinctUntilChanged(e,t){return this.lift(new DistinctUntilChangedOperator(e,t))}var distinctUntilChanged_2=distinctUntilChanged,DistinctUntilChangedOperator=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new DistinctUntilChangedSubscriber(e,this.compare,this.keySelector))},e}(),DistinctUntilChangedSubscriber=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return __extends$Z(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=tryCatch_1.tryCatch(this.keySelector)(e))===errorObject.errorObject)return this.destination.error(errorObject.errorObject.e);var r=!1;if(this.hasKey){if((r=tryCatch_1.tryCatch(this.compare)(this.key,t))===errorObject.errorObject)return this.destination.error(errorObject.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},t}(Subscriber_1.Subscriber),distinctUntilChanged_1={distinctUntilChanged:distinctUntilChanged_2};function distinctUntilKeyChanged(e,t){return distinctUntilChanged_1.distinctUntilChanged.call(this,function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}Observable_1.Observable.prototype.distinctUntilChanged=distinctUntilChanged_1.distinctUntilChanged;var distinctUntilKeyChanged_2=distinctUntilKeyChanged,distinctUntilKeyChanged_1={distinctUntilKeyChanged:distinctUntilKeyChanged_2};Observable_1.Observable.prototype.distinctUntilKeyChanged=distinctUntilKeyChanged_1.distinctUntilKeyChanged;var __extends$_=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function _do(e,t,r){return this.lift(new DoOperator(e,t,r))}var _do_2=_do,DoOperator=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new DoSubscriber(e,this.nextOrObserver,this.error,this.complete))},e}(),DoSubscriber=function(e){function t(t,r,n,i){e.call(this,t);var o=new Subscriber_1.Subscriber(r,n,i);o.syncErrorThrowable=!0,this.add(o),this.safeSubscriber=o}return __extends$_(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(Subscriber_1.Subscriber),_do_1={_do:_do_2};Observable_1.Observable.prototype.do=_do_1._do,Observable_1.Observable.prototype._do=_do_1._do;var __extends$$=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function exhaust(){return this.lift(new SwitchFirstOperator)}var exhaust_2=exhaust,SwitchFirstOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new SwitchFirstSubscriber(e))},e}(),SwitchFirstSubscriber=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return __extends$$(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),exhaust_1={exhaust:exhaust_2};Observable_1.Observable.prototype.exhaust=exhaust_1.exhaust;var __extends$10=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function exhaustMap(e,t){return this.lift(new SwitchFirstMapOperator(e,t))}var exhaustMap_2=exhaustMap,SwitchFirstMapOperator=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new SwitchFirstMapSubscriber(e,this.project,this.resultSelector))},e}(),SwitchFirstMapSubscriber=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return __extends$10(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,r=this.destination;try{var n=this.project(e,t);this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,n,e,t))}catch(e){r.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,s=this.destination;o?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i=this.resultSelector,o=this.destination;try{var s=i(e,t,r,n);o.next(s)}catch(e){o.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),exhaustMap_1={exhaustMap:exhaustMap_2};Observable_1.Observable.prototype.exhaustMap=exhaustMap_1.exhaustMap;var __extends$11=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function expand(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,this.lift(new ExpandOperator(e,t,r))}var expand_2=expand,ExpandOperator=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new ExpandSubscriber(e,this.project,this.concurrent,this.scheduler))},e}(),ExpandOperator_1=ExpandOperator,ExpandSubscriber=function(e){function t(t,r,n,i){e.call(this,t),this.project=r,this.concurrent=n,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}return __extends$11(t,e),t.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)},t.prototype._next=function(e){var r=this.destination;if(r.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){r.next(e);var i=tryCatch_1.tryCatch(this.project)(e,n);if(i===errorObject.errorObject)r.error(errorObject.errorObject.e);else if(this.scheduler){var o={subscriber:this,result:i,value:e,index:n};this.add(this.scheduler.schedule(t.dispatch,0,o))}else this.subscribeToProjection(i,e,n)}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,r){this.active++,this.add(subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),ExpandSubscriber_1=ExpandSubscriber,expand_1={expand:expand_2,ExpandOperator:ExpandOperator_1,ExpandSubscriber:ExpandSubscriber_1};Observable_1.Observable.prototype.expand=expand_1.expand;var __extends$12=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ArgumentOutOfRangeError=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return __extends$12(t,e),t}(Error),ArgumentOutOfRangeError_2=ArgumentOutOfRangeError,ArgumentOutOfRangeError_1={ArgumentOutOfRangeError:ArgumentOutOfRangeError_2},__extends$13=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function elementAt(e,t){return this.lift(new ElementAtOperator(e,t))}var elementAt_2=elementAt,ElementAtOperator=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new ElementAtSubscriber(e,this.index,this.defaultValue))},e}(),ElementAtSubscriber=function(e){function t(t,r,n){e.call(this,t),this.index=r,this.defaultValue=n}return __extends$13(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError)),e.complete()},t}(Subscriber_1.Subscriber),elementAt_1={elementAt:elementAt_2};Observable_1.Observable.prototype.elementAt=elementAt_1.elementAt;var __extends$14=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function filter(e,t){return this.lift(new FilterOperator(e,t))}var filter_2=filter,FilterOperator=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},e}(),FilterSubscriber=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return __extends$14(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Subscriber_1.Subscriber),filter_1={filter:filter_2};Observable_1.Observable.prototype.filter=filter_1.filter;var __extends$15=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function _finally(e){return this.lift(new FinallyOperator(e))}var _finally_2=_finally,FinallyOperator=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new FinallySubscriber(e,this.callback))},e}(),FinallySubscriber=function(e){function t(t,r){e.call(this,t),this.add(new Subscription_1.Subscription(r))}return __extends$15(t,e),t}(Subscriber_1.Subscriber),_finally_1={_finally:_finally_2};Observable_1.Observable.prototype.finally=_finally_1._finally,Observable_1.Observable.prototype._finally=_finally_1._finally;var __extends$16=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function find(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return this.lift(new FindValueOperator(e,this,!1,t))}var find_2=find,FindValueOperator=function(){function e(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}return e.prototype.call=function(e,t){return t.subscribe(new FindValueSubscriber(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),FindValueOperator_1=FindValueOperator,FindValueSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.source=n,this.yieldIndex=i,this.thisArg=o,this.index=0}return __extends$16(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(Subscriber_1.Subscriber),FindValueSubscriber_1=FindValueSubscriber,find_1={find:find_2,FindValueOperator:FindValueOperator_1,FindValueSubscriber:FindValueSubscriber_1};function findIndex(e,t){return this.lift(new find_1.FindValueOperator(e,this,!0,t))}Observable_1.Observable.prototype.find=find_1.find;var findIndex_2=findIndex,findIndex_1={findIndex:findIndex_2};Observable_1.Observable.prototype.findIndex=findIndex_1.findIndex;var __extends$17=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},EmptyError=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return __extends$17(t,e),t}(Error),EmptyError_2=EmptyError,EmptyError_1={EmptyError:EmptyError_2},__extends$18=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function first(e,t,r){return this.lift(new FirstOperator(e,t,r,this))}var first_2=first,FirstOperator=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new FirstSubscriber(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),FirstSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return __extends$18(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new EmptyError_1.EmptyError):(e.next(this.defaultValue),e.complete())},t}(Subscriber_1.Subscriber),first_1={first:first_2};Observable_1.Observable.prototype.first=first_1.first;var MapPolyfill=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var r=this._keys.indexOf(e);return-1===r?(this._keys.push(e),this._values.push(t),this.size++):this._values[r]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var r=0;r<this.size;r++)e.call(t,this._values[r],this._keys[r])},e}(),MapPolyfill_2=MapPolyfill,MapPolyfill_1={MapPolyfill:MapPolyfill_2},Map$1=root.root.Map||MapPolyfill_1.MapPolyfill,_Map={Map:Map$1},FastMap=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&e.call(t,r[n],n)},e.prototype.clear=function(){this.values={}},e}(),FastMap_2=FastMap,FastMap_1={FastMap:FastMap_2},__extends$19=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function groupBy(e,t,r,n){return this.lift(new GroupByOperator(e,t,r,n))}var groupBy_2=groupBy,GroupByOperator=function(){function e(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}return e.prototype.call=function(e,t){return t.subscribe(new GroupBySubscriber(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),GroupBySubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.keySelector=r,this.elementSelector=n,this.durationSelector=i,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return __extends$19(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups="string"==typeof t?new FastMap_1.FastMap:new _Map.Map);var n,i=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!i){i=this.subjectSelector?this.subjectSelector():new Subject_1.Subject,r.set(t,i);var o=new GroupedObservable(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new GroupedObservable(t,i))}catch(e){return void this.error(e)}this.add(s.subscribe(new GroupDurationSubscriber(t,i,this)))}}i.closed||i.next(n)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,r){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(Subscriber_1.Subscriber),GroupDurationSubscriber=function(e){function t(t,r,n){e.call(this),this.key=t,this.group=r,this.parent=n}return __extends$19(t,e),t.prototype._next=function(e){this._complete()},t.prototype._error=function(e){var t=this.group;t.closed||t.error(e),this.parent.removeGroup(this.key)},t.prototype._complete=function(){var e=this.group;e.closed||e.complete(),this.parent.removeGroup(this.key)},t}(Subscriber_1.Subscriber),GroupedObservable=function(e){function t(t,r,n){e.call(this),this.key=t,this.groupSubject=r,this.refCountSubscription=n}return __extends$19(t,e),t.prototype._subscribe=function(e){var t=new Subscription_1.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new InnerRefCountSubscription(r)),t.add(n.subscribe(e)),t},t}(Observable_1.Observable),GroupedObservable_1=GroupedObservable,InnerRefCountSubscription=function(e){function t(t){e.call(this),this.parent=t,t.count++}return __extends$19(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Subscription_1.Subscription),groupBy_1={groupBy:groupBy_2,GroupedObservable:GroupedObservable_1};Observable_1.Observable.prototype.groupBy=groupBy_1.groupBy;var __extends$1a=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function ignoreElements(){return this.lift(new IgnoreElementsOperator)}var ignoreElements_2=ignoreElements,IgnoreElementsOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new IgnoreElementsSubscriber(e))},e}(),IgnoreElementsSubscriber=function(e){function t(){e.apply(this,arguments)}return __extends$1a(t,e),t.prototype._next=function(e){},t}(Subscriber_1.Subscriber),ignoreElements_1={ignoreElements:ignoreElements_2};Observable_1.Observable.prototype.ignoreElements=ignoreElements_1.ignoreElements;var __extends$1b=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function isEmpty(){return this.lift(new IsEmptyOperator)}var isEmpty_2=isEmpty,IsEmptyOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new IsEmptySubscriber(e))},e}(),IsEmptySubscriber=function(e){function t(t){e.call(this,t)}return __extends$1b(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Subscriber_1.Subscriber),isEmpty_1={isEmpty:isEmpty_2};Observable_1.Observable.prototype.isEmpty=isEmpty_1.isEmpty;var __extends$1c=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function audit(e){return this.lift(new AuditOperator(e))}var audit_2=audit,AuditOperator=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new AuditSubscriber(e,this.durationSelector))},e}(),AuditSubscriber=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1}return __extends$1c(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=tryCatch_1.tryCatch(this.durationSelector)(e);t===errorObject.errorObject?this.destination.error(errorObject.errorObject.e):this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,t))}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(e,t,r,n){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(OuterSubscriber_1.OuterSubscriber),audit_1={audit:audit_2};Observable_1.Observable.prototype.audit=audit_1.audit;var __extends$1d=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function auditTime(e,t){return void 0===t&&(t=async.async),this.lift(new AuditTimeOperator(e,t))}var auditTime_2=auditTime,AuditTimeOperator=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new AuditTimeSubscriber(e,this.duration,this.scheduler))},e}(),AuditTimeSubscriber=function(e){function t(t,r,n){e.call(this,t),this.duration=r,this.scheduler=n,this.hasValue=!1}return __extends$1d(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(dispatchNext$4,this.duration,this))},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t}(Subscriber_1.Subscriber);function dispatchNext$4(e){e.clearThrottle()}var auditTime_1={auditTime:auditTime_2};Observable_1.Observable.prototype.auditTime=auditTime_1.auditTime;var __extends$1e=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function last(e,t,r){return this.lift(new LastOperator(e,t,r,this))}var last_2=last,LastOperator=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new LastSubscriber(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),LastSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,void 0!==i&&(this.lastValue=i,this.hasValue=!0)}return __extends$1e(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=r,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new EmptyError_1.EmptyError)},t}(Subscriber_1.Subscriber),last_1={last:last_2};function letProto(e){return e(this)}Observable_1.Observable.prototype.last=last_1.last;var letProto_1=letProto,_let={letProto:letProto_1};Observable_1.Observable.prototype.let=_let.letProto,Observable_1.Observable.prototype.letBind=_let.letProto;var __extends$1f=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function every(e,t){return this.lift(new EveryOperator(e,t,this))}var every_2=every,EveryOperator=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new EverySubscriber(e,this.predicate,this.thisArg,this.source))},e}(),EverySubscriber=function(e){function t(t,r,n,i){e.call(this,t),this.predicate=r,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}return __extends$1f(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Subscriber_1.Subscriber),every_1={every:every_2};Observable_1.Observable.prototype.every=every_1.every,Observable_1.Observable.prototype.map=map_1.map;var __extends$1g=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mapTo(e){return this.lift(new MapToOperator(e))}var mapTo_2=mapTo,MapToOperator=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new MapToSubscriber(e,this.value))},e}(),MapToSubscriber=function(e){function t(t,r){e.call(this,t),this.value=r}return __extends$1g(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(Subscriber_1.Subscriber),mapTo_1={mapTo:mapTo_2};Observable_1.Observable.prototype.mapTo=mapTo_1.mapTo;var __extends$1h=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function materialize(){return this.lift(new MaterializeOperator)}var materialize_2=materialize,MaterializeOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new MaterializeSubscriber(e))},e}(),MaterializeSubscriber=function(e){function t(t){e.call(this,t)}return __extends$1h(t,e),t.prototype._next=function(e){this.destination.next(Notification_1.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(Notification_1.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(Notification_1.Notification.createComplete()),e.complete()},t}(Subscriber_1.Subscriber),materialize_1={materialize:materialize_2};Observable_1.Observable.prototype.materialize=materialize_1.materialize;var __extends$1i=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function reduce(e,t){var r=!1;return arguments.length>=2&&(r=!0),this.lift(new ReduceOperator(e,t,r))}var reduce_2=reduce,ReduceOperator=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new ReduceSubscriber(e,this.accumulator,this.seed,this.hasSeed))},e}(),ReduceOperator_1=ReduceOperator,ReduceSubscriber=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.hasSeed=i,this.index=0,this.hasValue=!1,this.acc=n,this.hasSeed||this.index++}return __extends$1i(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e,this.index++)}catch(e){return void this.destination.error(e)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(Subscriber_1.Subscriber),ReduceSubscriber_1=ReduceSubscriber,reduce_1={reduce:reduce_2,ReduceOperator:ReduceOperator_1,ReduceSubscriber:ReduceSubscriber_1};function max(e){var t="function"==typeof e?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t};return this.lift(new reduce_1.ReduceOperator(t))}var max_2=max,max_1={max:max_2};Observable_1.Observable.prototype.max=max_1.max,Observable_1.Observable.prototype.merge=merge_1.merge,Observable_1.Observable.prototype.mergeAll=mergeAll_1.mergeAll,Observable_1.Observable.prototype.mergeMap=mergeMap_1.mergeMap,Observable_1.Observable.prototype.flatMap=mergeMap_1.mergeMap,Observable_1.Observable.prototype.flatMapTo=mergeMapTo_1.mergeMapTo,Observable_1.Observable.prototype.mergeMapTo=mergeMapTo_1.mergeMapTo;var __extends$1j=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function mergeScan(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),this.lift(new MergeScanOperator(e,t,r))}var mergeScan_2=mergeScan,MergeScanOperator=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new MergeScanSubscriber(e,this.accumulator,this.seed,this.concurrent))},e}(),MergeScanOperator_1=MergeScanOperator,MergeScanSubscriber=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.acc=n,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return __extends$1j(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=tryCatch_1.tryCatch(this.accumulator)(this.acc,e),n=this.destination;r===errorObject.errorObject?n.error(errorObject.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r){this.add(subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(OuterSubscriber_1.OuterSubscriber),MergeScanSubscriber_1=MergeScanSubscriber,mergeScan_1={mergeScan:mergeScan_2,MergeScanOperator:MergeScanOperator_1,MergeScanSubscriber:MergeScanSubscriber_1};function min(e){var t="function"==typeof e?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t};return this.lift(new reduce_1.ReduceOperator(t))}Observable_1.Observable.prototype.mergeScan=mergeScan_1.mergeScan;var min_2=min,min_1={min:min_2};Observable_1.Observable.prototype.min=min_1.min;var __extends$1k=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ConnectableObservable=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}return __extends$1k(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Subscription_1.Subscription).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),e.closed?(this._connection=null,e=Subscription_1.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new RefCountOperator(this))},t}(Observable_1.Observable),ConnectableObservable_2=ConnectableObservable,connectableProto=ConnectableObservable.prototype,connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}},ConnectableSubscriber=function(e){function t(t,r){e.call(this,t),this.connectable=r}return __extends$1k(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(Subject_1.SubjectSubscriber),RefCountOperator=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new RefCountSubscriber(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),RefCountSubscriber=function(e){function t(t,r){e.call(this,t),this.connectable=r}return __extends$1k(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(Subscriber_1.Subscriber),ConnectableObservable_1={ConnectableObservable:ConnectableObservable_2,connectableObservableDescriptor:connectableObservableDescriptor};function multicast(e,t){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new MulticastOperator(r,t));var n=Object.create(this,ConnectableObservable_1.connectableObservableDescriptor);return n.source=this,n.subjectFactory=r,n}var multicast_2=multicast,MulticastOperator=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}(),MulticastOperator_1=MulticastOperator,multicast_1={multicast:multicast_2,MulticastOperator:MulticastOperator_1};Observable_1.Observable.prototype.multicast=multicast_1.multicast,Observable_1.Observable.prototype.observeOn=observeOn_1.observeOn,Observable_1.Observable.prototype.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNext;var __extends$1l=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function pairwise(){return this.lift(new PairwiseOperator)}var pairwise_2=pairwise,PairwiseOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new PairwiseSubscriber(e))},e}(),PairwiseSubscriber=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return __extends$1l(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(Subscriber_1.Subscriber),pairwise_1={pairwise:pairwise_2};function not(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}Observable_1.Observable.prototype.pairwise=pairwise_1.pairwise;var not_2=not,not_1={not:not_2};function partition(e,t){return[filter_1.filter.call(this,e,t),filter_1.filter.call(this,not_1.not(e,t))]}var partition_2=partition,partition_1={partition:partition_2};function pluck(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return map_1.map.call(this,plucker(e,r))}Observable_1.Observable.prototype.partition=partition_1.partition;var pluck_2=pluck;function plucker(e,t){return function(r){for(var n=r,i=0;i<t;i++){var o=n[e[i]];if(void 0===o)return;n=o}return n}}var pluck_1={pluck:pluck_2};function publish(e){return e?multicast_1.multicast.call(this,function(){return new Subject_1.Subject},e):multicast_1.multicast.call(this,new Subject_1.Subject)}Observable_1.Observable.prototype.pluck=pluck_1.pluck;var publish_2=publish,publish_1={publish:publish_2};Observable_1.Observable.prototype.publish=publish_1.publish;var __extends$1m=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},BehaviorSubject=function(e){function t(t){e.call(this),this._value=t}return __extends$1m(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Subject_1.Subject),BehaviorSubject_2=BehaviorSubject,BehaviorSubject_1={BehaviorSubject:BehaviorSubject_2};function publishBehavior(e){return multicast_1.multicast.call(this,new BehaviorSubject_1.BehaviorSubject(e))}var publishBehavior_2=publishBehavior,publishBehavior_1={publishBehavior:publishBehavior_2};function publishReplay(e,t,r){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),multicast_1.multicast.call(this,new ReplaySubject_1.ReplaySubject(e,t,r))}Observable_1.Observable.prototype.publishBehavior=publishBehavior_1.publishBehavior;var publishReplay_2=publishReplay,publishReplay_1={publishReplay:publishReplay_2};function publishLast(){return multicast_1.multicast.call(this,new AsyncSubject_1.AsyncSubject)}Observable_1.Observable.prototype.publishReplay=publishReplay_1.publishReplay;var publishLast_2=publishLast,publishLast_1={publishLast:publishLast_2};Observable_1.Observable.prototype.publishLast=publishLast_1.publishLast,Observable_1.Observable.prototype.race=race_1.race,Observable_1.Observable.prototype.reduce=reduce_1.reduce;var __extends$1n=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function repeat(e){return void 0===e&&(e=-1),0===e?new EmptyObservable_1.EmptyObservable:e<0?this.lift(new RepeatOperator(-1,this)):this.lift(new RepeatOperator(e-1,this))}var repeat_2=repeat,RepeatOperator=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RepeatSubscriber(e,this.count,this.source))},e}(),RepeatSubscriber=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return __extends$1n(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(Subscriber_1.Subscriber),repeat_1={repeat:repeat_2};Observable_1.Observable.prototype.repeat=repeat_1.repeat;var __extends$1o=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function repeatWhen(e){return this.lift(new RepeatWhenOperator(e))}var repeatWhen_2=repeatWhen,RepeatWhenOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new RepeatWhenSubscriber(e,this.notifier,t))},e}(),RepeatWhenSubscriber=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n,this.sourceIsBeingSubscribedTo=!0}return __extends$1o(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries){if(this.retriesSubscription.closed)return e.prototype.complete.call(this)}else this.subscribeToRetries();this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this.notifications,r=this.retries,n=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=t,this.retries=r,this.retriesSubscription=n,this},t.prototype.subscribeToRetries=function(){this.notifications=new Subject_1.Subject;var t=tryCatch_1.tryCatch(this.notifier)(this.notifications);if(t===errorObject.errorObject)return e.prototype.complete.call(this);this.retries=t,this.retriesSubscription=subscribeToResult_1.subscribeToResult(this,t)},t}(OuterSubscriber_1.OuterSubscriber),repeatWhen_1={repeatWhen:repeatWhen_2};Observable_1.Observable.prototype.repeatWhen=repeatWhen_1.repeatWhen;var __extends$1p=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function retry(e){return void 0===e&&(e=-1),this.lift(new RetryOperator(e,this))}var retry_2=retry,RetryOperator=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RetrySubscriber(e,this.count,this.source))},e}(),RetrySubscriber=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return __extends$1p(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return e.prototype.error.call(this,t);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(Subscriber_1.Subscriber),retry_1={retry:retry_2};Observable_1.Observable.prototype.retry=retry_1.retry;var __extends$1q=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function retryWhen(e){return this.lift(new RetryWhenOperator(e,this))}var retryWhen_2=retryWhen,RetryWhenOperator=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RetryWhenSubscriber(e,this.notifier,this.source))},e}(),RetryWhenSubscriber=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n}return __extends$1q(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,i=this.retriesSubscription;if(n)this.errors=null,this.retriesSubscription=null;else{if(r=new Subject_1.Subject,(n=tryCatch_1.tryCatch(this.notifier)(r))===errorObject.errorObject)return e.prototype.error.call(this,errorObject.errorObject.e);i=subscribeToResult_1.subscribeToResult(this,n)}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=i,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.errors,s=this.retries,a=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=o,this.retries=s,this.retriesSubscription=a,this.source.subscribe(this)},t}(OuterSubscriber_1.OuterSubscriber),retryWhen_1={retryWhen:retryWhen_2};Observable_1.Observable.prototype.retryWhen=retryWhen_1.retryWhen;var __extends$1r=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function sample(e){return this.lift(new SampleOperator(e))}var sample_2=sample,SampleOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new SampleSubscriber(e),n=t.subscribe(r);return n.add(subscribeToResult_1.subscribeToResult(r,this.notifier)),n},e}(),SampleSubscriber=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return __extends$1r(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(OuterSubscriber_1.OuterSubscriber),sample_1={sample:sample_2};Observable_1.Observable.prototype.sample=sample_1.sample;var __extends$1s=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function sampleTime(e,t){return void 0===t&&(t=async.async),this.lift(new SampleTimeOperator(e,t))}var sampleTime_2=sampleTime,SampleTimeOperator=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new SampleTimeSubscriber(e,this.period,this.scheduler))},e}(),SampleTimeSubscriber=function(e){function t(t,r,n){e.call(this,t),this.period=r,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(dispatchNotification,r,{subscriber:this,period:r}))}return __extends$1s(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(Subscriber_1.Subscriber);function dispatchNotification(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}var sampleTime_1={sampleTime:sampleTime_2};Observable_1.Observable.prototype.sampleTime=sampleTime_1.sampleTime;var __extends$1t=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function scan(e,t){var r=!1;return arguments.length>=2&&(r=!0),this.lift(new ScanOperator(e,t,r))}var scan_2=scan,ScanOperator=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new ScanSubscriber(e,this.accumulator,this.seed,this.hasSeed))},e}(),ScanSubscriber=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this._seed=n,this.hasSeed=i,this.index=0}return __extends$1t(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(Subscriber_1.Subscriber),scan_1={scan:scan_2};Observable_1.Observable.prototype.scan=scan_1.scan;var __extends$1u=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function sequenceEqual(e,t){return this.lift(new SequenceEqualOperator(e,t))}var sequenceEqual_2=sequenceEqual,SequenceEqualOperator=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new SequenceEqualSubscriber(e,this.compareTo,this.comparor))},e}(),SequenceEqualOperator_1=SequenceEqualOperator,SequenceEqualSubscriber=function(e){function t(t,r,n){e.call(this,t),this.compareTo=r,this.comparor=n,this._a=[],this._b=[],this._oneComplete=!1,this.add(r.subscribe(new SequenceEqualCompareToSubscriber(t,this)))}return __extends$1u(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this._a,t=this._b,r=this.comparor;e.length>0&&t.length>0;){var n=e.shift(),i=t.shift(),o=!1;r?(o=tryCatch_1.tryCatch(r)(n,i))===errorObject.errorObject&&this.destination.error(errorObject.errorObject.e):o=n===i,o||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(Subscriber_1.Subscriber),SequenceEqualSubscriber_1=SequenceEqualSubscriber,SequenceEqualCompareToSubscriber=function(e){function t(t,r){e.call(this,t),this.parent=r}return __extends$1u(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(Subscriber_1.Subscriber),sequenceEqual_1={sequenceEqual:sequenceEqual_2,SequenceEqualOperator:SequenceEqualOperator_1,SequenceEqualSubscriber:SequenceEqualSubscriber_1};function shareSubjectFactory(){return new Subject_1.Subject}function share(){return multicast_1.multicast.call(this,shareSubjectFactory).refCount()}Observable_1.Observable.prototype.sequenceEqual=sequenceEqual_1.sequenceEqual;var share_2=share,share_1={share:share_2};function shareReplay(e,t,r){var n;return multicast_1.multicast.call(this,function(){return this._isComplete?n:n=new ReplaySubject_1.ReplaySubject(e,t,r)}).refCount()}Observable_1.Observable.prototype.share=share_1.share;var shareReplay_2=shareReplay,shareReplay_1={shareReplay:shareReplay_2};Observable_1.Observable.prototype.shareReplay=shareReplay_1.shareReplay;var __extends$1v=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function single(e){return this.lift(new SingleOperator(e,this))}var single_2=single,SingleOperator=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new SingleSubscriber(e,this.predicate,this.source))},e}(),SingleSubscriber=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.seenValue=!1,this.index=0}return __extends$1v(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new EmptyError_1.EmptyError)},t}(Subscriber_1.Subscriber),single_1={single:single_2};Observable_1.Observable.prototype.single=single_1.single;var __extends$1w=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skip(e){return this.lift(new SkipOperator(e))}var skip_2=skip,SkipOperator=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new SkipSubscriber(e,this.total))},e}(),SkipSubscriber=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return __extends$1w(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(Subscriber_1.Subscriber),skip_1={skip:skip_2};Observable_1.Observable.prototype.skip=skip_1.skip;var __extends$1x=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skipLast(e){return this.lift(new SkipLastOperator(e))}var skipLast_2=skipLast,SkipLastOperator=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new Subscriber_1.Subscriber(e)):t.subscribe(new SkipLastSubscriber(e,this._skipCount))},e}(),SkipLastSubscriber=function(e){function t(t,r){e.call(this,t),this._skipCount=r,this._count=0,this._ring=new Array(r)}return __extends$1x(t,e),t.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,i=this._ring,o=i[n];i[n]=e,this.destination.next(o)}},t}(Subscriber_1.Subscriber),skipLast_1={skipLast:skipLast_2};Observable_1.Observable.prototype.skipLast=skipLast_1.skipLast;var __extends$1y=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skipUntil(e){return this.lift(new SkipUntilOperator(e))}var skipUntil_2=skipUntil,SkipUntilOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new SkipUntilSubscriber(e,this.notifier))},e}(),SkipUntilSubscriber=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$1y(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(OuterSubscriber_1.OuterSubscriber),skipUntil_1={skipUntil:skipUntil_2};Observable_1.Observable.prototype.skipUntil=skipUntil_1.skipUntil;var __extends$1z=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function skipWhile(e){return this.lift(new SkipWhileOperator(e))}var skipWhile_2=skipWhile,SkipWhileOperator=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new SkipWhileSubscriber(e,this.predicate))},e}(),SkipWhileSubscriber=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return __extends$1z(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(Subscriber_1.Subscriber),skipWhile_1={skipWhile:skipWhile_2};function startWith(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];isScheduler_1.isScheduler(r)?e.pop():r=null;var n=e.length;return 1===n?concat_1.concatStatic(new ScalarObservable_1.ScalarObservable(e[0],r),this):n>1?concat_1.concatStatic(new ArrayObservable_1.ArrayObservable(e,r),this):concat_1.concatStatic(new EmptyObservable_1.EmptyObservable(r),this)}Observable_1.Observable.prototype.skipWhile=skipWhile_1.skipWhile;var startWith_2=startWith,startWith_1={startWith:startWith_2};Observable_1.Observable.prototype.startWith=startWith_1.startWith;var ImmediateDefinition=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=function e(){var t=e.handler,r=e.args;"function"==typeof t?t.apply(void 0,r):new Function(""+t)()};return n.handler=e,n.args=t,n},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,r)),r};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",r=function r(n){var i=r.instance;n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i.runIfPresent(+n.data.slice(t.length))};r.instance=this,e.addEventListener("message",r,!1);var n=function e(){var t=e,r=t.messagePrefix,n=t.instance,i=n.addFromSetImmediateArguments(arguments);return n.root.postMessage(r+i,"*"),i};return n.instance=this,n.messagePrefix=t,n},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var r=t.data;e.runIfPresent(r)};var r=function e(){var t=e,r=t.channel,n=t.instance,i=n.addFromSetImmediateArguments(arguments);return r.port2.postMessage(i),i};return r.channel=t,r.instance=this,r},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,r=t.root,n=r.document,i=n.documentElement,o=t.addFromSetImmediateArguments(arguments),s=n.createElement("script");return s.onreadystatechange=function(){t.runIfPresent(o),s.onreadystatechange=null,i.removeChild(s),s=null},i.appendChild(s),o};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,r),0),r};return e.instance=this,e},e}(),ImmediateDefinition_1=ImmediateDefinition,Immediate_1=new ImmediateDefinition(root.root),Immediate={ImmediateDefinition:ImmediateDefinition_1,Immediate:Immediate_1},__extends$1A=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsapAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return __extends$1A(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=Immediate.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(Immediate.Immediate.clearImmediate(r),t.scheduled=void 0)},t}(AsyncAction_1.AsyncAction),AsapAction_2=AsapAction,AsapAction_1={AsapAction:AsapAction_2},__extends$1B=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AsapScheduler=function(e){function t(){e.apply(this,arguments)}return __extends$1B(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler_1.AsyncScheduler),AsapScheduler_2=AsapScheduler,AsapScheduler_1={AsapScheduler:AsapScheduler_2},asap_1=new AsapScheduler_1.AsapScheduler(AsapAction_1.AsapAction),asap={asap:asap_1},__extends$1C=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},SubscribeOnObservable=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n=asap.asap),e.call(this),this.source=t,this.delayTime=r,this.scheduler=n,(!isNumeric_1.isNumeric(r)||r<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=asap.asap)}return __extends$1C(t,e),t.create=function(e,r,n){return void 0===r&&(r=0),void 0===n&&(n=asap.asap),new t(e,r,n)},t.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},t.prototype._subscribe=function(e){var r=this.delayTime,n=this.source;return this.scheduler.schedule(t.dispatch,r,{source:n,subscriber:e})},t}(Observable_1.Observable),SubscribeOnObservable_2=SubscribeOnObservable,SubscribeOnObservable_1={SubscribeOnObservable:SubscribeOnObservable_2};function subscribeOn(e,t){return void 0===t&&(t=0),this.lift(new SubscribeOnOperator(e,t))}var subscribeOn_2=subscribeOn,SubscribeOnOperator=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new SubscribeOnObservable_1.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}(),subscribeOn_1={subscribeOn:subscribeOn_2};Observable_1.Observable.prototype.subscribeOn=subscribeOn_1.subscribeOn;var __extends$1D=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function _switch(){return this.lift(new SwitchOperator)}var _switch_2=_switch,SwitchOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new SwitchSubscriber(e))},e}(),SwitchSubscriber=function(e){function t(t){e.call(this,t),this.active=0,this.hasCompleted=!1}return __extends$1D(t,e),t.prototype._next=function(e){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,e))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},t.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var e=this.innerSubscription;e&&(e.unsubscribe(),this.remove(e))},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber),_switch_1={_switch:_switch_2};Observable_1.Observable.prototype.switch=_switch_1._switch,Observable_1.Observable.prototype._switch=_switch_1._switch;var __extends$1E=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function switchMap(e,t){return this.lift(new SwitchMapOperator(e,t))}var switchMap_2=switchMap,SwitchMapOperator=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new SwitchMapSubscriber(e,this.project,this.resultSelector))},e}(),SwitchMapSubscriber=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.index=0}return __extends$1E(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._tryNotifyNext(e,t,r,n):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t}(OuterSubscriber_1.OuterSubscriber),switchMap_1={switchMap:switchMap_2};Observable_1.Observable.prototype.switchMap=switchMap_1.switchMap;var __extends$1F=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function switchMapTo(e,t){return this.lift(new SwitchMapToOperator(e,t))}var switchMapTo_2=switchMapTo,SwitchMapToOperator=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new SwitchMapToSubscriber(e,this.observable,this.resultSelector))},e}(),SwitchMapToSubscriber=function(e){function t(t,r,n){e.call(this,t),this.inner=r,this.resultSelector=n,this.index=0}return __extends$1F(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=subscribeToResult_1.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,s=this.destination;o?this.tryResultSelector(e,t,r,n):s.next(t)},t.prototype.tryResultSelector=function(e,t,r,n){var i,o=this.resultSelector,s=this.destination;try{i=o(e,t,r,n)}catch(e){return void s.error(e)}s.next(i)},t}(OuterSubscriber_1.OuterSubscriber),switchMapTo_1={switchMapTo:switchMapTo_2};Observable_1.Observable.prototype.switchMapTo=switchMapTo_1.switchMapTo;var __extends$1G=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function take(e){return 0===e?new EmptyObservable_1.EmptyObservable:this.lift(new TakeOperator(e))}var take_2=take,TakeOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeSubscriber(e,this.total))},e}(),TakeSubscriber=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return __extends$1G(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(Subscriber_1.Subscriber),take_1={take:take_2};Observable_1.Observable.prototype.take=take_1.take;var __extends$1H=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function takeLast(e){return 0===e?new EmptyObservable_1.EmptyObservable:this.lift(new TakeLastOperator(e))}var takeLast_2=takeLast,TakeLastOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeLastSubscriber(e,this.total))},e}(),TakeLastSubscriber=function(e){function t(t,r){e.call(this,t),this.total=r,this.ring=new Array,this.count=0}return __extends$1H(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()},t}(Subscriber_1.Subscriber),takeLast_1={takeLast:takeLast_2};Observable_1.Observable.prototype.takeLast=takeLast_1.takeLast;var __extends$1I=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function takeUntil(e){return this.lift(new TakeUntilOperator(e))}var takeUntil_2=takeUntil,TakeUntilOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new TakeUntilSubscriber(e,this.notifier))},e}(),TakeUntilSubscriber=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(subscribeToResult_1.subscribeToResult(this,r))}return __extends$1I(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.complete()},t.prototype.notifyComplete=function(){},t}(OuterSubscriber_1.OuterSubscriber),takeUntil_1={takeUntil:takeUntil_2};Observable_1.Observable.prototype.takeUntil=takeUntil_1.takeUntil;var __extends$1J=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function takeWhile(e){return this.lift(new TakeWhileOperator(e))}var takeWhile_2=takeWhile,TakeWhileOperator=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new TakeWhileSubscriber(e,this.predicate))},e}(),TakeWhileSubscriber=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.index=0}return __extends$1J(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},t}(Subscriber_1.Subscriber),takeWhile_1={takeWhile:takeWhile_2};Observable_1.Observable.prototype.takeWhile=takeWhile_1.takeWhile;var throttle_1=createCommonjsModule(function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};t.defaultThrottleConfig={leading:!0,trailing:!1},t.throttle=function(e,r){return void 0===r&&(r=t.defaultThrottleConfig),this.lift(new n(e,r.leading,r.trailing))};var n=function(){function e(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.durationSelector,this.leading,this.trailing))},e}(),i=function(e){function t(t,r,n,i){e.call(this,t),this.destination=t,this.durationSelector=r,this._leading=n,this._trailing=i,this._hasTrailingValue=!1}return r(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=subscribeToResult_1.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype._unsubscribe=function(){var e=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype._sendTrailing=function(){var e=this,t=e.destination,r=e.throttled,n=e._trailing,i=e._trailingValue,o=e._hasTrailingValue;r&&n&&o&&(t.next(i),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(e,t,r,n,i){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(OuterSubscriber_1.OuterSubscriber)}),throttle_2=throttle_1.defaultThrottleConfig,throttle_3=throttle_1.throttle;Observable_1.Observable.prototype.throttle=throttle_1.throttle;var __extends$1K=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function throttleTime(e,t,r){return void 0===t&&(t=async.async),void 0===r&&(r=throttle_1.defaultThrottleConfig),this.lift(new ThrottleTimeOperator(e,t,r.leading,r.trailing))}var throttleTime_2=throttleTime,ThrottleTimeOperator=function(){function e(e,t,r,n){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new ThrottleTimeSubscriber(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),ThrottleTimeSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.duration=r,this.scheduler=n,this.leading=i,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}return __extends$1K(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext$5,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(Subscriber_1.Subscriber);function dispatchNext$5(e){e.subscriber.clearThrottle()}var throttleTime_1={throttleTime:throttleTime_2};Observable_1.Observable.prototype.throttleTime=throttleTime_1.throttleTime;var __extends$1L=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timeInterval(e){return void 0===e&&(e=async.async),this.lift(new TimeIntervalOperator(e))}var timeInterval_2=timeInterval,TimeInterval=function(e,t){this.value=e,this.interval=t},TimeInterval_1=TimeInterval,TimeIntervalOperator=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new TimeIntervalSubscriber(e,this.scheduler))},e}(),TimeIntervalSubscriber=function(e){function t(t,r){e.call(this,t),this.scheduler=r,this.lastTime=0,this.lastTime=r.now()}return __extends$1L(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),r=t-this.lastTime;this.lastTime=t,this.destination.next(new TimeInterval(e,r))},t}(Subscriber_1.Subscriber),timeInterval_1={timeInterval:timeInterval_2,TimeInterval:TimeInterval_1};Observable_1.Observable.prototype.timeInterval=timeInterval_1.timeInterval;var __extends$1M=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},TimeoutError=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return __extends$1M(t,e),t}(Error),TimeoutError_2=TimeoutError,TimeoutError_1={TimeoutError:TimeoutError_2},__extends$1N=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timeout(e,t){void 0===t&&(t=async.async);var r=isDate_1.isDate(e),n=r?+e-t.now():Math.abs(e);return this.lift(new TimeoutOperator(n,r,t,new TimeoutError_1.TimeoutError))}var timeout_2=timeout,TimeoutOperator=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=r,this.errorInstance=n}return e.prototype.call=function(e,t){return t.subscribe(new TimeoutSubscriber(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),TimeoutSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.scheduler=i,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return __extends$1N(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(Subscriber_1.Subscriber),timeout_1={timeout:timeout_2};Observable_1.Observable.prototype.timeout=timeout_1.timeout;var __extends$1O=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timeoutWith(e,t,r){void 0===r&&(r=async.async);var n=isDate_1.isDate(e),i=n?+e-r.now():Math.abs(e);return this.lift(new TimeoutWithOperator(i,n,t,r))}var timeoutWith_2=timeoutWith,TimeoutWithOperator=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new TimeoutWithSubscriber(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),TimeoutWithSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.withObservable=i,this.scheduler=o,this.action=null,this.scheduleTimeout()}return __extends$1O(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(subscribeToResult_1.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(OuterSubscriber_1.OuterSubscriber),timeoutWith_1={timeoutWith:timeoutWith_2};Observable_1.Observable.prototype.timeoutWith=timeoutWith_1.timeoutWith;var __extends$1P=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function timestamp(e){return void 0===e&&(e=async.async),this.lift(new TimestampOperator(e))}var timestamp_2=timestamp,Timestamp=function(e,t){this.value=e,this.timestamp=t},Timestamp_1=Timestamp,TimestampOperator=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new TimestampSubscriber(e,this.scheduler))},e}(),TimestampSubscriber=function(e){function t(t,r){e.call(this,t),this.scheduler=r}return __extends$1P(t,e),t.prototype._next=function(e){var t=this.scheduler.now();this.destination.next(new Timestamp(e,t))},t}(Subscriber_1.Subscriber),timestamp_1={timestamp:timestamp_2,Timestamp:Timestamp_1};Observable_1.Observable.prototype.timestamp=timestamp_1.timestamp;var __extends$1Q=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function toArray(){return this.lift(new ToArrayOperator)}var toArray_2=toArray,ToArrayOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new ToArraySubscriber(e))},e}(),ToArraySubscriber=function(e){function t(t){e.call(this,t),this.array=[]}return __extends$1Q(t,e),t.prototype._next=function(e){this.array.push(e)},t.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},t}(Subscriber_1.Subscriber),toArray_1={toArray:toArray_2};function toPromise(e){var t=this;if(e||(root.root.Rx&&root.root.Rx.config&&root.root.Rx.config.Promise?e=root.root.Rx.config.Promise:root.root.Promise&&(e=root.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})}Observable_1.Observable.prototype.toArray=toArray_1.toArray;var toPromise_2=toPromise,toPromise_1={toPromise:toPromise_2};Observable_1.Observable.prototype.toPromise=toPromise_1.toPromise;var __extends$1R=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function window$1(e){return this.lift(new WindowOperator(e))}var window_2=window$1,WindowOperator=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new WindowSubscriber(e),n=t.subscribe(r);return n.closed||r.add(subscribeToResult_1.subscribeToResult(r,this.windowBoundaries)),n},e}(),WindowSubscriber=function(e){function t(t){e.call(this,t),this.window=new Subject_1.Subject,t.next(this.window)}return __extends$1R(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new Subject_1.Subject;t.next(r)},t}(OuterSubscriber_1.OuterSubscriber),window_1={window:window_2};Observable_1.Observable.prototype.window=window_1.window;var __extends$1S=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowCount(e,t){return void 0===t&&(t=0),this.lift(new WindowCountOperator(e,t))}var windowCount_2=windowCount,WindowCountOperator=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new WindowCountSubscriber(e,this.windowSize,this.startWindowEvery))},e}(),WindowCountSubscriber=function(e){function t(t,r,n){e.call(this,t),this.destination=t,this.windowSize=r,this.startWindowEvery=n,this.windows=[new Subject_1.Subject],this.count=0,t.next(this.windows[0])}return __extends$1S(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(e);var a=this.count-n+1;if(a>=0&&a%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var c=new Subject_1.Subject;i.push(c),r.next(c)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(Subscriber_1.Subscriber),windowCount_1={windowCount:windowCount_2};Observable_1.Observable.prototype.windowCount=windowCount_1.windowCount;var __extends$1T=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowTime(e){var t=async.async,r=null,n=Number.POSITIVE_INFINITY;return isScheduler_1.isScheduler(arguments[3])&&(t=arguments[3]),isScheduler_1.isScheduler(arguments[2])?t=arguments[2]:isNumeric_1.isNumeric(arguments[2])&&(n=arguments[2]),isScheduler_1.isScheduler(arguments[1])?t=arguments[1]:isNumeric_1.isNumeric(arguments[1])&&(r=arguments[1]),this.lift(new WindowTimeOperator(e,r,n,t))}var windowTime_2=windowTime,WindowTimeOperator=function(){function e(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new WindowTimeSubscriber(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),CountedSubject=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return __extends$1T(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(Subject_1.Subject),WindowTimeSubscriber=function(e){function t(t,r,n,i,o){e.call(this,t),this.destination=t,this.windowTimeSpan=r,this.windowCreationInterval=n,this.maxWindowSize=i,this.scheduler=o,this.windows=[];var s=this.openWindow();if(null!==n&&n>=0){var a={subscriber:this,window:s,context:null},c={windowTimeSpan:r,windowCreationInterval:n,subscriber:this,scheduler:o};this.add(o.schedule(dispatchWindowClose,r,a)),this.add(o.schedule(dispatchWindowCreation,n,c))}else{var u={subscriber:this,window:s,windowTimeSpan:r};this.add(o.schedule(dispatchWindowTimeSpanOnly,r,u))}}return __extends$1T(t,e),t.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var i=t[n];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new CountedSubject;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(Subscriber_1.Subscriber);function dispatchWindowTimeSpanOnly(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function dispatchWindowCreation(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval,o=r.openWindow(),s={action:this,subscription:null},a={subscriber:r,window:o,context:s};s.subscription=n.schedule(dispatchWindowClose,t,a),this.add(s.subscription),this.schedule(e,i)}function dispatchWindowClose(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}var windowTime_1={windowTime:windowTime_2};Observable_1.Observable.prototype.windowTime=windowTime_1.windowTime;var __extends$1U=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowToggle(e,t){return this.lift(new WindowToggleOperator(e,t))}var windowToggle_2=windowToggle,WindowToggleOperator=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new WindowToggleSubscriber(e,this.openings,this.closingSelector))},e}(),WindowToggleSubscriber=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=subscribeToResult_1.subscribeToResult(this,r,r))}return __extends$1U(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},t.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var o=r[i];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var i=t[n];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,r,n,i){if(e===this.openings){var o=this.closingSelector,s=tryCatch_1.tryCatch(o)(t);if(s===errorObject.errorObject)return this.error(errorObject.errorObject.e);var a=new Subject_1.Subject,c=new Subscription_1.Subscription,u={window:a,subscription:c};this.contexts.push(u);var l=subscribeToResult_1.subscribeToResult(this,s,u);l.closed?this.closeWindow(this.contexts.length-1):(l.context=u,c.add(l)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,i=r.subscription;t.splice(e,1),n.complete(),i.unsubscribe()}},t}(OuterSubscriber_1.OuterSubscriber),windowToggle_1={windowToggle:windowToggle_2};Observable_1.Observable.prototype.windowToggle=windowToggle_1.windowToggle;var __extends$1V=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function windowWhen(e){return this.lift(new WindowOperator$1(e))}var windowWhen_2=windowWhen,WindowOperator$1=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new WindowSubscriber$1(e,this.closingSelector))},e}(),WindowSubscriber$1=function(e){function t(t,r){e.call(this,t),this.destination=t,this.closingSelector=r,this.openWindow()}return __extends$1V(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r=this.window=new Subject_1.Subject;this.destination.next(r);var n=tryCatch_1.tryCatch(this.closingSelector)();if(n===errorObject.errorObject){var i=errorObject.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=subscribeToResult_1.subscribeToResult(this,n))},t}(OuterSubscriber_1.OuterSubscriber),windowWhen_1={windowWhen:windowWhen_2};Observable_1.Observable.prototype.windowWhen=windowWhen_1.windowWhen;var __extends$1W=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function withLatestFrom(){for(var e,t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];"function"==typeof t[t.length-1]&&(e=t.pop());var n=t;return this.lift(new WithLatestFromOperator(n,e))}var withLatestFrom_2=withLatestFrom,WithLatestFromOperator=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new WithLatestFromSubscriber(e,this.observables,this.project))},e}(),WithLatestFromSubscriber=function(e){function t(t,r,n){e.call(this,t),this.observables=r,this.project=n,this.toRespond=[];var i=r.length;this.values=new Array(i);for(var o=0;o<i;o++)this.toRespond.push(o);for(o=0;o<i;o++){var s=r[o];this.add(subscribeToResult_1.subscribeToResult(this,s,s,o))}}return __extends$1W(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t;var o=this.toRespond;if(o.length>0){var s=o.indexOf(r);-1!==s&&o.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber),withLatestFrom_1={withLatestFrom:withLatestFrom_2};function zipAll(e){return this.lift(new zip.ZipOperator(e))}Observable_1.Observable.prototype.withLatestFrom=withLatestFrom_1.withLatestFrom,Observable_1.Observable.prototype.zip=zip.zipProto;var zipAll_2=zipAll,zipAll_1={zipAll:zipAll_2};Observable_1.Observable.prototype.zipAll=zipAll_1.zipAll;var SubscriptionLog=function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t},SubscriptionLog_2=SubscriptionLog,SubscriptionLog_1={SubscriptionLog:SubscriptionLog_2},SubscriptionLoggable=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new SubscriptionLog_1.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,r=t[e];t[e]=new SubscriptionLog_1.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},e}(),SubscriptionLoggable_2=SubscriptionLoggable,SubscriptionLoggable_1={SubscriptionLoggable:SubscriptionLoggable_2};function applyMixins(e,t){for(var r=0,n=t.length;r<n;r++)for(var i=t[r],o=Object.getOwnPropertyNames(i.prototype),s=0,a=o.length;s<a;s++){var c=o[s];e.prototype[c]=i.prototype[c]}}var applyMixins_2=applyMixins,applyMixins_1={applyMixins:applyMixins_2},__extends$1X=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ColdObservable=function(e){function t(t,r){e.call(this,function(e){var t=this,r=t.logSubscribedFrame();return e.add(new Subscription_1.Subscription(function(){t.logUnsubscribedFrame(r)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=r}return __extends$1X(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,r=0;r<t;r++){var n=this.messages[r];e.add(this.scheduler.schedule(function(e){var t=e.message,r=e.subscriber;t.notification.observe(r)},n.frame,{message:n,subscriber:e}))}},t}(Observable_1.Observable),ColdObservable_2=ColdObservable;applyMixins_1.applyMixins(ColdObservable,[SubscriptionLoggable_1.SubscriptionLoggable]);var ColdObservable_1={ColdObservable:ColdObservable_2},__extends$1Y=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},HotObservable=function(e){function t(t,r){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=r}return __extends$1Y(t,e),t.prototype._subscribe=function(t){var r=this,n=r.logSubscribedFrame();return t.add(new Subscription_1.Subscription(function(){r.logUnsubscribedFrame(n)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,r=0;r<t;r++)!function(){var t=e.messages[r];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)}()},t}(Subject_1.Subject),HotObservable_2=HotObservable;applyMixins_1.applyMixins(HotObservable,[SubscriptionLoggable_1.SubscriptionLoggable]);var HotObservable_1={HotObservable:HotObservable_2},__extends$1Z=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},VirtualTimeScheduler=function(e){function t(t,r){var n=this;void 0===t&&(t=VirtualAction),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t,function(){return n.frame}),this.maxFrames=r,this.frame=0,this.index=-1}return __extends$1Z(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r.shift())&&(this.frame=t.delay)<=n&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(AsyncScheduler_1.AsyncScheduler),VirtualTimeScheduler_2=VirtualTimeScheduler,VirtualAction=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1),e.call(this,t,r),this.scheduler=t,this.work=r,this.index=n,this.active=!0,this.index=t.index=n}return __extends$1Z(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(AsyncAction_1.AsyncAction),VirtualAction_1=VirtualAction,VirtualTimeScheduler_1={VirtualTimeScheduler:VirtualTimeScheduler_2,VirtualAction:VirtualAction_1},__extends$1_=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},defaultMaxFrame=750,TestScheduler=function(e){function t(t){e.call(this,VirtualTimeScheduler_1.VirtualAction,defaultMaxFrame),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return __extends$1_(t,e),t.prototype.createTime=function(e){var r=e.indexOf("|");if(-1===r)throw new Error('marble diagram for time should have a completion marker "|"');return r*t.frameTimeFactor},t.prototype.createColdObservable=function(e,r,n){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,n),o=new ColdObservable_1.ColdObservable(i,this);return this.coldObservables.push(o),o},t.prototype.createHotObservable=function(e,r,n){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,n),o=new HotObservable_1.HotObservable(i,this);return this.hotObservables.push(o),o},t.prototype.materializeInnerObservable=function(e,t){var r=this,n=[];return e.subscribe(function(e){n.push({frame:r.frame-t,notification:Notification_1.Notification.createNext(e)})},function(e){n.push({frame:r.frame-t,notification:Notification_1.Notification.createError(e)})},function(){n.push({frame:r.frame-t,notification:Notification_1.Notification.createComplete()})}),n},t.prototype.expectObservable=function(e,r){var n=this;void 0===r&&(r=null);var i,o=[],s={actual:o,ready:!1},a=t.parseMarblesAsSubscriptions(r).unsubscribedFrame;return this.schedule(function(){i=e.subscribe(function(e){var t=e;e instanceof Observable_1.Observable&&(t=n.materializeInnerObservable(t,n.frame)),o.push({frame:n.frame,notification:Notification_1.Notification.createNext(t)})},function(e){o.push({frame:n.frame,notification:Notification_1.Notification.createError(e)})},function(){o.push({frame:n.frame,notification:Notification_1.Notification.createComplete()})})},0),a!==Number.POSITIVE_INFINITY&&this.schedule(function(){return i.unsubscribe()},a),this.flushTests.push(s),{toBe:function(e,r,n){s.ready=!0,s.expected=t.parseMarbles(e,r,n,!0)}}},t.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};return this.flushTests.push(r),{toBe:function(e){var n="string"==typeof e?[e]:e;r.ready=!0,r.expected=n.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this);for(var r=this.flushTests.filter(function(e){return e.ready});r.length>0;){var n=r.shift();this.assertDeepEqual(n.actual,n.expected)}},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new SubscriptionLog_1.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,r=-1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0;o<t;o++){var s=o*this.frameTimeFactor,a=e[o];switch(a){case"-":case" ":break;case"(":r=s;break;case")":r=-1;break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=r>-1?r:s;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=r>-1?r:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return i<0?new SubscriptionLog_1.SubscriptionLog(n):new SubscriptionLog_1.SubscriptionLog(n,i)},t.parseMarbles=function(e,t,r,n){if(void 0===n&&(n=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=e.length,o=[],s=e.indexOf("^"),a=-1===s?0:s*-this.frameTimeFactor,c="object"!=typeof t?function(e){return e}:function(e){return n&&t[e]instanceof ColdObservable_1.ColdObservable?t[e].messages:t[e]},u=-1,l=0;l<i;l++){var p=l*this.frameTimeFactor+a,h=void 0,f=e[l];switch(f){case"-":case" ":break;case"(":u=p;break;case")":u=-1;break;case"|":h=Notification_1.Notification.createComplete();break;case"^":break;case"#":h=Notification_1.Notification.createError(r||"error");break;default:h=Notification_1.Notification.createNext(c(f))}h&&o.push({frame:u>-1?u:p,notification:h})}return o},t}(VirtualTimeScheduler_1.VirtualTimeScheduler),RequestAnimationFrameDefinition=function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})},RequestAnimationFrameDefinition_1=RequestAnimationFrameDefinition,AnimationFrame_1=new RequestAnimationFrameDefinition(root.root),AnimationFrame={RequestAnimationFrameDefinition:RequestAnimationFrameDefinition_1,AnimationFrame:AnimationFrame_1},__extends$1$=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AnimationFrameAction=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return __extends$1$(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=AnimationFrame.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(AnimationFrame.AnimationFrame.cancelAnimationFrame(r),t.scheduled=void 0)},t}(AsyncAction_1.AsyncAction),AnimationFrameAction_2=AnimationFrameAction,AnimationFrameAction_1={AnimationFrameAction:AnimationFrameAction_2},__extends$20=commonjsGlobal&&commonjsGlobal.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},AnimationFrameScheduler=function(e){function t(){e.apply(this,arguments)}return __extends$20(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler_1.AsyncScheduler),AnimationFrameScheduler_2=AnimationFrameScheduler,AnimationFrameScheduler_1={AnimationFrameScheduler:AnimationFrameScheduler_2},animationFrame_1=new AnimationFrameScheduler_1.AnimationFrameScheduler(AnimationFrameAction_1.AnimationFrameAction),Subject$1=Subject_1.Subject,Observable$1=Observable_1.Observable,BehaviorSubject$1=BehaviorSubject_1.BehaviorSubject,Symbol$1={rxSubscriber:rxSubscriber.rxSubscriber,observable:observable.observable,iterator:iterator.iterator},dequeue=createCommonjsModule(function(e,t){var r=e.exports=function(){this.head=new n,this.length=0};function n(e){this.data=e,this.next=this,this.prev=this}r.prototype.push=function(e){var t=new n(e);return this.head.prepend(t),this.length+=1,this},r.prototype.unshift=function(e){var t=new n(e);return this.head.append(t),this.length+=1,this},r.prototype.pop=function(){if(this.head.prev!==this.head){var e=this.head.prev.remove();return this.length-=1,e.data}},r.prototype.shift=function(){if(this.head.next!==this.head){var e=this.head.next.remove();return this.length-=1,e.data}},r.prototype.last=function(){if(this.head.prev!==this.head)return this.head.prev.data},r.prototype.first=function(){if(this.head.next!==this.head)return this.head.next.data},r.prototype.empty=function(){0!==this.length&&(this.head.next.prev=null,this.head.prev.next=null,this.head.next=this.head,this.head.prev=this.head,this.length=0)},n.prototype.append=function(e){return e.next=this.next,e.prev=this,this.next.prev=e,this.next=e,e},n.prototype.prepend=function(e){return e.prev=this.prev,e.next=this,this.prev.next=e,this.prev=e,e},n.prototype.remove=function(){return this.next.prev=this.prev,this.prev.next=this.next,this}}),lib=createCommonjsModule(function(e,t){e.exports=dequeue});class PromisePool{constructor(e){_defineProperty(this,"_fifo",void 0),_defineProperty(this,"_emitter",void 0),_defineProperty(this,"_numPromisesRunning",void 0),_defineProperty(this,"_poolSize",void 0),_defineProperty(this,"_nextRequestId",void 0),this._fifo=new lib,this._emitter=new EventEmitter,this._numPromisesRunning=0,this._poolSize=e,this._nextRequestId=1}submit(e){const t=this._getNextRequestId();this._fifo.push({id:t,executor:e});const r=new Promise((e,r)=>{this._emitter.once(t,t=>{const{isSuccess:n,value:i}=t;(n?e:r)(i)})});return this._run(),r}_run(){if(this._numPromisesRunning===this._poolSize)return;if(0===this._fifo.length)return;const{id:e,executor:t}=this._fifo.shift();this._numPromisesRunning++,new Promise(t).then(t=>{this._emitter.emit(e,{isSuccess:!0,value:t}),this._numPromisesRunning--,this._run()},t=>{this._emitter.emit(e,{isSuccess:!1,value:t}),this._numPromisesRunning--,this._run()})}_getNextRequestId(){return(this._nextRequestId++).toString(16)}}class PromiseQueue{constructor(){_defineProperty(this,"_promisePool",void 0),this._promisePool=new PromisePool(1)}submit(e){return this._promisePool.submit(e)}}for(var TOKEN="",i=0;i<4;i++)TOKEN+=(Math.pow(16,8)*Math.random()).toString(16);let platformPathPromise;const blockingQueues={},COMMON_BINARY_PATHS=["/usr/bin","/bin","/usr/sbin","/sbin","/usr/local/bin"],DARWIN_PATH_HELPER_REGEXP=/PATH="([^"]+)"/,STREAM_NAMES=["stdin","stdout","stderr"];function getPlatformPath(){return platformPathPromise&&"test"!==process.env.NODE_ENV?platformPathPromise:platformPathPromise="darwin"===process.platform?new Promise((e,t)=>{child_process.execFile("/usr/libexec/path_helper",["-s"],(r,n,i)=>{if(r)t(r);else{const t=n.toString().match(DARWIN_PATH_HELPER_REGEXP);e(t&&t.length>1?t[1]:"")}})}):Promise.resolve("")}async function createExecEnvironment(e,t){const r={...e};if(r.PATH!==process.env.PATH)return r;r.PATH=r.PATH||"";let n=null;try{n=await getPlatformPath()}catch(e){logError("Failed to getPlatformPath",e)}if(n)r.PATH=n;else if(t.length){const e=nuclideUri.splitPathList(r.PATH);t.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),r.PATH=nuclideUri.joinPathList(e)}return r}function logError(...e){console.error(...e)}function monitorStreamErrors(e,t,r,n){STREAM_NAMES.forEach(i=>{const o=e[i];null!=o&&o.on("error",e=>{logError(`stream error on stream ${i} with command:`,t,r,n,"error:",e)})})}async function safeSpawn(e,t=[],r={}){r.env=await createExecEnvironment(r.env||process.env,COMMON_BINARY_PATHS);const n=crossSpawn(e,t,r);return monitorStreamErrors(n,e,t,r),n.on("error",n=>{logError("error with command:",e,t,r,"error:",n)}),n}function asyncExecute(e,t,r={}){const n={...r},i=(r,i)=>{let o,s,a;n.pipedCommand?(monitorStreamErrors(o=crossSpawn(e,t,n),e,t,n),a="",o.on("error",n=>{r({command:[e].concat(t).join(" "),errorMessage:n.message,errorCode:n.code,stderr:a,stdout:""})}),null!=o.stderr&&o.stderr.on("data",e=>{a+=e}),monitorStreamErrors(s=crossSpawn(n.pipedCommand,n.pipedArgs,n),e,t,n),null!=s.stdin&&null!=o.stdout&&(s.stdin.on("error",()=>{o.stdout.emit("end")}),o.stdout.pipe(s.stdin))):(monitorStreamErrors(s=crossSpawn(e,t,n),e,t,n),o=s);let c="",u="",l=null;null!=n.timeout&&(l=setTimeout(()=>{s.removeAllListeners(),s.kill(),r({command:[e].concat(t).join(" "),errorMessage:`Exceeded timeout of ${n.timeout}ms`,errorCode:"ETIMEDOUT",stderr:c,stdout:u})},n.timeout)),s.on("close",e=>{r({exitCode:e,stderr:c,stdout:u}),null!=l&&clearTimeout(l)}),s.on("error",n=>{r({command:[e].concat(t).join(" "),errorMessage:n.message,errorCode:n.code,stderr:c,stdout:u}),null!=l&&clearTimeout(l)}),null!=s.stderr&&s.stderr.on("data",e=>{c+=e}),null!=s.stdout&&s.stdout.on("data",e=>{u+=e}),"string"==typeof n.stdin&&null!=o.stdin&&(o.stdin.write(n.stdin),o.stdin.end())};function o(){return void 0===n.queueName?new Promise(i):(blockingQueues[n.queueName]||(blockingQueues[n.queueName]=new PromiseQueue),blockingQueues[n.queueName].submit(i))}return createExecEnvironment(n.env||process.env,COMMON_BINARY_PATHS).then(e=>(n.env=e,o()),e=>(n.env=n.env||process.env,o()))}async function checkOutput(e,t,r={}){const n=await asyncExecute(e,t,r);if(0!==n.exitCode){const t=null!=n.exitCode?`exitCode: ${n.exitCode}`:`error: ${String(n.errorMessage)}`;throw new Error(`asyncExecute "${e}" failed with ${t}, `+`stderr: ${String(n.stderr)}, stdout: ${String(n.stdout)}.`)}return n}var underscore=createCommonjsModule(function(e,t){(function(){var r=this,n=r._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,c=o.push,u=o.slice,l=o.concat,p=s.toString,h=s.hasOwnProperty,f=o.forEach,b=o.map,d=o.reduce,m=o.reduceRight,v=o.filter,y=o.every,_=o.some,g=o.indexOf,w=o.lastIndexOf,S=Array.isArray,O=Object.keys,x=a.bind,E=function(e){return e instanceof E?e:this instanceof E?void(this._wrapped=e):new E(e)};e.exports&&(t=e.exports=E),t._=E,E.VERSION="1.6.0";var j=E.each=E.forEach=function(e,t,r){if(null==e)return e;if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e)===i)return}else{var s=E.keys(e);for(n=0,o=s.length;n<o;n++)if(t.call(r,e[s[n]],s[n],e)===i)return}return e};E.map=E.collect=function(e,t,r){var n=[];return null==e?n:b&&e.map===b?e.map(t,r):(j(e,function(e,i,o){n.push(t.call(r,e,i,o))}),n)};var T="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduce===d)return n&&(t=E.bind(t,n)),i?e.reduce(t,r):e.reduce(t);if(j(e,function(e,o,s){i?r=t.call(n,r,e,o,s):(r=e,i=!0)}),!i)throw new TypeError(T);return r},E.reduceRight=E.foldr=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return n&&(t=E.bind(t,n)),i?e.reduceRight(t,r):e.reduceRight(t);var o=e.length;if(o!==+o){var s=E.keys(e);o=s.length}if(j(e,function(a,c,u){c=s?s[--o]:--o,i?r=t.call(n,r,e[c],c,u):(r=e[c],i=!0)}),!i)throw new TypeError(T);return r},E.find=E.detect=function(e,t,r){var n;return A(e,function(e,i,o){if(t.call(r,e,i,o))return n=e,!0}),n},E.filter=E.select=function(e,t,r){var n=[];return null==e?n:v&&e.filter===v?e.filter(t,r):(j(e,function(e,i,o){t.call(r,e,i,o)&&n.push(e)}),n)},E.reject=function(e,t,r){return E.filter(e,function(e,n,i){return!t.call(r,e,n,i)},r)},E.every=E.all=function(e,t,r){t||(t=E.identity);var n=!0;return null==e?n:y&&e.every===y?e.every(t,r):(j(e,function(e,o,s){if(!(n=n&&t.call(r,e,o,s)))return i}),!!n)};var A=E.some=E.any=function(e,t,r){t||(t=E.identity);var n=!1;return null==e?n:_&&e.some===_?e.some(t,r):(j(e,function(e,o,s){if(n||(n=t.call(r,e,o,s)))return i}),!!n)};E.contains=E.include=function(e,t){return null!=e&&(g&&e.indexOf===g?-1!=e.indexOf(t):A(e,function(e){return e===t}))},E.invoke=function(e,t){var r=u.call(arguments,2),n=E.isFunction(t);return E.map(e,function(e){return(n?t:e[t]).apply(e,r)})},E.pluck=function(e,t){return E.map(e,E.property(t))},E.where=function(e,t){return E.filter(e,E.matches(t))},E.findWhere=function(e,t){return E.find(e,E.matches(t))},E.max=function(e,t,r){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-1/0,i=-1/0;return j(e,function(e,o,s){var a=t?t.call(r,e,o,s):e;a>i&&(n=e,i=a)}),n},E.min=function(e,t,r){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var n=1/0,i=1/0;return j(e,function(e,o,s){var a=t?t.call(r,e,o,s):e;a<i&&(n=e,i=a)}),n},E.shuffle=function(e){var t,r=0,n=[];return j(e,function(e){t=E.random(r++),n[r-1]=n[t],n[t]=e}),n},E.sample=function(e,t,r){return null==t||r?(e.length!==+e.length&&(e=E.values(e)),e[E.random(e.length-1)]):E.shuffle(e).slice(0,Math.max(0,t))};var R=function(e){return null==e?E.identity:E.isFunction(e)?e:E.property(e)};E.sortBy=function(e,t,r){return t=R(t),E.pluck(E.map(e,function(e,n,i){return{value:e,index:n,criteria:t.call(r,e,n,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,r,n){var i={};return r=R(r),j(t,function(o,s){var a=r.call(n,o,s,t);e(i,a,o)}),i}};E.groupBy=C(function(e,t,r){E.has(e,t)?e[t].push(r):e[t]=[r]}),E.indexBy=C(function(e,t,r){e[t]=r}),E.countBy=C(function(e,t){E.has(e,t)?e[t]++:e[t]=1}),E.sortedIndex=function(e,t,r,n){for(var i=(r=R(r)).call(n,t),o=0,s=e.length;o<s;){var a=o+s>>>1;r.call(n,e[a])<i?o=a+1:s=a}return o},E.toArray=function(e){return e?E.isArray(e)?u.call(e):e.length===+e.length?E.map(e,E.identity):E.values(e):[]},E.size=function(e){return null==e?0:e.length===+e.length?e.length:E.keys(e).length},E.first=E.head=E.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:t<0?[]:u.call(e,0,t)},E.initial=function(e,t,r){return u.call(e,0,e.length-(null==t||r?1:t))},E.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},E.rest=E.tail=E.drop=function(e,t,r){return u.call(e,null==t||r?1:t)},E.compact=function(e){return E.filter(e,E.identity)};var I=function(e,t,r){return t&&E.every(e,E.isArray)?l.apply(r,e):(j(e,function(e){E.isArray(e)||E.isArguments(e)?t?c.apply(r,e):I(e,t,r):r.push(e)}),r)};E.flatten=function(e,t){return I(e,t,[])},E.without=function(e){return E.difference(e,u.call(arguments,1))},E.partition=function(e,t){var r=[],n=[];return j(e,function(e){(t(e)?r:n).push(e)}),[r,n]},E.uniq=E.unique=function(e,t,r,n){E.isFunction(t)&&(n=r,r=t,t=!1);var i=r?E.map(e,r,n):e,o=[],s=[];return j(i,function(r,n){(t?n&&s[s.length-1]===r:E.contains(s,r))||(s.push(r),o.push(e[n]))}),o},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(e){var t=u.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.contains(t,e)})})},E.difference=function(e){var t=l.apply(o,u.call(arguments,1));return E.filter(e,function(e){return!E.contains(t,e)})},E.zip=function(){for(var e=E.max(E.pluck(arguments,"length").concat(0)),t=new Array(e),r=0;r<e;r++)t[r]=E.pluck(arguments,""+r);return t},E.object=function(e,t){if(null==e)return{};for(var r={},n=0,i=e.length;n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},E.indexOf=function(e,t,r){if(null==e)return-1;var n=0,i=e.length;if(r){if("number"!=typeof r)return e[n=E.sortedIndex(e,t)]===t?n:-1;n=r<0?Math.max(0,i+r):r}if(g&&e.indexOf===g)return e.indexOf(t,r);for(;n<i;n++)if(e[n]===t)return n;return-1},E.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(w&&e.lastIndexOf===w)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var i=n?r:e.length;i--;)if(e[i]===t)return i;return-1},E.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=0,o=new Array(n);i<n;)o[i++]=e,e+=r;return o};var $=function(){};E.bind=function(e,t){var r,n;if(x&&e.bind===x)return x.apply(e,u.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=u.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(u.call(arguments)));$.prototype=e.prototype;var i=new $;$.prototype=null;var o=e.apply(i,r.concat(u.call(arguments)));return Object(o)===o?o:i}},E.partial=function(e){var t=u.call(arguments,1);return function(){for(var r=0,n=t.slice(),i=0,o=n.length;i<o;i++)n[i]===E&&(n[i]=arguments[r++]);for(;r<arguments.length;)n.push(arguments[r++]);return e.apply(this,n)}},E.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return j(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var r={};return t||(t=E.identity),function(){var n=t.apply(this,arguments);return E.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},E.delay=function(e,t){var r=u.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(u.call(arguments,1)))},E.throttle=function(e,t,r){var n,i,o,s=null,a=0;r||(r={});var c=function(){a=!1===r.leading?0:E.now(),s=null,o=e.apply(n,i),n=i=null};return function(){var u=E.now();a||!1!==r.leading||(a=u);var l=t-(u-a);return n=this,i=arguments,l<=0?(clearTimeout(s),s=null,a=u,o=e.apply(n,i),n=i=null):s||!1===r.trailing||(s=setTimeout(c,l)),o}},E.debounce=function(e,t,r){var n,i,o,s,a,c=function(){var u=E.now()-s;u<t?n=setTimeout(c,t-u):(n=null,r||(a=e.apply(o,i),o=i=null))};return function(){o=this,i=arguments,s=E.now();var u=r&&!n;return n||(n=setTimeout(c,t)),u&&(a=e.apply(o,i),o=i=null),a}},E.once=function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},E.wrap=function(e,t){return E.partial(t,e)},E.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},E.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},E.keys=function(e){if(!E.isObject(e))return[];if(O)return O(e);var t=[];for(var r in e)E.has(e,r)&&t.push(r);return t},E.values=function(e){for(var t=E.keys(e),r=t.length,n=new Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},E.pairs=function(e){for(var t=E.keys(e),r=t.length,n=new Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},E.invert=function(e){for(var t={},r=E.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},E.functions=E.methods=function(e){var t=[];for(var r in e)E.isFunction(e[r])&&t.push(r);return t.sort()},E.extend=function(e){return j(u.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e},E.pick=function(e){var t={},r=l.apply(o,u.call(arguments,1));return j(r,function(r){r in e&&(t[r]=e[r])}),t},E.omit=function(e){var t={},r=l.apply(o,u.call(arguments,1));for(var n in e)E.contains(r,n)||(t[n]=e[n]);return t},E.defaults=function(e){return j(u.call(arguments,1),function(t){if(t)for(var r in t)void 0===e[r]&&(e[r]=t[r])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e};var N=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof E&&(e=e._wrapped),t instanceof E&&(t=t._wrapped);var i=p.call(e);if(i!=p.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=r.length;o--;)if(r[o]==e)return n[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;r.push(e),n.push(t);var c=0,u=!0;if("[object Array]"==i){if(u=(c=e.length)==t.length)for(;c--&&(u=N(e[c],t[c],r,n)););}else{for(var l in e)if(E.has(e,l)&&(c++,!(u=E.has(t,l)&&N(e[l],t[l],r,n))))break;if(u){for(l in t)if(E.has(t,l)&&!c--)break;u=!c}}return r.pop(),n.pop(),u};E.isEqual=function(e,t){return N(e,t,[],[])},E.isEmpty=function(e){if(null==e)return!0;if(E.isArray(e)||E.isString(e))return 0===e.length;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!(!e||1!==e.nodeType)},E.isArray=S||function(e){return"[object Array]"==p.call(e)},E.isObject=function(e){return e===Object(e)},j(["Arguments","Function","String","Number","Date","RegExp"],function(e){E["is"+e]=function(t){return p.call(t)=="[object "+e+"]"}}),E.isArguments(arguments)||(E.isArguments=function(e){return!(!e||!E.has(e,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(e){return"function"==typeof e}),E.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},E.isNaN=function(e){return E.isNumber(e)&&e!=+e},E.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==p.call(e)},E.isNull=function(e){return null===e},E.isUndefined=function(e){return void 0===e},E.has=function(e,t){return h.call(e,t)},E.noConflict=function(){return r._=n,this},E.identity=function(e){return e},E.constant=function(e){return function(){return e}},E.property=function(e){return function(t){return t[e]}},E.matches=function(e){return function(t){if(t===e)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0}},E.times=function(e,t,r){for(var n=Array(Math.max(0,e)),i=0;i<e;i++)n[i]=t.call(r,i);return n},E.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},E.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=E.invert(P.escape);var k={escape:new RegExp("["+E.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(P.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(e){E[e]=function(t){return null==t?"":(""+t).replace(k[e],function(t){return P[e][t]})}}),E.result=function(e,t){if(null!=e){var r=e[t];return E.isFunction(r)?r.call(e):r}},E.mixin=function(e){j(E.functions(e),function(t){var r=E[t]=e[t];E.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),D.call(this,r.apply(E,e))}})};var M=0;E.uniqueId=function(e){var t=++M+"";return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(e,t,r){var n;r=E.defaults({},r,E.templateSettings);var i=new RegExp([(r.escape||F).source,(r.interpolate||F).source,(r.evaluate||F).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,r,n,i,a){return s+=e.slice(o,a).replace(G,function(e){return"\\"+L[e]}),r&&(s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+t.length,t}),s+="';\n",r.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(r.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(t)return n(t,E);var a=function(e){return n.call(this,e,E)};return a.source="function("+(r.variable||"obj")+"){\n"+s+"}",a},E.chain=function(e){return E(e).chain()};var D=function(e){return this._chain?E(e).chain():e};E.mixin(E),j(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];E.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],D.call(this,r)}}),j(["concat","join","slice"],function(e){var t=o[e];E.prototype[e]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(commonjsGlobal)}),underscore_1=underscore._,underscorePlus=createCommonjsModule(function(e){(function(){var t,r,n,i,o,s,a,c,u=[].slice;c=underscore,n={cmd:"",ctrl:"",alt:"",option:"",shift:"",enter:"",left:"",right:"",up:"",down:""},i={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},s={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},a=function(e){var t,r,n,i,o;if(n=0,r=[],null==e)return r;for(t=i=0,o=e.length;i<o;t=++i)"."!==e[t]||0!==t&&"\\"===e[t-1]||(r.push(e.substring(n,t)),n=t+1);return r.push(e.substr(n,e.length)),r},r=function(e){return c.isObject(e)&&!c.isArray(e)},o={adviseBefore:function(e,t,r){var n;return n=e[t],e[t]=function(){var e;if(e=1<=arguments.length?u.call(arguments,0):[],!1!==r.apply(this,e))return n.apply(this,e)}},camelize:function(e){return e?e.replace(/[_-]+(\w)/g,function(e){return e[1].toUpperCase()}):""},capitalize:function(e){return e?"github"===e.toLowerCase()?"GitHub":e[0].toUpperCase()+e.slice(1):""},compactObject:function(e){var t,r,n;for(t in r={},e)null!=(n=e[t])&&(r[t]=n);return r},dasherize:function(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|(_)/g,function(e,t){return t?"-"+t.toLowerCase():"-"}):""},deepClone:function(e){return c.isArray(e)?e.map(function(e){return o.deepClone(e)}):c.isObject(e)&&!c.isFunction(e)?o.mapObject(e,function(e,t){return[e,o.deepClone(t)]}):e},deepExtend:function(e){var t,n,i,s,a,c,u;for(s=e,t=0;++t<arguments.length;)if(i=arguments[t],r(s)&&r(i))for(a=0,c=(u=Object.keys(i)).length;a<c;a++)s[n=u[a]]=o.deepExtend(s[n],i[n]);else s=o.deepClone(i);return s},deepContains:function(e,t){var r,n,i;if(null==e)return!1;for(n=0,i=e.length;n<i;n++)if(r=e[n],c.isEqual(r,t))return!0;return!1},endsWith:function(e,t){return null==t&&(t=""),!!e&&-1!==e.indexOf(t,e.length-t.length)},escapeAttribute:function(e){return e?e.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(e){return e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(e,t){var r,n,i,s;return n=(s=e.split(":"))[0],null==(r=s[1])?o.undasherize(n):(i=o.undasherize(n),null==t&&(t=o.undasherize(r)),i+": "+t)},humanizeKey:function(e,t){var r;return null==t&&(t=process.platform),e?(r="darwin"===t?n:i)[e]?r[e]:1===e.length&&null!=s[e]?[r.shift,s[e]]:1===e.length&&e===e.toUpperCase()&&e.toUpperCase()!==e.toLowerCase()?[r.shift,e.toUpperCase()]:1===e.length||/f[0-9]{1,2}/.test(e)?e.toUpperCase():"darwin"===t?e:o.capitalize(e):e},humanizeKeystroke:function(e,t){var r,n,i,s,a,u,l,p,h,f;if(null==t&&(t=process.platform),!e)return e;for(r=[],l=0,h=(a=e.split(" ")).length;l<h;l++){for(s=[],n=p=0,f=(u=(e=a[l]).split("-")).length;p<f;n=++p)""===(i=u[n])&&""===u[n-1]&&(i="-"),i&&s.push(o.humanizeKey(i,t));s=c.uniq(c.flatten(s)),s="darwin"===t?s.join(""):s.join("+"),r.push(s)}return r.join(" ")},isSubset:function(e,t){return c.every(e,function(e){return c.include(t,e)})},losslessInvert:function(e){var t,r,n;for(r in t={},e)null==t[n=e[r]]&&(t[n]=[]),t[n].push(r);return t},mapObject:function(e,t){var r,n,i,o,s,a,c;for(n={},o=0,s=(a=Object.keys(e)).length;o<s;o++)r=(c=t(r=a[o],e[r]))[0],i=c[1],n[r]=i;return n},multiplyString:function(e,t){var r,n;for(r="",n=0;n<t;)r+=e,n++;return r},pluralize:function(e,t,r){return null==e&&(e=0),null==r&&(r=t+"s"),1===e?e+" "+t:e+" "+r},remove:function(e,t){var r;return(r=e.indexOf(t))>=0&&e.splice(r,1),e},setValueForKeyPath:function(e,t,r){var n,i;for(i=a(t);i.length>1;)null==e[n=i.shift()]&&(e[n]={}),e=e[n];return null!=r?e[i.shift()]=r:delete e[i.shift()]},hasKeyPath:function(e,t){var r,n,i,o;for(i=0,o=(n=a(t)).length;i<o;i++){if(r=n[i],!e.hasOwnProperty(r))return!1;e=e[r]}return!0},spliceWithArray:function(e,t,r,n,i){var o,s,a,c;if(null==i&&(i=1e5),n.length<i)return e.splice.apply(e,[t,r].concat(u.call(n)));for(e.splice(t,r),c=[],o=s=0,a=n.length;i>0?s<=a:s>=a;o=s+=i)c.push(e.splice.apply(e,[t+o,0].concat(u.call(n.slice(o,o+i)))));return c},sum:function(e){var t,r,n;for(t=0,r=0,n=e.length;r<n;r++)t+=e[r];return t},uncamelcase:function(e){var t;return e?(t=e.replace(/([A-Z])|_+/g,function(e,t){return null==t&&(t="")," "+t}),o.capitalize(t.trim())):""},undasherize:function(e){return e?e.split("-").map(o.capitalize).join(" "):""},underscore:function(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|-+/g,function(e,t){return null==t&&(t=""),"_"+t.toLowerCase()}):""},valueForKeyPath:function(e,t){var r,n,i;for(n=0,i=(r=a(t)).length;n<i;n++)if(null==(e=e[r[n]]))return;return e},isEqual:function(e,r,n,i){return c.isArray(n)&&c.isArray(i)?t(e,r,n,i):t(e,r)},isEqualForProperties:function(){var e,t,r,n,i,o;for(e=arguments[0],t=arguments[1],i=0,o=(r=3<=arguments.length?u.call(arguments,2):[]).length;i<o;i++)if(n=r[i],!c.isEqual(e[n],t[n]))return!1;return!0}},t=function(e,r,n,i){var o,s,a,u,l,p,h,f,b,d,m,v,y,_;if(null==n&&(n=[]),null==i&&(i=[]),e===r)return c.isEqual(e,r);if(c.isFunction(e)||c.isFunction(r))return c.isEqual(e,r);for(v=n.length;v--;)if(n[v]===e)return i[v]===r;if(n.push(e),i.push(r),b=!1,c.isFunction(null!=e?e.isEqual:void 0))b=e.isEqual(r,n,i);else if(c.isFunction(null!=r?r.isEqual:void 0))b=r.isEqual(e,i,n);else if(c.isArray(e)&&c.isArray(r)&&e.length===r.length){for(b=!0,d=y=0,_=e.length;y<_;d=++y)if(a=e[d],!t(a,r[d],n,i)){b=!1;break}}else if(c.isRegExp(e)&&c.isRegExp(r))b=c.isEqual(e,r);else if(c.isElement(e)&&c.isElement(r))b=e===r;else if(c.isObject(e)&&c.isObject(r))if(o=e.constructor,p=r.constructor,s=c.isFunction(o)&&o instanceof o,h=c.isFunction(p)&&p instanceof p,o===p||s&&h){for(m in u=0,b=!0,e)if(l=e[m],c.has(e,m)&&(u++,!c.has(r,m)||!t(l,r[m],n,i))){b=!1;break}if(b){for(m in f=0,r)r[m],c.has(r,m)&&f++;b=u===f}}else b=!1;else b=c.isEqual(e,r);return n.pop(),i.pop(),b},e.exports=c.extend({},c,o)}).call(commonjsGlobal)}),async$1=createCommonjsModule(function(e){!function(){var t,r={};function n(){}function i(e){return e}function o(e){return!!e}function s(e){return!e}var a="object"==typeof self&&self.self===self&&self||"object"==typeof commonjsGlobal&&commonjsGlobal.global===commonjsGlobal&&commonjsGlobal||this;function c(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function u(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=a&&(t=a.async),r.noConflict=function(){return a.async=t,r};var l=Object.prototype.toString,p=Array.isArray||function(e){return"[object Array]"===l.call(e)};function h(e){return p(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function f(e,t){for(var r=-1,n=e.length;++r<n;)t(e[r],r,e)}function b(e,t){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function d(e){return b(Array(e),function(e,t){return t})}function m(e,t,r){return f(e,function(e,n,i){r=t(r,e,n,i)}),r}function v(e,t){f(_(e),function(r){t(e[r],r)})}function y(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}var _=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};function g(e){var t,r,n=-1;return h(e)?(t=e.length,function(){return++n<t?n:null}):(r=_(e),t=r.length,function(){return++n<t?r[n]:null})}function w(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n)}}}function S(e){return function(t,r,n){return e(t,n)}}var O="function"==typeof setImmediate&&setImmediate,x=O?function(e){O(e)}:function(e){setTimeout(e,0)};function E(e){return function(t,r,i){i=u(i||n);var o=g(t=t||[]);if(e<=0)return i(null);var s=!1,a=0,l=!1;!function n(){if(s&&a<=0)return i(null);for(;a<e&&!l;){var u=o();if(null===u)return s=!0,void(a<=0&&i(null));a+=1,r(t[u],u,c(function(e){a-=1,e?(i(e),l=!0):n()}))}}()}}function j(e){return function(t,n,i){return e(r.eachOf,t,n,i)}}function T(e){return function(t,r,n,i){return e(E(r),t,n,i)}}function A(e){return function(t,n,i){return e(r.eachOfSeries,t,n,i)}}function R(e,t,r,i){i=u(i||n);var o=h(t=t||[])?[]:{};e(t,function(e,t,n){r(e,function(e,r){o[t]=r,n(e)})},function(e){i(e,o)})}function C(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(r){r&&i.push({index:t,value:e}),n()})},function(){n(b(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function I(e,t,r,n){C(e,t,function(e,t){r(e,function(e){t(!e)})},n)}function $(e,t,r){return function(n,i,o,s){function a(){s&&s(r(!1,void 0))}function c(e,n,i){if(!s)return i();o(e,function(n){s&&t(n)&&(s(r(!0,e)),s=o=!1),i()})}arguments.length>3?e(n,i,c,a):(s=o,o=i,e(n,c,a))}}function N(e,t){return t}function P(e,t,r){r=r||n;var i=h(t)?[]:{};e(t,function(e,t,r){e(w(function(e,n){n.length<=1&&(n=n[0]),i[t]=n,r(e)}))},function(e){r(e,i)})}function k(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){n(e,i)})}function M(e,t,i){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function o(e,t,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(e.started=!0,p(t)||(t=[t]),0===t.length&&e.idle())return r.setImmediate(function(){e.drain()});f(t,function(t){var r={data:t,callback:o||n};i?e.tasks.unshift(r):e.tasks.push(r),e.tasks.length===e.concurrency&&e.saturated()}),r.setImmediate(e.process)}function s(e,t){return function(){a-=1;var r=!1,n=arguments;f(t,function(e){f(u,function(t,n){t!==e||r||(u.splice(n,1),r=!0)}),e.callback.apply(e,n)}),e.tasks.length+a===0&&e.drain(),e.process()}}var a=0,u=[],l={tasks:[],concurrency:t,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(e,t){o(l,e,!1,t)},kill:function(){l.drain=n,l.tasks=[]},unshift:function(e,t){o(l,e,!0,t)},process:function(){for(;!l.paused&&a<l.concurrency&&l.tasks.length;){var t=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),r=b(t,function(e){return e.data});0===l.tasks.length&&l.empty(),a+=1,u.push(t[0]);var n=c(s(l,t));e(r,n)}},length:function(){return l.tasks.length},running:function(){return a},workersList:function(){return u},idle:function(){return l.tasks.length+a===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var e=Math.min(l.concurrency,l.tasks.length),t=1;t<=e;t++)r.setImmediate(l.process)}}};return l}function F(e){return w(function(t,r){t.apply(null,r.concat([w(function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&f(r,function(t){console[e](t)}))})]))})}function L(e){return function(t,r,n){e(d(t),r,n)}}function G(e){return w(function(t,r){var n=w(function(r){var n=this,i=r.pop();return e(t,function(e,t,i){e.apply(n,r.concat([i]))},i)});return r.length?n.apply(this,r):n})}function D(e){return w(function(t){var n=t.pop();t.push(function(){var e=arguments;i?r.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}"object"==typeof process&&"function"==typeof process.nextTick?r.nextTick=process.nextTick:r.nextTick=x,r.setImmediate=O?x:r.nextTick,r.forEach=r.each=function(e,t,n){return r.eachOf(e,S(t),n)},r.forEachSeries=r.eachSeries=function(e,t,n){return r.eachOfSeries(e,S(t),n)},r.forEachLimit=r.eachLimit=function(e,t,r,n){return E(t)(e,S(r),n)},r.forEachOf=r.eachOf=function(e,t,r){r=u(r||n);for(var i,o=g(e=e||[]),s=0;null!=(i=o());)s+=1,t(e[i],i,c(a));function a(e){s--,e?r(e):null===i&&s<=0&&r(null)}0===s&&r(null)},r.forEachOfSeries=r.eachOfSeries=function(e,t,i){i=u(i||n);var o=g(e=e||[]),s=o();!function n(){var a=!0;if(null===s)return i(null);t(e[s],s,c(function(e){if(e)i(e);else{if(null===(s=o()))return i(null);a?r.setImmediate(n):n()}})),a=!1}()},r.forEachOfLimit=r.eachOfLimit=function(e,t,r,n){E(t)(e,r,n)},r.map=j(R),r.mapSeries=A(R),r.mapLimit=T(R),r.inject=r.foldl=r.reduce=function(e,t,n,i){r.eachOfSeries(e,function(e,r,i){n(t,e,function(e,r){t=r,i(e)})},function(e){i(e,t)})},r.foldr=r.reduceRight=function(e,t,n,o){var s=b(e,i).reverse();r.reduce(s,t,n,o)},r.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=p(e)?[]:{}),r.eachOf(e,function(e,r,i){n(t,e,r,i)},function(e){i(e,t)})},r.select=r.filter=j(C),r.selectLimit=r.filterLimit=T(C),r.selectSeries=r.filterSeries=A(C),r.reject=j(I),r.rejectLimit=T(I),r.rejectSeries=A(I),r.any=r.some=$(r.eachOf,o,i),r.someLimit=$(r.eachOfLimit,o,i),r.all=r.every=$(r.eachOf,s,s),r.everyLimit=$(r.eachOfLimit,s,s),r.detect=$(r.eachOf,i,N),r.detectSeries=$(r.eachOfSeries,i,N),r.detectLimit=$(r.eachOfLimit,i,N),r.sortBy=function(e,t,n){function i(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}r.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return n(e);n(null,b(t.sort(i),function(e){return e.value}))})},r.auto=function(e,t,i){"function"==typeof arguments[1]&&(i=t,t=null),i=u(i||n);var o=_(e),s=o.length;if(!s)return i(null);t||(t=s);var a={},c=0,l=!1,h=[];function b(e){h.unshift(e)}function d(e){var t=y(h,e);t>=0&&h.splice(t,1)}function g(){s--,f(h.slice(0),function(e){e()})}b(function(){s||i(null,a)}),f(o,function(n){if(!l){for(var o,s=p(e[n])?e[n]:[e[n]],u=w(function(e,t){if(c--,t.length<=1&&(t=t[0]),e){var o={};v(a,function(e,t){o[t]=e}),o[n]=t,l=!0,i(e,o)}else a[n]=t,r.setImmediate(g)}),h=s.slice(0,s.length-1),f=h.length;f--;){if(!(o=e[h[f]]))throw new Error("Has nonexistent dependency in "+h.join(", "));if(p(o)&&y(o,n)>=0)throw new Error("Has cyclic dependencies")}_()?(c++,s[s.length-1](u,a)):b(function e(){_()&&(c++,d(e),s[s.length-1](u,a))})}function _(){return c<t&&m(h,function(e,t){return e&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(n)}})},r.retry=function(e,t,n){var i=5,o=0,s=[],a={times:i,interval:o};function c(e,t){if("number"==typeof t)e.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||i,e.interval=parseInt(t.interval,10)||o}}var u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(e,t){function n(e,r){return function(n){e(function(e,t){n(!e||r,{err:e,result:t})},t)}}function i(e){return function(t){setTimeout(function(){t(null)},e)}}for(;a.times;){var o=!(a.times-=1);s.push(n(a.task,o)),!o&&a.interval>0&&s.push(i(a.interval))}r.series(s,function(t,r){r=r[r.length-1],(e||a.callback)(r.err,r.result)})}return u<=2&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&c(a,e),a.callback=n,a.task=t,a.callback?l():l},r.waterfall=function(e,t){if(t=u(t||n),!p(e)){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();!function e(r){return w(function(n,i){if(n)t.apply(null,[n].concat(i));else{var o=r.next();o?i.push(e(o)):i.push(t),D(r).apply(null,i)}})}(r.iterator(e))()},r.parallel=function(e,t){P(r.eachOf,e,t)},r.parallelLimit=function(e,t,r){P(E(t),e,r)},r.series=function(e,t){P(r.eachOfSeries,e,t)},r.iterator=function(e){return function t(r){function n(){return e.length&&e[r].apply(null,arguments),n.next()}return n.next=function(){return r<e.length-1?t(r+1):null},n}(0)},r.apply=w(function(e,t){return w(function(r){return e.apply(null,t.concat(r))})}),r.concat=j(k),r.concatSeries=A(k),r.whilst=function(e,t,r){if(r=r||n,e()){var i=w(function(n,o){n?r(n):e.apply(this,o)?t(i):r.apply(null,[null].concat(o))});t(i)}else r(null)},r.doWhilst=function(e,t,n){var i=0;return r.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},r.until=function(e,t,n){return r.whilst(function(){return!e.apply(this,arguments)},t,n)},r.doUntil=function(e,t,n){return r.doWhilst(e,function(){return!t.apply(this,arguments)},n)},r.during=function(e,t,r){r=r||n;var i=w(function(t,n){t?r(t):(n.push(o),e.apply(this,n))}),o=function(e,n){e?r(e):n?t(i):r(null)};e(o)},r.doDuring=function(e,t,n){var i=0;r.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)},r.queue=function(e,t){return M(function(t,r){e(t[0],r)},t,1)},r.priorityQueue=function(e,t){function i(e,t){return e.priority-t.priority}var o=r.queue(e,t);return o.push=function(e,t,s){!function(e,t,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(e.started=!0,p(t)||(t=[t]),0===t.length)return r.setImmediate(function(){e.drain()});f(t,function(t){var a={data:t,priority:o,callback:"function"==typeof s?s:n};e.tasks.splice(function(e,t,r){for(var n=-1,i=e.length-1;n<i;){var o=n+(i-n+1>>>1);r(t,e[o])>=0?n=o:i=o-1}return n}(e.tasks,a,i)+1,0,a),e.tasks.length===e.concurrency&&e.saturated(),r.setImmediate(e.process)})}(o,e,t,s)},delete o.unshift,o},r.cargo=function(e,t){return M(e,1,t)},r.log=F("log"),r.dir=F("dir"),r.memoize=function(e,t){var n={},o={},s=Object.prototype.hasOwnProperty;t=t||i;var a=w(function(i){var a=i.pop(),c=t.apply(null,i);s.call(n,c)?r.setImmediate(function(){a.apply(null,n[c])}):s.call(o,c)?o[c].push(a):(o[c]=[a],e.apply(null,i.concat([w(function(e){n[c]=e;var t=o[c];delete o[c];for(var r=0,i=t.length;r<i;r++)t[r].apply(null,e)})])))});return a.memo=n,a.unmemoized=e,a},r.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},r.times=L(r.map),r.timesSeries=L(r.mapSeries),r.timesLimit=function(e,t,n,i){return r.mapLimit(d(e),t,n,i)},r.seq=function(){var e=arguments;return w(function(t){var i=this,o=t[t.length-1];"function"==typeof o?t.pop():o=n,r.reduce(e,t,function(e,t,r){t.apply(i,e.concat([w(function(e,t){r(e,t)})]))},function(e,t){o.apply(i,[e].concat(t))})})},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))},r.applyEach=G(r.eachOf),r.applyEachSeries=G(r.eachOfSeries),r.forever=function(e,t){var r=c(t||n),i=D(e);!function e(t){if(t)return r(t);i(e)}()},r.ensureAsync=D,r.constant=w(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),r.wrapSync=r.asyncify=function(e){return w(function(t){var r,n=t.pop();try{r=e.apply(this,t)}catch(e){return n(e)}!function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}(r)||"function"!=typeof r.then?n(null,r):r.then(function(e){n(null,e)}).catch(function(e){n(e.message?e:new Error(e))})})},e.exports?e.exports=r:a.async=r}()}),_0777=parseInt("0777",8),mkdirp=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(e,t,r,n){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var i=t.mode,o=t.fs||fs$1;void 0===i&&(i=_0777&~process.umask()),n||(n=null);var s=r||function(){};e=path$1__default.resolve(e),o.mkdir(e,i,function(r){if(!r)return s(null,n=n||e);switch(r.code){case"ENOENT":mkdirP(path$1__default.dirname(e),t,function(r,n){r?s(r,n):mkdirP(e,t,s,n)});break;default:o.stat(e,function(e,t){e||!t.isDirectory()?s(r,n):s(null,n)})}})}mkdirP.sync=function e(t,r,n){r&&"object"==typeof r||(r={mode:r});var i=r.mode,o=r.fs||fs$1;void 0===i&&(i=_0777&~process.umask()),n||(n=null),t=path$1__default.resolve(t);try{o.mkdirSync(t,i),n=n||t}catch(i){switch(i.code){case"ENOENT":n=e(path$1__default.dirname(t),r,n),e(t,r,n);break;default:var s;try{s=o.statSync(t)}catch(e){throw i}if(!s.isDirectory())throw i}}return n};var isWindows$1="win32"===process.platform,DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var e;if(DEBUG){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}function maybeCallback(e){return"function"==typeof e?e:rethrow()}var normalize$1=path$1__default.normalize;if(isWindows$1)var nextPartRe=/(.*?)(?:[\/\\]+|$)/g;else nextPartRe=/(.*?)(?:[\/]+|$)/g;if(isWindows$1)var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else splitRootRe=/^[\/]*/;var realpathSync=function(e,t){if(e=path$1__default.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,n,i,o,s=e,a={},c={};function u(){var t=splitRootRe.exec(e);r=t[0].length,n=t[0],i=t[0],o="",isWindows$1&&!c[i]&&(fs$1.lstatSync(i),c[i]=!0)}for(u();r<e.length;){nextPartRe.lastIndex=r;var l=nextPartRe.exec(e);if(o=n,n+=l[0],i=o+l[1],r=nextPartRe.lastIndex,!(c[i]||t&&t[i]===i)){var p;if(t&&Object.prototype.hasOwnProperty.call(t,i))p=t[i];else{var h=fs$1.lstatSync(i);if(!h.isSymbolicLink()){c[i]=!0,t&&(t[i]=i);continue}var f=null;if(!isWindows$1){var b=h.dev.toString(32)+":"+h.ino.toString(32);a.hasOwnProperty(b)&&(f=a[b])}null===f&&(fs$1.statSync(i),f=fs$1.readlinkSync(i)),p=path$1__default.resolve(o,f),t&&(t[i]=p),isWindows$1||(a[b]=f)}e=path$1__default.resolve(p,e.slice(r)),u()}}return t&&(t[s]=e),e},realpath=function(e,t,r){if("function"!=typeof r&&(r=maybeCallback(t),t=null),e=path$1__default.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var n,i,o,s,a=e,c={},u={};function l(){var t=splitRootRe.exec(e);n=t[0].length,i=t[0],o=t[0],s="",isWindows$1&&!u[o]?fs$1.lstat(o,function(e){if(e)return r(e);u[o]=!0,p()}):process.nextTick(p)}function p(){if(n>=e.length)return t&&(t[a]=e),r(null,e);nextPartRe.lastIndex=n;var c=nextPartRe.exec(e);return s=i,i+=c[0],o=s+c[1],n=nextPartRe.lastIndex,u[o]||t&&t[o]===o?process.nextTick(p):t&&Object.prototype.hasOwnProperty.call(t,o)?b(t[o]):fs$1.lstat(o,h)}function h(e,n){if(e)return r(e);if(!n.isSymbolicLink())return u[o]=!0,t&&(t[o]=o),process.nextTick(p);if(!isWindows$1){var i=n.dev.toString(32)+":"+n.ino.toString(32);if(c.hasOwnProperty(i))return f(null,c[i],o)}fs$1.stat(o,function(e){if(e)return r(e);fs$1.readlink(o,function(e,t){isWindows$1||(c[i]=t),f(e,t)})})}function f(e,n,i){if(e)return r(e);var o=path$1__default.resolve(s,n);t&&(t[i]=o),b(o)}function b(t){e=path$1__default.resolve(t,e.slice(n)),l()}l()},old={realpathSync:realpathSync,realpath:realpath},fs_realpath=realpath$1;realpath$1.realpath=realpath$1,realpath$1.sync=realpathSync$1,realpath$1.realpathSync=realpathSync$1,realpath$1.monkeypatch=monkeypatch,realpath$1.unmonkeypatch=unmonkeypatch;var origRealpath=fs$1.realpath,origRealpathSync=fs$1.realpathSync,version=process.version,ok=/^v[0-5]\./.test(version);function newError(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function realpath$1(e,t,r){if(ok)return origRealpath(e,t,r);"function"==typeof t&&(r=t,t=null),origRealpath(e,t,function(n,i){newError(n)?old.realpath(e,t,r):r(n,i)})}function realpathSync$1(e,t){if(ok)return origRealpathSync(e,t);try{return origRealpathSync(e,t)}catch(r){if(newError(r))return old.realpathSync(e,t);throw r}}function monkeypatch(){fs$1.realpath=realpath$1,fs$1.realpathSync=realpathSync$1}function unmonkeypatch(){fs$1.realpath=origRealpath,fs$1.realpathSync=origRealpathSync}var concatMap$1=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);isArray$1(i)?r.push.apply(r,i):r.push(i)}return r},isArray$1=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},balancedMatch=balanced;function balanced(e,t,r){e instanceof RegExp&&(e=maybeMatch(e,r)),t instanceof RegExp&&(t=maybeMatch(t,r));var n=range$1(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function maybeMatch(e,t){var r=t.match(e);return r?r[0]:null}function range$1(e,t,r){var n,i,o,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(n=[],o=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(e,l+1)):1==n.length?a=[n.pop(),u]:((i=n.pop())<o&&(o=i,s=u),u=r.indexOf(t,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}balanced.range=range$1;var braceExpansion=expandTop,escSlash="\0SLASH"+Math.random()+"\0",escOpen="\0OPEN"+Math.random()+"\0",escClose="\0CLOSE"+Math.random()+"\0",escComma="\0COMMA"+Math.random()+"\0",escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(e){return e.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[],r=balancedMatch("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=parseCommaParts(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),t.push.apply(t,s),t}function expandTop(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),expand$1(escapeBraces(e),!0).map(unescapeBraces)):[]}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand$1(e,t){var r=[],n=balancedMatch("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),a=o||s,c=n.body.indexOf(",")>=0;if(!a&&!c)return n.post.match(/,.*\}/)?expand$1(e=n.pre+"{"+n.body+escClose+n.post):[e];if(a)i=n.body.split(/\.\./);else if(1===(i=parseCommaParts(n.body)).length&&1===(i=expand$1(i[0],!1).map(embrace)).length)return(p=n.post.length?expand$1(n.post,!1):[""]).map(function(e){return n.pre+i[0]+e});var u,l=n.pre,p=n.post.length?expand$1(n.post,!1):[""];if(a){var h=numeric(i[0]),f=numeric(i[1]),b=Math.max(i[0].length,i[1].length),d=3==i.length?Math.abs(numeric(i[2])):1,m=lte;f<h&&(d*=-1,m=gte);var v=i.some(isPadded);u=[];for(var y=h;m(y,f);y+=d){var _;if(s)"\\"===(_=String.fromCharCode(y))&&(_="");else if(_=String(y),v){var g=b-_.length;if(g>0){var w=new Array(g+1).join("0");_=y<0?"-"+w+_.slice(1):w+_}}u.push(_)}}else u=concatMap$1(i,function(e){return expand$1(e,!1)});for(var S=0;S<u.length;S++)for(var O=0;O<p.length;O++){var x=l+u[S]+p[O];(!t||a||x)&&r.push(x)}return r}var minimatch_1=minimatch;minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=path$1__default}catch(e){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}var slashSplit=/\/+/;function filter$1(e,t){return t=t||{},function(r,n,i){return minimatch(r,e,t)}}function ext(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function minimatch(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new Minimatch(t,r).match(e))}function Minimatch(e,t){if(!(this instanceof Minimatch))return new Minimatch(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==path.sep&&(e=e.split(path.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function make(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(e){return e.split(slashSplit)}),this.debug(this.pattern,r),r=r.map(function(e,t,r){return e.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0}}function parseNegate(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var n=0,i=e.length;n<i&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}}function braceExpand(e,t){if(t||(t=this instanceof Minimatch?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:braceExpansion(e)}minimatch.filter=filter$1,minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch,r=function(r,n,i){return t.minimatch(r,n,ext(e,i))};return r.Minimatch=function(r,n){return new t.Minimatch(r,ext(e,n))},r},Minimatch.defaults=function(e){return e&&Object.keys(e).length?minimatch.defaults(e).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=make,Minimatch.prototype.parseNegate=parseNegate,minimatch.braceExpand=function(e,t){return braceExpand(e,t)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=parse$2;var SUBPARSE={};function parse$2(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return GLOBSTAR;if(""===e)return"";var n,i="",o=!!r.nocase,s=!1,a=[],c=[],u=!1,l=-1,p=-1,h="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function b(){if(n){switch(n){case"*":i+=star,o=!0;break;case"?":i+=qmark,o=!0;break;default:i+="\\"+n}f.debug("clearStateChar %j %j",n,i),n=!1}}for(var d,m=0,v=e.length;m<v&&(d=e.charAt(m));m++)if(this.debug("%s\t%s %s %j",e,m,i,d),s&&reSpecials[d])i+="\\"+d,s=!1;else switch(d){case"/":return!1;case"\\":b(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,m,i,d),u){this.debug("  in class"),"!"===d&&m===p+1&&(d="^"),i+=d;continue}f.debug("call clearStateChar %j",n),b(),n=d,r.noext&&b();continue;case"(":if(u){i+="(";continue}if(!n){i+="\\(";continue}a.push({type:n,start:m-1,reStart:i.length,open:plTypes[n].open,close:plTypes[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(u||!a.length){i+="\\)";continue}b(),o=!0;var y=a.pop();i+=y.close,"!"===y.type&&c.push(y),y.reEnd=i.length;continue;case"|":if(u||!a.length||s){i+="\\|",s=!1;continue}b(),i+="|";continue;case"[":if(b(),u){i+="\\"+d;continue}u=!0,p=m,l=i.length,i+=d;continue;case"]":if(m===p+1||!u){i+="\\"+d,s=!1;continue}if(u){var _=e.substring(p+1,m);try{RegExp("["+_+"]")}catch(e){var g=this.parse(_,SUBPARSE);i=i.substr(0,l)+"\\["+g[0]+"\\]",o=o||g[1],u=!1;continue}}o=!0,u=!1,i+=d;continue;default:b(),s?s=!1:!reSpecials[d]||"^"===d&&u||(i+="\\"),i+=d}for(u&&(_=e.substr(p+1),g=this.parse(_,SUBPARSE),i=i.substr(0,l)+"\\["+g[0],o=o||g[1]),y=a.pop();y;y=a.pop()){var w=i.slice(y.reStart+y.open.length);this.debug("setting tail",i,y),w=w.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,r){return r||(r="\\"),t+t+r+"|"}),this.debug("tail=%j\n   %s",w,w,y,i);var S="*"===y.type?star:"?"===y.type?qmark:"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+S+"\\("+w}b(),s&&(i+="\\\\");var O=!1;switch(i.charAt(0)){case".":case"[":case"(":O=!0}for(var x=c.length-1;x>-1;x--){var E=c[x],j=i.slice(0,E.reStart),T=i.slice(E.reStart,E.reEnd-8),A=i.slice(E.reEnd-8,E.reEnd),R=i.slice(E.reEnd);A+=R;var C=j.split("(").length-1,I=R;for(m=0;m<C;m++)I=I.replace(/\)[+*?]?/,"");var $="";""===(R=I)&&t!==SUBPARSE&&($="$"),i=j+T+R+$+A}if(""!==i&&o&&(i="(?=.)"+i),O&&(i=h+i),t===SUBPARSE)return[i,o];if(!o)return globUnescape(e);var N=r.nocase?"i":"";try{var P=new RegExp("^"+i+"$",N)}catch(e){return new RegExp("$.")}return P._glob=e,P._src=i,P}function makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?star:t.dot?twoStarDot:twoStarNoDot,n=t.nocase?"i":"",i=e.map(function(e){return e.map(function(e){return e===GLOBSTAR?r:"string"==typeof e?regExpEscape(e):e._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp}function match(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==path.sep&&(e=e.split(path.sep).join("/")),e=e.split(slashSplit),this.debug(this.pattern,"split",e);var n,i,o=this.set;for(this.debug(this.pattern,"set",o),i=e.length-1;i>=0&&!(n=e[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=e;if(r.matchBase&&1===s.length&&(a=[n]),this.matchOne(a,s,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()},Minimatch.prototype.makeRe=makeRe,minimatch.match=function(e,t,r){var n=new Minimatch(t,r=r||{});return e=e.filter(function(e){return n.match(e)}),n.options.nonull&&!e.length&&e.push(t),e},Minimatch.prototype.match=match,Minimatch.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,o=0,s=e.length,a=t.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,u=t[o],l=e[i];if(this.debug(t,u,l),!1===u)return!1;if(u===GLOBSTAR){this.debug("GLOBSTAR",[t,u,l]);var p=i,h=o+1;if(h===a){for(this.debug("** at the end");i<s;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;p<s;){var f=e[p];if(this.debug("\nglobstar while",e,p,t,h,f),this.matchOne(e.slice(p),t.slice(h),r))return this.debug("globstar found match!",p,s,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,p,t,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!r||(this.debug("\n>>> no match, partial?",e,p,t,h),p!==s))}if("string"==typeof u?(c=n.nocase?l.toLowerCase()===u.toLowerCase():l===u,this.debug("string match",u,l,c)):(c=l.match(u),this.debug("pattern match",u,l,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return r;if(o===a)return i===s-1&&""===e[i];throw new Error("wtf?")};var inherits_browser=createCommonjsModule(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits=createCommonjsModule(function(e){try{var t=util;if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=inherits_browser}});function posix(e){return"/"===e.charAt(0)}function win32(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}var pathIsAbsolute="win32"===process.platform?win32:posix,posix_1=posix,win32_1=win32;pathIsAbsolute.posix=posix_1,pathIsAbsolute.win32=win32_1;var alphasort_1=alphasort,alphasorti_1=alphasorti,setopts_1=setopts,ownProp_1=ownProp,makeAbs_1=makeAbs,finish_1=finish,mark_1=mark,isIgnored_1=isIgnored,childrenIgnored_1=childrenIgnored;function ownProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Minimatch$1=minimatch_1.Minimatch;function alphasorti(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function alphasort(e,t){return e.localeCompare(t)}function setupIgnores(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(ignoreMap))}function ignoreMap(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new Minimatch$1(r,{dot:!0})}return{matcher:new Minimatch$1(e,{dot:!0}),gmatcher:t}}function setopts(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),setupIgnores(e,r),e.changedCwd=!1;var n=process.cwd();ownProp(r,"cwd")?(e.cwd=path$1__default.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||path$1__default.resolve(e.cwd,"/"),e.root=path$1__default.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=pathIsAbsolute(e.cwd)?e.cwd:makeAbs(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new Minimatch$1(t,r),e.options=e.minimatch.options}function finish(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach(function(e){r[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(e.nocase?alphasorti:alphasort)),e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[makeAbs(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r}))}e.ignore.length&&(r=r.filter(function(t){return!isIgnored(e,t)})),e.found=r}function mark(e,t){var r=makeAbs(e,t),n=e.cache[r],i=t;if(n){var o="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=makeAbs(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i}function makeAbs(e,t){var r=t;return r="/"===t.charAt(0)?path$1__default.join(e.root,t):pathIsAbsolute(t)||""===t?t:e.changedCwd?path$1__default.resolve(e.cwd,t):path$1__default.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function isIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}function childrenIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})}var common={alphasort:alphasort_1,alphasorti:alphasorti_1,setopts:setopts_1,ownProp:ownProp_1,makeAbs:makeAbs_1,finish:finish_1,mark:mark_1,isIgnored:isIgnored_1,childrenIgnored:childrenIgnored_1},sync$4=globSync;globSync.GlobSync=GlobSync;var setopts$1=common.setopts,ownProp$1=common.ownProp,childrenIgnored$1=common.childrenIgnored,isIgnored$1=common.isIgnored;function globSync(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(e,t).found}function GlobSync(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(e,t);if(setopts$1(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}GlobSync.prototype._finish=function(){if(invariant(this instanceof GlobSync),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),n[fs_realpath.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(i)]=!0}})}common.finish(this)},GlobSync.prototype._process=function(e,t,r){invariant(this instanceof GlobSync);for(var n,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,i).join("/")}var o,s=e.slice(i);null===n?o=".":pathIsAbsolute(n)||pathIsAbsolute(e.join("/"))?(n&&pathIsAbsolute(n)||(n="/"+n),o=n):o=n;var a=this._makeAbs(o);childrenIgnored$1(this,o)||(s[0]===minimatch_1.GLOBSTAR?this._processGlobStar(n,o,a,s,t,r):this._processReaddir(n,o,a,s,t,r))},GlobSync.prototype._processReaddir=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){for(var a=n[0],c=!!this.minimatch.negate,u=a._glob,l=this.dot||"."===u.charAt(0),p=[],h=0;h<s.length;h++){if("."!==(d=s[h]).charAt(0)||l)(c&&!e?!d.match(a):d.match(a))&&p.push(d)}var f=p.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(h=0;h<f;h++){var b;d=p[h];b=e?[e,d]:[d],this._process(b.concat(n),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<f;h++){var d=p[h];e&&(d="/"!==e.slice(-1)?e+"/"+d:e+d),"/"!==d.charAt(0)||this.nomount||(d=path$1__default.join(this.root,d)),this._emitMatch(i,d)}}}},GlobSync.prototype._emitMatch=function(e,t){if(!isIgnored$1(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},GlobSync.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=fs$1.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},GlobSync.prototype._readdir=function(e,t){if(t&&!ownProp$1(this.symlinks,e))return this._readdirInGlobStar(e);if(ownProp$1(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,fs$1.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},GlobSync.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},GlobSync.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},GlobSync.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[r]||!o)for(var p=0;p<l;p++){if("."!==s[p].charAt(0)||this.dot){var h=c.concat(s[p],a);this._process(h,i,!0);var f=c.concat(s[p],n);this._process(f,i,!0)}}}},GlobSync.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&pathIsAbsolute(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=path$1__default.join(this.root,e):(e=path$1__default.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},GlobSync.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&ownProp$1(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var i=this.statCache[t];if(!i){var o;try{o=fs$1.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{i=fs$1.statSync(t)}catch(e){i=o}else i=o}this.statCache[t]=i;n=!0;return i&&(n=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},GlobSync.prototype._mark=function(e){return common.mark(this,e)},GlobSync.prototype._makeAbs=function(e){return common.makeAbs(this,e)};var wrappy_1=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r;function r(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}}var once_1=wrappy_1(once),strict=wrappy_1(onceStrict);function once(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function onceStrict(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}),once_1.strict=strict;var reqs=Object.create(null),inflight_1=wrappy_1(inflight);function inflight(e,t){return reqs[e]?(reqs[e].push(t),null):(reqs[e]=[t],makeres(e))}function makeres(e){return once_1(function t(){var r=reqs[e],n=r.length,i=slice(arguments);try{for(var o=0;o<n;o++)r[o].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete reqs[e]}})}function slice(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}var glob_1=glob,EE=EventEmitter.EventEmitter,setopts$2=common.setopts,ownProp$2=common.ownProp,childrenIgnored$2=common.childrenIgnored,isIgnored$2=common.isIgnored;function glob(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return sync$4(e,t)}return new Glob(e,t,r)}glob.sync=sync$4;var GlobSync$1=glob.GlobSync=sync$4.GlobSync;function extend(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Glob(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new GlobSync$1(e,t)}if(!(this instanceof Glob))return new Glob(e,t,r);setopts$2(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=once_1(r),this.on("error",r),this.on("end",function(e){r(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}o=!1}function readdirCb(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}glob.glob=glob,glob.hasMagic=function(e,t){var r=extend({},t);r.noprocess=!0;var n=new Glob(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},glob.Glob=Glob,inherits(Glob,EE),Glob.prototype._finish=function(){if(invariant(this instanceof Glob),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this),this.emit("end",this.found)}},Glob.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},Glob.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,o=n.length;if(0===o)return t();var s=this.matches[e]=Object.create(null);n.forEach(function(r,n){r=i._makeAbs(r),fs_realpath.realpath(r,i.realpathCache,function(n,a){n?"stat"===n.syscall?s[r]=!0:i.emit("error",n):s[a]=!0,0==--o&&(i.matches[e]=s,t())})})},Glob.prototype._mark=function(e){return common.mark(this,e)},Glob.prototype._makeAbs=function(e){return common.makeAbs(this,e)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},Glob.prototype._process=function(e,t,r,n){if(invariant(this instanceof Glob),invariant("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var i,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:i=null;break;default:i=e.slice(0,o).join("/")}var s,a=e.slice(o);null===i?s=".":pathIsAbsolute(i)||pathIsAbsolute(e.join("/"))?(i&&pathIsAbsolute(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(childrenIgnored$2(this,s))return n();a[0]===minimatch_1.GLOBSTAR?this._processGlobStar(i,s,c,a,t,r,n):this._processReaddir(i,s,c,a,t,r,n)}},Glob.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,u){return a._processReaddir2(e,t,r,n,i,o,u,s)})},Glob.prototype._processReaddir2=function(e,t,r,n,i,o,s,a){if(!s)return a();for(var c=n[0],u=!!this.minimatch.negate,l=c._glob,p=this.dot||"."===l.charAt(0),h=[],f=0;f<s.length;f++){if("."!==(d=s[f]).charAt(0)||p)(u&&!e?!d.match(c):d.match(c))&&h.push(d)}var b=h.length;if(0===b)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<b;f++){var d=h[f];e&&(d="/"!==e?e+"/"+d:e+d),"/"!==d.charAt(0)||this.nomount||(d=path$1__default.join(this.root,d)),this._emitMatch(i,d)}return a()}n.shift();for(f=0;f<b;f++){d=h[f];e&&(d="/"!==e?e+"/"+d:e+d),this._process([d].concat(n),i,o,a)}a()},Glob.prototype._emitMatch=function(e,t){if(!this.aborted&&!isIgnored$2(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=pathIsAbsolute(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},Glob.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=inflight_1("lstat\0"+e,function(n,i){if(n&&"ENOENT"===n.code)return t();var o=i&&i.isSymbolicLink();r.symlinks[e]=o,o||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())});n&&fs$1.lstat(e,n)}},Glob.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=inflight_1("readdir\0"+e+"\0"+t,r))){if(t&&!ownProp$2(this.symlinks,e))return this._readdirInGlobStar(e,r);if(ownProp$2(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}fs$1.readdir(e,readdirCb(this,e,r))}},Glob.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},Glob.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},Glob.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,u){a._processGlobStar2(e,t,r,n,i,o,u,s)})},Glob.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,a);var p=this.symlinks[r],h=s.length;if(p&&o)return a();for(var f=0;f<h;f++){if("."!==s[f].charAt(0)||this.dot){var b=u.concat(s[f],c);this._process(b,i,!0,a);var d=u.concat(s[f],n);this._process(d,i,!0,a)}}a()},Glob.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,o){n._processSimple2(e,t,i,o,r)})},Glob.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&pathIsAbsolute(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=path$1__default.join(this.root,e):(e=path$1__default.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},Glob.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&ownProp$2(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return t(null,i);if(n&&"FILE"===i)return t()}var o=this.statCache[r];if(void 0!==o){if(!1===o)return t(null,o);var s=o.isDirectory()?"DIR":"FILE";return n&&"FILE"===s?t():t(null,s,o)}var a=this,c=inflight_1("stat\0"+r,function(n,i){if(i&&i.isSymbolicLink())return fs$1.stat(r,function(n,o){n?a._stat2(e,r,null,i,t):a._stat2(e,r,n,o,t)});a._stat2(e,r,n,i,t)});c&&fs$1.lstat(r,c)},Glob.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,n)};var rimraf_1=rimraf;rimraf.sync=rimrafSync;var _0666=parseInt("666",8),defaultGlobOpts={nosort:!0,silent:!0},timeout$1=0,isWindows$2="win32"===process.platform;function defaults(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(function(t){e[t]=e[t]||fs$1[t],e[t+="Sync"]=e[t]||fs$1[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),e.disableGlob=e.disableGlob||!1,e.glob=e.glob||defaultGlobOpts}function rimraf(e,t,r){"function"==typeof t&&(r=t,t={}),invariant(e,"rimraf: missing path"),invariant.equal(typeof e,"string","rimraf: path should be a string"),invariant.equal(typeof r,"function","rimraf: callback function required"),invariant(t,"rimraf: invalid options argument provided"),invariant.equal(typeof t,"object","rimraf: options should be object"),defaults(t);var n=0,i=null,o=0;if(t.disableGlob||!glob_1.hasMagic(e))return s(null,[e]);function s(e,s){return e?r(e):0===(o=s.length)?r():void s.forEach(function(e){rimraf_(e,t,function s(a){if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&n<t.maxBusyTries)return n++,setTimeout(function(){rimraf_(e,t,s)},100*n);if("EMFILE"===a.code&&timeout$1<t.emfileWait)return setTimeout(function(){rimraf_(e,t,s)},timeout$1++);"ENOENT"===a.code&&(a=null)}timeout$1=0,function(e){i=i||e,0==--o&&r(i)}(a)})})}t.lstat(e,function(r,n){if(!r)return s(null,[e]);glob_1(e,t.glob,s)})}function rimraf_(e,t,r){invariant(e),invariant(t),invariant("function"==typeof r),t.lstat(e,function(n,i){return n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&isWindows$2&&fixWinEPERM(e,t,n,r),i&&i.isDirectory()?rmdir(e,t,n,r):void t.unlink(e,function(n){if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return isWindows$2?fixWinEPERM(e,t,n,r):rmdir(e,t,n,r);if("EISDIR"===n.code)return rmdir(e,t,n,r)}return r(n)}))})}function fixWinEPERM(e,t,r,n){invariant(e),invariant(t),invariant("function"==typeof n),r&&invariant(r instanceof Error),t.chmod(e,_0666,function(i){i?n("ENOENT"===i.code?null:r):t.stat(e,function(i,o){i?n("ENOENT"===i.code?null:r):o.isDirectory()?rmdir(e,t,r,n):t.unlink(e,n)})})}function fixWinEPERMSync(e,t,r){invariant(e),invariant(t),r&&invariant(r instanceof Error);try{t.chmodSync(e,_0666)}catch(e){if("ENOENT"===e.code)return;throw r}try{var n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?rmdirSync(e,t,r):t.unlinkSync(e)}function rmdir(e,t,r,n){invariant(e),invariant(t),r&&invariant(r instanceof Error),invariant("function"==typeof n),t.rmdir(e,function(i){!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?n(r):n(i):rmkids(e,t,n)})}function rmkids(e,t,r){invariant(e),invariant(t),invariant("function"==typeof r),t.readdir(e,function(n,i){if(n)return r(n);var o,s=i.length;if(0===s)return t.rmdir(e,r);i.forEach(function(n){rimraf(path$1__default.join(e,n),t,function(n){if(!o)return n?r(o=n):void(0==--s&&t.rmdir(e,r))})})})}function rimrafSync(e,t){var r;if(defaults(t=t||{}),invariant(e,"rimraf: missing path"),invariant.equal(typeof e,"string","rimraf: path should be a string"),invariant(t,"rimraf: missing options"),invariant.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!glob_1.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=glob_1.sync(e,t.glob)}if(r.length)for(var n=0;n<r.length;n++){e=r[n];try{var i=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&isWindows$2&&fixWinEPERMSync(e,t,r)}try{i&&i.isDirectory()?rmdirSync(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return isWindows$2?fixWinEPERMSync(e,t,r):rmdirSync(e,t,r);if("EISDIR"!==r.code)throw r;rmdirSync(e,t,r)}}}function rmdirSync(e,t,r){invariant(e),invariant(t),r&&invariant(r instanceof Error);try{t.rmdirSync(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||rmkidsSync(e,t)}}function rmkidsSync(e,t){invariant(e),invariant(t),t.readdirSync(e).forEach(function(r){rimrafSync(path$1__default.join(e,r),t)});for(var r=isWindows$2?100:1,n=0;;){var i=!0;try{var o=t.rmdirSync(e,t);return i=!1,o}finally{if(++n<r&&i)continue}}}var fsPlus=createCommonjsModule(function(e){(function(){var t,r,n,i,o,s,a,c,u,l,p,h,f,b,d,m,v,y,_,g=[].slice;c=fs$1,o=module$1,m=path$1__default,_=underscorePlus,s=async$1,d=mkdirp,v=rimraf_1,u={__esModule:!1,getHomeDirectory:function(){return"win32"!==process.platform||process.env.HOME?process.env.HOME:process.env.USERPROFILE},absolute:function(e){if(null==e)return null;e=u.resolveHome(e);try{return c.realpathSync(e)}catch(t){return e}},normalize:function(e){return null==e?null:u.resolveHome(m.normalize(e.toString()))},resolveHome:function(e){return"~"===e?u.getHomeDirectory():0===e.indexOf("~"+m.sep)?""+u.getHomeDirectory()+e.substring(1):e},tildify:function(e){var t,r;return"win32"===process.platform?e:(r=u.normalize(e),null==(t=u.getHomeDirectory())?e:r===t?"~":r.startsWith(m.join(t,m.sep))?m.join("~",m.sep,r.substring(t.length+1)):e)},getAppDataDirectory:function(){switch(process.platform){case"darwin":return u.absolute(m.join("~","Library","Application Support"));case"linux":return"/var/lib";case"win32":return process.env.APPDATA;default:return null}},isAbsolute:function(e){return null==e&&(e=""),"win32"!==process.platform?"/"===e[0]:":"===e[1]||"\\"===e[0]&&"\\"===e[1]},existsSync:function(e){return f(e)&&!1!==y(e)},isDirectorySync:function(e){var t;return!!f(e)&&(!!(t=y(e))&&t.isDirectory())},isDirectory:function(e,t){return f(e)?c.stat(e,function(e,r){return t(null==e&&r.isDirectory())}):t(!1)},isFileSync:function(e){var t;return!!f(e)&&(!!(t=y(e))&&t.isFile())},isSymbolicLinkSync:function(e){var t;return!!f(e)&&(!!(t=b(e))&&t.isSymbolicLink())},isSymbolicLink:function(e,t){return f(e)?c.lstat(e,function(e,r){return"function"==typeof t?t(null!=r&&r.isSymbolicLink()):void 0}):process.nextTick(function(){return"function"==typeof t?t(!1):void 0})},isExecutableSync:function(e){var t;return!!f(e)&&(!!(t=y(e))&&0!=(1&t.mode))},getSizeSync:function(e){var t;return f(e)&&null!=(t=y(e).size)?t:-1},listSync:function(e,t){var r;return u.isDirectorySync(e)?(r=c.readdirSync(e),t&&(r=u.filterExtensions(r,t)),r=(r=r.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map(function(t){return m.join(e,t)})):[]},list:function(){var e,t,r,n;return n=arguments[0],(r=2<=arguments.length?g.call(arguments,1):[]).length>1&&(t=r.shift()),e=r.shift(),c.readdir(n,function(r,i){return null!=r?e(r):(t&&(i=u.filterExtensions(i,t)),i=(i=i.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map(function(e){return m.join(n,e)}),e(null,i))})},filterExtensions:function(e,t){return t=t.map(function(e){return""===e?e:"."+e.replace(/^\./,"")}),e.filter(function(e){return _.include(t,m.extname(e))})},listTreeSync:function(e){var t,r;return r=[],t=function(e){return r.push(e),!0},u.traverseTreeSync(e,t,t),r},move:function(e,t,r){return p(e,t,function(n,i){var o,s;if(!n)return i?(s=m.dirname(t),c.exists(s,function(n){if(!n)return u.makeTree(s,function(n){if(!n)return c.rename(e,t,r);r(n)});c.rename(e,t,r)})):((o=new Error("'"+t+"' already exists.")).code="EEXIST",void r(o));r(n)})},moveSync:function(e,t){var r,n;if(!h(e,t))throw(r=new Error("'"+t+"' already exists.")).code="EEXIST",r;return n=m.dirname(t),c.existsSync(n)||u.makeTreeSync(n),c.renameSync(e,t)},removeSync:function(e){return v.sync(e)},remove:function(e,t){return v(e,t)},writeFileSync:function(e,t,r){return d.sync(m.dirname(e)),c.writeFileSync(e,t,r)},writeFile:function(e,t,r,n){return n=_.last(arguments),d(m.dirname(e),function(i){return null!=i?"function"==typeof n?n(i):void 0:c.writeFile(e,t,r,n)})},copy:function(e,t,r){return d(m.dirname(t),function(n){var i,o;if(null==n)return(o=c.createReadStream(e)).on("error",function(e){return"function"==typeof r&&r(e),r=null}),(i=c.createWriteStream(t)).on("error",function(e){return"function"==typeof r&&r(e),r=null}),i.on("close",function(){return"function"==typeof r&&r(),r=null}),o.pipe(i);"function"==typeof r&&r(n)})},copySync:function(e,t){var r,n,i,o,s,a,l;for(o=c.readdirSync(e),d.sync(t),l=[],s=0,a=o.length;s<a;s++)n=o[s],i=m.join(e,n),r=m.join(t,n),u.isDirectorySync(i)?l.push(u.copySync(i,r)):l.push(u.copyFileSync(i,r));return l},copyFileSync:function(e,t,r){var n,i,o,s,a,u;null==r&&(r=16384),d.sync(m.dirname(t)),s=null,a=null;try{for(s=c.openSync(e,"r"),a=c.openSync(t,"w"),i=1,o=0,u=[];i>0;)n=new Buffer(r),i=c.readSync(s,n,0,n.length,o),c.writeSync(a,n,0,i,o),u.push(o+=i);return u}finally{null!=s&&c.closeSync(s),null!=a&&c.closeSync(a)}},makeTreeSync:function(e){if(!u.isDirectorySync(e))return d.sync(e)},makeTree:function(e,t){return u.isDirectory(e,function(r){return r?"function"==typeof t?t():void 0:d(e,function(e){return"function"==typeof t?t(e):void 0})})},traverseTreeSync:function(e,t,r){var n;if(null==r&&(r=t),u.isDirectorySync(e))return(n=function(e,t,r){var i,o,s,a,u,l,p;for(u=0,l=(p=c.readdirSync(e)).length;u<l;u++)o=p[u],i=m.join(e,o),(a=c.lstatSync(i)).isSymbolicLink()&&(s=y(i))&&(a=s),a.isDirectory()?r(i)&&n(i,t,r):a.isFile()&&t(i)})(e,t,r)},traverseTree:function(e,t,r,n){return c.readdir(e,function(i,o){var a,u,l,p,h;if(i)return"function"==typeof n?n():void 0;for((u=s.queue(function(e,n){return c.stat(e,function(i,o){return i?n(i):o.isFile()?(t(e),n()):o.isDirectory()&&r(e)?c.readdir(e,function(t,r){var i,o,s;if(t)return n(t);for(o=0,s=r.length;o<s;o++)i=r[o],u.unshift(m.join(e,i));return n()}):n()})})).concurrency=1,u.drain=n,h=[],l=0,p=o.length;l<p;l++)a=o[l],h.push(u.push(m.join(e,a)));return h})},md5ForPath:function(e){var t;return t=c.readFileSync(e),crypto.createHash("md5").update(t).digest("hex")},resolve:function(){var e,t,r,n,i,o,s,a,c,l;if(e=1<=arguments.length?g.call(arguments,0):[],_.isArray(_.last(e))&&(r=e.pop()),o=null!=(l=e.pop())?l.toString():void 0,i=e,o){if(u.isAbsolute(o)){if(r&&(s=u.resolveExtension(o,r)))return s;if(u.existsSync(o))return o}for(a=0,c=i.length;a<c;a++)if(n=i[a],t=m.join(n,o),r){if(s=u.resolveExtension(t,r))return s}else if(u.existsSync(t))return u.absolute(t)}},resolveOnLoadPath:function(){var t,r,n;return t=1<=arguments.length?g.call(arguments,0):[],n=null,n=null!=e.paths?e.paths:process.resourcesPath?[m.join(process.resourcesPath,"app","node_modules")]:[],r=o.globalPaths.concat(n),u.resolve.apply(u,g.call(r).concat(g.call(t)))},resolveExtension:function(e,t){var r,n,i,o;for(i=0,o=t.length;i<o;i++)if(""===(r=t[i])){if(u.existsSync(e))return u.absolute(e)}else if(n=e+"."+r.replace(/^\./,""),u.existsSync(n))return u.absolute(n)},isCompressedExtension:function(e){return null!=e&&r.hasOwnProperty(e.toLowerCase())},isImageExtension:function(e){return null!=e&&n.hasOwnProperty(e.toLowerCase())},isPdfExtension:function(e){return".pdf"===(null!=e?e.toLowerCase():void 0)},isBinaryExtension:function(e){return null!=e&&t.hasOwnProperty(e.toLowerCase())},isReadmePath:function(e){var t;return t=m.extname(e),"readme"===m.basename(e,t).toLowerCase()&&(""===t||u.isMarkdownExtension(t))},isMarkdownExtension:function(e){return null!=e&&i.hasOwnProperty(e.toLowerCase())},isCaseInsensitive:function(){var e,t;return null==u.caseInsensitiveFs&&(e=y(process.execPath.toLowerCase()),t=y(process.execPath.toUpperCase()),u.caseInsensitiveFs=!(!e||!t)&&(e.dev===t.dev&&e.ino===t.ino)),u.caseInsensitiveFs},isCaseSensitive:function(){return!u.isCaseInsensitive()},statSyncNoException:function(){var e;return e=1<=arguments.length?g.call(arguments,0):[],y.apply(null,e)},lstatSyncNoException:function(){var e;return e=1<=arguments.length?g.call(arguments,0):[],b.apply(null,e)}},l=null,a=function(){return null===l&&(l=process.versions.electron&&parseInt(process.versions.electron.split(".")[0])<=2),l},y=function(){var e;if(e=1<=arguments.length?g.call(arguments,0):[],c.statSyncNoException&&a())return c.statSyncNoException.apply(c,e);try{return c.statSync.apply(c,e)}catch(e){return!1}},b=function(){var e;if(e=1<=arguments.length?g.call(arguments,0):[],c.lstatSyncNoException&&a())return c.lstatSyncNoException.apply(c,e);try{return c.lstatSync.apply(c,e)}catch(e){return!1}},t={".ds_store":!0,".a":!0,".exe":!0,".o":!0,".pyc":!0,".pyo":!0,".so":!0,".woff":!0},r={".bz2":!0,".egg":!0,".epub":!0,".gem":!0,".gz":!0,".jar":!0,".lz":!0,".lzma":!0,".lzo":!0,".rar":!0,".tar":!0,".tgz":!0,".war":!0,".whl":!0,".xpi":!0,".xz":!0,".z":!0,".zip":!0},n={".gif":!0,".ico":!0,".jpeg":!0,".jpg":!0,".png":!0,".tif":!0,".tiff":!0,".webp":!0},i={".markdown":!0,".md":!0,".mdown":!0,".mkd":!0,".mkdown":!0,".rmd":!0,".ron":!0},f=function(e){return null!=e&&"string"==typeof e&&e.length>0},p=function(e,t,r){return c.stat(e,function(n,i){if(!n)return c.stat(t,function(n,o){if(!n||"ENOENT"!==n.code)return r(void 0,e.toLowerCase()===t.toLowerCase()&&i.dev===o.dev&&i.ino===o.ino);r(void 0,!0)});r(n)})},h=function(e,t){var r,n;return n=y(e),r=y(t),!n||!r||e.toLowerCase()===t.toLowerCase()&&n.dev===r.dev&&n.ino===r.ino},e.exports=new Proxy({},{get:function(e,t){var r;return null!=(r=u[t])?r:c[t]},set:function(e,t,r){return u[t]=r}})}).call(commonjsGlobal)}),fs=unwrapExports(fsPlus),temp=createCommonjsModule(function(e,t){var r=rimraf_1.sync,n=constants.O_CREAT|constants.O_TRUNC|constants.O_RDWR|constants.O_EXCL,i=function(e,r){var n=o(e,r),i=new Date,s=[n.prefix,i.getFullYear(),i.getMonth(),i.getDate(),"-",process.pid,"-",(4294967296*Math.random()+1).toString(36),n.suffix].join("");return path$1__default.join(n.dir||t.dir,s)},o=function(e,t){var r={prefix:null,suffix:null};if(e)switch(typeof e){case"string":r.prefix=e;break;case"object":r=e;break;default:throw new Error("Unknown affix declaration: "+r)}else r.prefix=t;return r},s=!1,a=!1,c=[],u=[];function l(e){if(!s)return!1;h(),c.push(e)}function p(e){if(!s)return!1;h(),u.push(e)}function h(){if(!s)return!1;a||(process.addListener("exit",f),a=!0)}function f(){return!!s&&{files:function(){if(!s)return!1;for(var e,t=0;void 0!==(e=c.shift());)r(e),t++;return t}(),dirs:function(){if(!s)return!1;for(var e,t=0;void 0!==(e=u.shift());)r(e),t++;return t}()}}t.dir=path$1__default.resolve(os.tmpdir()),t.track=function(t){return s=!1!==t,e.exports},t.mkdir=function(e,t){var r=i(e,"d-");fs$1.mkdir(r,parseInt("0700",8),function(e){e||p(r),t&&t(e,r)})},t.mkdirSync=function(e){var t=i(e,"d-");return fs$1.mkdirSync(t,parseInt("0700",8)),p(t),t},t.open=function(e,t){var r=i(e,"f-");fs$1.open(r,n,parseInt("0600",8),function(e,n){e||l(r),t&&t(e,{path:r,fd:n})})},t.openSync=function(e){var t=i(e,"f-"),r=fs$1.openSync(t,n,parseInt("0600",8));return l(t),{path:t,fd:r}},t.path=i,t.cleanup=function(e){s?function(e){if(s){var t=0,r=c.length;if(r)for(var n,i=function(n){if(r){if(n)return e&&e(n),void(r=0);t++,!--r&&e&&e(null,t)}};void 0!==(n=c.shift());)rimraf_1(n,i);else e&&e(null,t)}else e&&e(new Error("not tracking"))}(function(t,r){t?e&&e(t,{files:r}):function(e){if(s){var t=u.length;if(t)for(var r,n=function(r){if(t){if(r)return e&&e(r,0),void(t=0);!--t&&e&&e(null,0)}};void 0!==(r=u.shift());)rimraf_1(r,n);else e&&e(null,0)}else e&&e(new Error("not tracking"))}(function(t,n){e&&e(t,{files:r,dirs:n})})}):e&&e(new Error("not tracking"))},t.cleanupSync=f,t.createWriteStream=function(e){var t=i(e,"s-"),r=fs$1.createWriteStream(t,{flags:n,mode:parseInt("0600",8)});return l(t),r}}),temp_1=temp.dir,temp_2=temp.track,temp_3=temp.mkdir,temp_4=temp.mkdirSync,temp_5=temp.open,temp_6=temp.openSync,temp_7=temp.path,temp_8=temp.cleanup,temp_9=temp.cleanupSync,temp_10=temp.createWriteStream;function tempdir(e=""){return new Promise((t,r)=>{temp.mkdir(e,(e,n)=>{e?r(e):t(n)})})}function tempfile(e){return new Promise((t,r)=>{temp.open(e,(e,n)=>{e?r(e):fs.close(n.fd,e=>{e?r(e):t(n.path)})})})}async function findNearestFile(e,t){let r=nuclideUri.resolve(t);for(;;){const t=nuclideUri.join(r,e);if(await exists(t))return r;if(nuclideUri.isRoot(r))return null;r=nuclideUri.dirname(r)}}async function findFurthestFile(e,t,r=!1){let n=nuclideUri.resolve(t),i=null;for(;;){const t=nuclideUri.join(n,e),o=await exists(t);if(!o&&r||nuclideUri.isRoot(n))return i;o&&(i=n),n=nuclideUri.dirname(n)}}function getCommonAncestorDirectory(e){let t=nuclideUri.dirname(e[0]);for(;e.some(e=>!e.startsWith(t));)t=nuclideUri.dirname(t);return t}function exists(e){return new Promise((t,r)=>{fs.exists(e,t)})}async function mkdirp$1(e){return!await exists(e)&&new Promise((t,r)=>{mkdirp(e,e=>{e?r(e):t(!0)})})}async function rmdir$1(e){return new Promise((t,r)=>{rimraf_1(e,e=>{e?r(e):t()})})}async function isNfs(e){if("linux"===process.platform||"darwin"===process.platform){const{stdout:t,exitCode:r}=await asyncExecute("stat",["-f","-L","-c","%T",e]);return 0===r&&"nfs"===t.trim()}return!1}function _denodeifyFsMethod(e){return function(...t){const r=fs[e];return new Promise((e,n)=>{r.apply(fs,t.concat([(t,r)=>t?n(t):e(r)]))})}}var fsPromise={tempdir:tempdir,tempfile:tempfile,findNearestFile:findNearestFile,findFurthestFile:findFurthestFile,getCommonAncestorDirectory:getCommonAncestorDirectory,exists:exists,mkdirp:mkdirp$1,rmdir:rmdir$1,isNfs:isNfs,copy:_denodeifyFsMethod("copy"),chmod:_denodeifyFsMethod("chmod"),lstat:_denodeifyFsMethod("lstat"),mkdir:_denodeifyFsMethod("mkdir"),readdir:_denodeifyFsMethod("readdir"),readFile:_denodeifyFsMethod("readFile"),readlink:_denodeifyFsMethod("readlink"),realpath:_denodeifyFsMethod("realpath"),rename:_denodeifyFsMethod("rename"),move:_denodeifyFsMethod("move"),stat:_denodeifyFsMethod("stat"),symlink:_denodeifyFsMethod("symlink"),unlink:_denodeifyFsMethod("unlink"),writeFile:_denodeifyFsMethod("writeFile")},hasOwnProperty=Object.prototype.hasOwnProperty,pseudomap=PseudoMap;function PseudoMap(e){if(!(this instanceof PseudoMap))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof PseudoMap||"function"==typeof Map&&e instanceof Map)e.forEach(function(e,t){this.set(t,e)},this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach(function(e){this.set(e[0],e[1])},this)}}function same(e,t){return e===t||e!=e&&t!=t}function Entry(e,t,r){this.key=e,this.value=t,this._index=r}function find$1(e,t){for(var r=0,n="_"+t,i=n;hasOwnProperty.call(e,i);i=n+r++)if(same(e[i].key,t))return e[i]}function set(e,t,r){for(var n=0,i="_"+t,o=i;hasOwnProperty.call(e,o);o=i+n++)if(same(e[o].key,t))return void(e[o].value=r);e.size++,e[o]=new Entry(t,r,o)}PseudoMap.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach(function(r){"size"!==r&&e.call(t,this._data[r].value,this._data[r].key)},this)},PseudoMap.prototype.has=function(e){return!!find$1(this._data,e)},PseudoMap.prototype.get=function(e){var t=find$1(this._data,e);return t&&t.value},PseudoMap.prototype.set=function(e,t){set(this._data,e,t)},PseudoMap.prototype.delete=function(e){var t=find$1(this._data,e);t&&(delete this._data[t._index],this._data.size--)},PseudoMap.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(PseudoMap.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),PseudoMap.prototype.values=PseudoMap.prototype.keys=PseudoMap.prototype.entries=function(){throw new Error("iterators are not implemented in this version")};var map$1=createCommonjsModule(function(e){"pseudomap"===process.env.npm_package_name&&"test"===process.env.npm_lifecycle_script&&(process.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||process.env.TEST_PSEUDOMAP?e.exports=pseudomap:e.exports=Map}),yallist=Yallist;function Yallist(e){var t=this;if(t instanceof Yallist||(t=new Yallist),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function push(e,t){e.tail=new Node(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function unshift(e,t){e.head=new Node(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Node(e,t,r,n){if(!(this instanceof Node))return new Node(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},Yallist.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Yallist.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Yallist.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)push(this,arguments[e]);return this.length},Yallist.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)unshift(this,arguments[e]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Yallist.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Yallist.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},Yallist.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},Yallist.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},Yallist.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},Yallist.prototype.map=function(e,t){t=t||this;for(var r=new Yallist,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},Yallist.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Yallist,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},Yallist.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},Yallist.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},Yallist.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},Yallist.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},Yallist.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new Yallist;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},Yallist.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new Yallist;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},Yallist.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};var makeSymbol,lruCache=LRUCache,symbols={},hasSymbol="function"==typeof Symbol;function priv(e,t,r){var n;return symbols[t]?n=symbols[t]:(n=makeSymbol(t),symbols[t]=n),2===arguments.length?e[n]:(e[n]=r,r)}function naiveLength(){return 1}function LRUCache(e){if(!(this instanceof LRUCache))return new LRUCache(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=priv(this,"max",e.max);(!t||"number"!=typeof t||t<=0)&&priv(this,"max",1/0);var r=e.length||naiveLength;"function"!=typeof r&&(r=naiveLength),priv(this,"lengthCalculator",r),priv(this,"allowStale",e.stale||!1),priv(this,"maxAge",e.maxAge||0),priv(this,"dispose",e.dispose),this.reset()}function forEachStep(e,t,r,n){var i=r.value;isStale(e,i)&&(del(e,r),priv(e,"allowStale")||(i=void 0)),i&&t.call(n,i.value,i.key,e)}function get(e,t,r){var n=priv(e,"cache").get(t);if(n){var i=n.value;isStale(e,i)?(del(e,n),priv(e,"allowStale")||(i=void 0)):r&&priv(e,"lruList").unshiftNode(n),i&&(i=i.value)}return i}function isStale(e,t){if(!t||!t.maxAge&&!priv(e,"maxAge"))return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:priv(e,"maxAge")&&r>priv(e,"maxAge")}function trim(e){if(priv(e,"length")>priv(e,"max"))for(var t=priv(e,"lruList").tail;priv(e,"length")>priv(e,"max")&&null!==t;){var r=t.prev;del(e,t),t=r}}function del(e,t){if(t){var r=t.value;priv(e,"dispose")&&priv(e,"dispose").call(this,r.key,r.value),priv(e,"length",priv(e,"length")-r.length),priv(e,"cache").delete(r.key),priv(e,"lruList").removeNode(t)}}function Entry$1(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}function getOutputChannel(){if(global.flowOutputChannel)return global.flowOutputChannel;const e=vscode.window.createOutputChannel("Flow");return vscode.commands.registerCommand("flow.show-output",()=>e.show()),global.flowOutputChannel=e,e}makeSymbol=hasSymbol?function(e){return Symbol.for(e)}:function(e){return"_"+e},Object.defineProperty(LRUCache.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),priv(this,"max",e),trim(this)},get:function(){return priv(this,"max")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"allowStale",{set:function(e){priv(this,"allowStale",!!e)},get:function(){return priv(this,"allowStale")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),priv(this,"maxAge",e),trim(this)},get:function(){return priv(this,"maxAge")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=naiveLength),e!==priv(this,"lengthCalculator")&&(priv(this,"lengthCalculator",e),priv(this,"length",0),priv(this,"lruList").forEach(function(e){e.length=priv(this,"lengthCalculator").call(this,e.value,e.key),priv(this,"length",priv(this,"length")+e.length)},this)),trim(this)},get:function(){return priv(this,"lengthCalculator")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"length",{get:function(){return priv(this,"length")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"itemCount",{get:function(){return priv(this,"lruList").length},enumerable:!0}),LRUCache.prototype.rforEach=function(e,t){t=t||this;for(var r=priv(this,"lruList").tail;null!==r;){var n=r.prev;forEachStep(this,e,r,t),r=n}},LRUCache.prototype.forEach=function(e,t){t=t||this;for(var r=priv(this,"lruList").head;null!==r;){var n=r.next;forEachStep(this,e,r,t),r=n}},LRUCache.prototype.keys=function(){return priv(this,"lruList").toArray().map(function(e){return e.key},this)},LRUCache.prototype.values=function(){return priv(this,"lruList").toArray().map(function(e){return e.value},this)},LRUCache.prototype.reset=function(){priv(this,"dispose")&&priv(this,"lruList")&&priv(this,"lruList").length&&priv(this,"lruList").forEach(function(e){priv(this,"dispose").call(this,e.key,e.value)},this),priv(this,"cache",new map$1),priv(this,"lruList",new yallist),priv(this,"length",0)},LRUCache.prototype.dump=function(){return priv(this,"lruList").map(function(e){if(!isStale(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}},this).toArray().filter(function(e){return e})},LRUCache.prototype.dumpLru=function(){return priv(this,"lruList")},LRUCache.prototype.inspect=function(e,t){var r="LRUCache {",n=!1;priv(this,"allowStale")&&(r+="\n  allowStale: true",n=!0);var i=priv(this,"max");i&&i!==1/0&&(n&&(r+=","),r+="\n  max: "+util.inspect(i,t),n=!0);var o=priv(this,"maxAge");o&&(n&&(r+=","),r+="\n  maxAge: "+util.inspect(o,t),n=!0);var s=priv(this,"lengthCalculator");s&&s!==naiveLength&&(n&&(r+=","),r+="\n  length: "+util.inspect(priv(this,"length"),t),n=!0);var a=!1;return priv(this,"lruList").forEach(function(e){a?r+=",\n  ":(n&&(r+=",\n"),a=!0,r+="\n  ");var i=util.inspect(e.key).split("\n").join("\n  "),c={value:e.value};e.maxAge!==o&&(c.maxAge=e.maxAge),s!==naiveLength&&(c.length=e.length),isStale(this,e)&&(c.stale=!0),c=util.inspect(c,t).split("\n").join("\n  "),r+=i+" => "+c}),(a||n)&&(r+="\n"),r+="}"},LRUCache.prototype.set=function(e,t,r){var n=(r=r||priv(this,"maxAge"))?Date.now():0,i=priv(this,"lengthCalculator").call(this,t,e);if(priv(this,"cache").has(e)){if(i>priv(this,"max"))return del(this,priv(this,"cache").get(e)),!1;var o=priv(this,"cache").get(e).value;return priv(this,"dispose")&&priv(this,"dispose").call(this,e,o.value),o.now=n,o.maxAge=r,o.value=t,priv(this,"length",priv(this,"length")+(i-o.length)),o.length=i,this.get(e),trim(this),!0}var s=new Entry$1(e,t,i,n,r);return s.length>priv(this,"max")?(priv(this,"dispose")&&priv(this,"dispose").call(this,e,t),!1):(priv(this,"length",priv(this,"length")+s.length),priv(this,"lruList").unshift(s),priv(this,"cache").set(e,priv(this,"lruList").head),trim(this),!0)},LRUCache.prototype.has=function(e){return!!priv(this,"cache").has(e)&&!isStale(this,priv(this,"cache").get(e).value)},LRUCache.prototype.get=function(e){return get(this,e,!0)},LRUCache.prototype.peek=function(e){return get(this,e,!1)},LRUCache.prototype.pop=function(){var e=priv(this,"lruList").tail;return e?(del(this,e),e.value):null},LRUCache.prototype.del=function(e){del(this,priv(this,"cache").get(e))},LRUCache.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{var o=i-t;o>0&&this.set(n.k,n.v,o)}}},LRUCache.prototype.prune=function(){var e=this;priv(this,"cache").forEach(function(t,r){get(e,r,!1)})};const LOG_LEVEL=Object.freeze({error:3,warn:2,info:1,trace:0,debug:0}),MAX_LEVEL_LENGTH=Object.keys(LOG_LEVEL).reduce((e,t)=>t.length>e?t.length:e,0);class Logger{constructor(e,t,r){_defineProperty(this,"_outputChannel",void 0),_defineProperty(this,"_level",void 0),_defineProperty(this,"_context",void 0),this._outputChannel=t,this._level=r,this._context=e}error(e,t){this._getLevelVal()<=LOG_LEVEL.error&&this._write("Error",e,t)}warn(e,t){this._getLevelVal()<=LOG_LEVEL.warn&&this._write("Warn",e,t)}info(e,t){this._getLevelVal()<=LOG_LEVEL.info&&this._write("Info",e,t)}debug(e,t){this._getLevelVal()<=LOG_LEVEL.debug&&this._write("Debug",e,t)}trace(e,t){this._getLevelVal()<=LOG_LEVEL.trace&&this._write("Trace",e,t)}_getLevelVal(){return LOG_LEVEL[this._level]}_write(e,t,r){let n=`[${[e.padEnd(MAX_LEVEL_LENGTH),(new Date).toLocaleTimeString(),this._context?this._context:null].filter(Boolean).join(" - ")}] ${t}`;r&&(n+=" ${JSON.stringify(data)"),this._outputChannel.appendLine(n)}}function getLogLevel(){return vscode.workspace.getConfiguration("flow").get("logLevel")}function getLogger(){return console.log(getLogLevel()),new Logger("",getOutputChannel(),getLogLevel())}const logger=getLogger(),flowConfigDirCache=lruCache({max:10,maxAge:3e4}),flowPathCache=lruCache({max:10,maxAge:3e4});function insertAutocompleteToken(e,t,r){const n=e.split("\n");let i=n[t];return i=i.substring(0,r)+"AUTO332"+i.substring(r),n[t]=i,n.join("\n")}function processAutocompleteItem(e,t){let r={description:t.type.length<80?t.type:t.type.substring(0,80)+" ...",displayText:t.name,replacementPrefix:e};const n=t.func_details;if(n){const e=n.params.map(e=>`${e.name}: ${e.type}`),i=getSnippetString(n.params.map(e=>e.name));r={...r,leftLabel:n.return_type,rightLabel:`(${e.join(", ")})`,snippet:`${t.name}(${i})`,type:"function"}}else r={...r,rightLabel:t.type,text:t.name};return r}function getSnippetString(e){return groupParamNames(e).map(e=>e.join(", ")).map((e,t)=>`\${${t+1}:${e}}`).join(", ")}function groupParamNames(e){const[t,r]=e.reduceRight(([e,t],r)=>(isOptional(r)&&0===e.length?t.unshift(r):e.unshift(r),[e,t]),[[],[]]),n=t.map(e=>[e]),i=n[n.length-1];return null!=i?i.push(...r):r.length>0&&n.push(r),n}function isOptional(e){return invariant(e.length>0),"?"===e[e.length-1]}function clearWorkspaceCaches(){flowPathCache.reset(),flowConfigDirCache.reset(),global.cachedPathToFlowBin=void 0}async function isFlowInstalled(){const e=await getPathToFlow();return flowPathCache.has(e)||flowPathCache.set(e,await canFindFlow(e)),flowPathCache.get(e)}async function canFindFlow(e){try{const{command:t,args:r}=buildSearchFlowCommand(e);return await checkOutput(t,r),!0}catch(e){return!1}}async function getFlowAbsolutePath(e){const{command:t,args:r}=buildSearchFlowCommand(e),n=await asyncExecute(t,r,{});if(0!==n.exitCode)return null;const i="win32"===process.platform?"flow.cmd":"flow",o=n.stdout.split(os.EOL).filter(e=>e.endsWith(i));return 0===o.length?null:o[0]}async function getPathToFlow(){if(!global.cachedPathToFlowBin){const e=global.vscode.workspace.rootPath,t=global.vscode.workspace.getConfiguration("flow"),r=t.get("useNPMPackagedFlow"),n=t.get("pathToFlow").replace("${workspaceRoot}",e),i=nodeModuleFlowLocation(e);if(r&&await canFindFlow(i))global.cachedPathToFlowBin=i;else if(await canFindFlow(n))global.cachedPathToFlowBin=await getFlowAbsolutePath(n);else if(await canFindFlow("flow"))global.cachedPathToFlowBin=await getFlowAbsolutePath("flow");else{const e=path$1__default.resolve(__dirname,"../../../../");global.cachedPathToFlowBin=nodeModuleFlowLocation(e)}logger.info("Path to Flow: "+global.cachedPathToFlowBin)}return global.cachedPathToFlowBin}function nodeModuleFlowLocation(e){return"win32"===process.platform?`${e}\\node_modules\\.bin\\flow.cmd`:`${e}/node_modules/.bin/flow`}function buildSearchFlowCommand(e){if("win32"!==process.platform)return{command:"which",args:[e]};{const t=e.lastIndexOf("\\"),r=e.substring(t+1,e.length),n=e.substring(0,t),i=n?["/r",n,r]:[r];return{command:`${process.env.SYSTEMROOT||"C:\\Windows"}\\System32\\where`,args:i}}}function getStopFlowOnExit(){return!global.vscode||global.vscode.workspace.getConfiguration("flow").get("stopFlowOnExit")}function findFlowConfigDir(e){if(!flowConfigDirCache.has(e)){const t=fsPromise.findNearestFile(".flowconfig",nuclideUri.dirname(e));flowConfigDirCache.set(e,t)}return flowConfigDirCache.get(e)}function flowCoordsToAtomCoords(e){return{start:{line:e.start.line-1,column:e.start.column-1},end:{line:e.end.line-1,column:e.end.column}}}const NODE_NOT_FOUND="[Flow] Cannot find node in PATH. The simplest way to resolve it is install node globally",FLOW_NOT_FOUND="[Flow] Cannot find flow in PATH. Try to install it by npm install flow-bin -g";function isFlowEnabled(){return vscode.workspace.getConfiguration("flow").get("enabled")}function isFlowStatusEnabled(){return vscode.workspace.getConfiguration("flow").get("showStatus")}function shouldShowUncoveredCode(){return vscode.workspace.getConfiguration("flow").get("showUncovered")}function isRunOnEditEnabled(){return vscode.workspace.getConfiguration("flow").get("runOnEdit")}function shouldRunOnAllFiles(){return vscode.workspace.getConfiguration("flow").get("runOnAllFiles")}function getFileExtensions(){return vscode.workspace.getConfiguration("flow").get("fileExtensions")}function useCodeSnippetOnFunctionSuggest(){return vscode.workspace.getConfiguration("flow").get("useCodeSnippetOnFunctionSuggest")}function getTryPath(e){return e.asAbsolutePath("./playground/try.js")}function toURI(e){return vscode.Uri.file(e)}function hasFlowPragma(e){return!!shouldRunOnAllFiles()||/^\s*(\/*\*+|\/\/)\s*@flow/m.test(e)}function checkNode(){try{const e=crossSpawn("win32"===process.platform?"where":"which",["node"]);let t="",r="";e.stdout.on("data",function(e){t+=e.toString()}),e.stderr.on("data",function(e){r+=e.toString()}),e.on("exit",function(e){0!=e&&vscode.window.showErrorMessage(NODE_NOT_FOUND)})}catch(e){vscode.window.showErrorMessage(NODE_NOT_FOUND)}}async function checkFlow(){const e=await getPathToFlow();try{const{command:t,args:r}=buildSearchFlowCommand(e),n=crossSpawn(t,r);let i="",o="";n.stdout.on("data",function(e){i+=e.toString()}),n.stderr.on("data",function(e){o+=e.toString()}),n.on("exit",function(e){0!=e&&vscode.window.showErrorMessage(FLOW_NOT_FOUND)})}catch(e){vscode.window.showErrorMessage(FLOW_NOT_FOUND)}}function format(e){try{return runPrettier(`type t = ${e}`).replace("type t = ","")}catch(t){try{return runPrettier(e)}catch(t){return e}}}function runPrettier(e){return prettier.format(e,{parser:"flow",plugins:[parserFlow],semi:!1,printWidth:60})}var scorer=createCommonjsModule(function(e,t){(function(){var e,r;e=path$1__default.sep,t.basenameScore=function(r,n,i){var o,s,a,c,u;for(s=r.length-1;r[s]===e;)s--;for(u=0,a=s,o=null;s>=0;)r[s]===e?(u++,null==o&&(o=r.substring(s+1,a+1))):0===s&&(a<r.length-1?null==o&&(o=r.substring(0,a+1)):null==o&&(o=r)),s--;return o===r?i*=2:o&&(i+=t.score(o,n)),c=u+1,i*=.01*Math.max(1,10-c)},t.score=function(t,n){var i,o,s,a,c,u,l,p,h,f,b,d;if(t===n)return 1;if(r(t,n))return 1;for(f=0,l=n.length,h=t.length,s=0,a=0;s<l;){if(i=n[s++],c=t.indexOf(i.toLowerCase()),b=t.indexOf(i.toUpperCase()),-1===(u=Math.min(c,b))&&(u=Math.max(c,b)),-1===(a=u))return 0;o=.1,t[a]===i&&(o+=.1),0===a||t[a-1]===e?o+=.8:"-"!==(d=t[a-1])&&"_"!==d&&" "!==d||(o+=.7),t=t.substring(a+1,h),f+=o}return((p=f/l)*(l/h)+p)/2},r=function(t,r){if(t[t.length-r.length-1]===e)return t.lastIndexOf(r)===t.length-r.length}}).call(commonjsGlobal)}),scorer_1=scorer.basenameScore,scorer_2=scorer.score,filter$2=createCommonjsModule(function(e){(function(){var t,r,n;r=scorer,t=function(e){return e.candidate},n=function(e,t){return t.score-e.score},e.exports=function(e,i,o,s){var a,c,u,l,p,h,f,b,d;if(c=(d=null!=s?s:{}).key,u=d.maxResults,i){for(p=[],f=0,b=e.length;f<b;f++)a=e[f],(h=null!=c?a[c]:a)&&(l=r.score(h,i,o),o||(l=r.basenameScore(h,i,l)),l>0&&p.push({candidate:a,score:l}));p.sort(n),e=p.map(t)}return null!=u&&(e=e.slice(0,u)),e}}).call(commonjsGlobal)}),matcher=createCommonjsModule(function(e,t){(function(){var e;e=path$1__default.sep,t.basenameMatch=function(r,n){var i,o,s;for(o=r.length-1;r[o]===e;)o--;for(s=o,i=null;o>=0;)r[o]===e?null==i&&(i=r.substring(o+1,s+1)):0===o&&(s<r.length-1?null==i&&(i=r.substring(0,s+1)):null==i&&(i=r)),o--;return t.match(i,n,r.length-i.length)},t.match=function(e,t,r){var n,i,o,s,a,c,u,l,p,h;if(null==r&&(r=0),e===t)return function(){h=[];for(var t=r,n=r+e.length;r<=n?t<n:t>n;r<=n?t++:t--)h.push(t);return h}.apply(this);for(u=t.length,l=e.length,i=0,o=0,a=[];i<u;){if(n=t[i++],s=e.indexOf(n.toLowerCase()),p=e.indexOf(n.toUpperCase()),-1===(c=Math.min(s,p))&&(c=Math.max(s,p)),-1===(o=c))return[];a.push(r+o),r+=o+1,e=e.substring(o+1,l)}return a}}).call(commonjsGlobal)}),matcher_1=matcher.basenameMatch,matcher_2=matcher.match,fuzzaldrin=createCommonjsModule(function(e){(function(){var t,r,n,i,o;o=scorer,n=filter$2,i=matcher,t=path$1__default.sep,r=/\ /g,e.exports={filter:function(e,i,o){var s;return i&&(s=-1!==i.indexOf(t),i=i.replace(r,"")),n(e,i,s,o)},score:function(e,n){var i,s;return e&&n?e===n?2:(i=-1!==n.indexOf(t),n=n.replace(r,""),s=o.score(e,n),i||(s=o.basenameScore(e,n,s)),s):0},match:function(e,n){var o,s,a,c,u,l;if(!e)return[];if(!n)return[];if(e===n)return function(){l=[];for(var t=0,r=e.length;0<=r?t<r:t>r;0<=r?t++:t--)l.push(t);return l}.apply(this);if(c=-1!==n.indexOf(t),n=n.replace(r,""),a=i.match(e,n),!c)for(o=i.basenameMatch(e,n),a=a.concat(o).sort(function(e,t){return e-t}),u=null,s=0;s<a.length;)s&&u===a[s]?a.splice(s,1):(u=a[s],s++);return a}}}).call(commonjsGlobal)}),fuzzaldrin_1=fuzzaldrin.filter,fuzzaldrin_2=fuzzaldrin.score,fuzzaldrin_3=fuzzaldrin.match,semver$1=createCommonjsModule(function(e,t){var r;t=e.exports=h,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=t.tokens={},c=0;function u(e){a[e]=c++}u("NUMERICIDENTIFIER"),s[a.NUMERICIDENTIFIER]="0|[1-9]\\d*",u("NUMERICIDENTIFIERLOOSE"),s[a.NUMERICIDENTIFIERLOOSE]="[0-9]+",u("NONNUMERICIDENTIFIER"),s[a.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",u("MAINVERSION"),s[a.MAINVERSION]="("+s[a.NUMERICIDENTIFIER]+")\\.("+s[a.NUMERICIDENTIFIER]+")\\.("+s[a.NUMERICIDENTIFIER]+")",u("MAINVERSIONLOOSE"),s[a.MAINVERSIONLOOSE]="("+s[a.NUMERICIDENTIFIERLOOSE]+")\\.("+s[a.NUMERICIDENTIFIERLOOSE]+")\\.("+s[a.NUMERICIDENTIFIERLOOSE]+")",u("PRERELEASEIDENTIFIER"),s[a.PRERELEASEIDENTIFIER]="(?:"+s[a.NUMERICIDENTIFIER]+"|"+s[a.NONNUMERICIDENTIFIER]+")",u("PRERELEASEIDENTIFIERLOOSE"),s[a.PRERELEASEIDENTIFIERLOOSE]="(?:"+s[a.NUMERICIDENTIFIERLOOSE]+"|"+s[a.NONNUMERICIDENTIFIER]+")",u("PRERELEASE"),s[a.PRERELEASE]="(?:-("+s[a.PRERELEASEIDENTIFIER]+"(?:\\."+s[a.PRERELEASEIDENTIFIER]+")*))",u("PRERELEASELOOSE"),s[a.PRERELEASELOOSE]="(?:-?("+s[a.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+s[a.PRERELEASEIDENTIFIERLOOSE]+")*))",u("BUILDIDENTIFIER"),s[a.BUILDIDENTIFIER]="[0-9A-Za-z-]+",u("BUILD"),s[a.BUILD]="(?:\\+("+s[a.BUILDIDENTIFIER]+"(?:\\."+s[a.BUILDIDENTIFIER]+")*))",u("FULL"),u("FULLPLAIN"),s[a.FULLPLAIN]="v?"+s[a.MAINVERSION]+s[a.PRERELEASE]+"?"+s[a.BUILD]+"?",s[a.FULL]="^"+s[a.FULLPLAIN]+"$",u("LOOSEPLAIN"),s[a.LOOSEPLAIN]="[v=\\s]*"+s[a.MAINVERSIONLOOSE]+s[a.PRERELEASELOOSE]+"?"+s[a.BUILD]+"?",u("LOOSE"),s[a.LOOSE]="^"+s[a.LOOSEPLAIN]+"$",u("GTLT"),s[a.GTLT]="((?:<|>)?=?)",u("XRANGEIDENTIFIERLOOSE"),s[a.XRANGEIDENTIFIERLOOSE]=s[a.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",u("XRANGEIDENTIFIER"),s[a.XRANGEIDENTIFIER]=s[a.NUMERICIDENTIFIER]+"|x|X|\\*",u("XRANGEPLAIN"),s[a.XRANGEPLAIN]="[v=\\s]*("+s[a.XRANGEIDENTIFIER]+")(?:\\.("+s[a.XRANGEIDENTIFIER]+")(?:\\.("+s[a.XRANGEIDENTIFIER]+")(?:"+s[a.PRERELEASE]+")?"+s[a.BUILD]+"?)?)?",u("XRANGEPLAINLOOSE"),s[a.XRANGEPLAINLOOSE]="[v=\\s]*("+s[a.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[a.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[a.XRANGEIDENTIFIERLOOSE]+")(?:"+s[a.PRERELEASELOOSE]+")?"+s[a.BUILD]+"?)?)?",u("XRANGE"),s[a.XRANGE]="^"+s[a.GTLT]+"\\s*"+s[a.XRANGEPLAIN]+"$",u("XRANGELOOSE"),s[a.XRANGELOOSE]="^"+s[a.GTLT]+"\\s*"+s[a.XRANGEPLAINLOOSE]+"$",u("COERCE"),s[a.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",u("COERCERTL"),o[a.COERCERTL]=new RegExp(s[a.COERCE],"g"),u("LONETILDE"),s[a.LONETILDE]="(?:~>?)",u("TILDETRIM"),s[a.TILDETRIM]="(\\s*)"+s[a.LONETILDE]+"\\s+",o[a.TILDETRIM]=new RegExp(s[a.TILDETRIM],"g");u("TILDE"),s[a.TILDE]="^"+s[a.LONETILDE]+s[a.XRANGEPLAIN]+"$",u("TILDELOOSE"),s[a.TILDELOOSE]="^"+s[a.LONETILDE]+s[a.XRANGEPLAINLOOSE]+"$",u("LONECARET"),s[a.LONECARET]="(?:\\^)",u("CARETTRIM"),s[a.CARETTRIM]="(\\s*)"+s[a.LONECARET]+"\\s+",o[a.CARETTRIM]=new RegExp(s[a.CARETTRIM],"g");u("CARET"),s[a.CARET]="^"+s[a.LONECARET]+s[a.XRANGEPLAIN]+"$",u("CARETLOOSE"),s[a.CARETLOOSE]="^"+s[a.LONECARET]+s[a.XRANGEPLAINLOOSE]+"$",u("COMPARATORLOOSE"),s[a.COMPARATORLOOSE]="^"+s[a.GTLT]+"\\s*("+s[a.LOOSEPLAIN]+")$|^$",u("COMPARATOR"),s[a.COMPARATOR]="^"+s[a.GTLT]+"\\s*("+s[a.FULLPLAIN]+")$|^$",u("COMPARATORTRIM"),s[a.COMPARATORTRIM]="(\\s*)"+s[a.GTLT]+"\\s*("+s[a.LOOSEPLAIN]+"|"+s[a.XRANGEPLAIN]+")",o[a.COMPARATORTRIM]=new RegExp(s[a.COMPARATORTRIM],"g");u("HYPHENRANGE"),s[a.HYPHENRANGE]="^\\s*("+s[a.XRANGEPLAIN]+")\\s+-\\s+("+s[a.XRANGEPLAIN]+")\\s*$",u("HYPHENRANGELOOSE"),s[a.HYPHENRANGELOOSE]="^\\s*("+s[a.XRANGEPLAINLOOSE]+")\\s+-\\s+("+s[a.XRANGEPLAINLOOSE]+")\\s*$",u("STAR"),s[a.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<c;l++)r(l,s[l]),o[l]||(o[l]=new RegExp(s[l]));function p(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[a.LOOSE]:o[a.FULL]).test(e))return null;try{return new h(e,t)}catch(e){return null}}function h(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof h){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof h))return new h(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=p,t.valid=function(e,t){var r=p(e,t);return r?r.version:null},t.clean=function(e,t){var r=p(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=h,h.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},h.prototype.toString=function(){return this.version},h.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof h||(e=new h(e,this.options)),this.compareMain(e)||this.comparePre(e)},h.prototype.compareMain=function(e){return e instanceof h||(e=new h(e,this.options)),b(this.major,e.major)||b(this.minor,e.minor)||b(this.patch,e.patch)},h.prototype.comparePre=function(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return b(n,i)}while(++t)},h.prototype.compareBuild=function(e){e instanceof h||(e=new h(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return b(n,i)}while(++t)},h.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new h(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(y(e,t))return null;var r=p(e),n=p(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},t.compareIdentifiers=b;var f=/^[0-9]+$/;function b(e,t){var r=f.test(e),n=f.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function d(e,t,r){return new h(e,r).compare(new h(t,r))}function m(e,t,r){return d(e,t,r)>0}function v(e,t,r){return d(e,t,r)<0}function y(e,t,r){return 0===d(e,t,r)}function _(e,t,r){return 0!==d(e,t,r)}function g(e,t,r){return d(e,t,r)>=0}function w(e,t,r){return d(e,t,r)<=0}function S(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return y(e,r,n);case"!=":return _(e,r,n);case">":return m(e,r,n);case">=":return g(e,r,n);case"<":return v(e,r,n);case"<=":return w(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function O(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof O){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof O))return new O(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===x?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return b(t,e)},t.major=function(e,t){return new h(e,t).major},t.minor=function(e,t){return new h(e,t).minor},t.patch=function(e,t){return new h(e,t).patch},t.compare=d,t.compareLoose=function(e,t){return d(e,t,!0)},t.compareBuild=function(e,t,r){var n=new h(e,r),i=new h(t,r);return n.compare(i)||n.compareBuild(i)},t.rcompare=function(e,t,r){return d(t,e,r)},t.sort=function(e,r){return e.sort(function(e,n){return t.compareBuild(e,n,r)})},t.rsort=function(e,r){return e.sort(function(e,n){return t.compareBuild(n,e,r)})},t.gt=m,t.lt=v,t.eq=y,t.neq=_,t.gte=g,t.lte=w,t.cmp=S,t.Comparator=O;var x={};function E(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof E)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new E(e.raw,t);if(e instanceof O)return new E(e.value,t);if(!(this instanceof E))return new E(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function j(e,t){for(var r=!0,n=e.slice(),i=n.pop();r&&n.length;)r=n.every(function(e){return i.intersects(e,t)}),i=n.pop();return r}function T(e){return!e||"x"===e.toLowerCase()||"*"===e}function A(e,t,r,n,i,o,s,a,c,u,l,p,h){return((t=T(r)?"":T(n)?">="+r+".0.0":T(i)?">="+r+"."+n+".0":">="+t)+" "+(a=T(c)?"":T(u)?"<"+(+c+1)+".0.0":T(l)?"<"+c+"."+(+u+1)+".0":p?"<="+c+"."+u+"."+l+"-"+p:"<="+a)).trim()}function R(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==x&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function C(e,t,r){try{t=new E(t,r)}catch(e){return!1}return t.test(e)}function I(e,t,r,n){var i,o,s,a,c;switch(e=new h(e,n),t=new E(t,n),r){case">":i=m,o=w,s=v,a=">",c=">=";break;case"<":i=v,o=g,s=m,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(C(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],p=null,f=null;if(l.forEach(function(e){e.semver===x&&(e=new O(">=0.0.0")),p=p||e,f=f||e,i(e.semver,p.semver,n)?p=e:s(e.semver,f.semver,n)&&(f=e)}),p.operator===a||p.operator===c)return!1;if((!f.operator||f.operator===a)&&o(e,f.semver))return!1;if(f.operator===c&&s(e,f.semver))return!1}return!0}O.prototype.parse=function(e){var t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new h(r[2],this.options.loose):this.semver=x},O.prototype.toString=function(){return this.value},O.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===x||e===x)return!0;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}return S(e,this.operator,this.semver,this.options)},O.prototype.intersects=function(e,t){if(!(e instanceof O))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new E(e.value,t),C(this.value,r,t));if(""===e.operator)return""===e.value||(r=new E(this.value,t),C(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=S(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=S(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},t.Range=E,E.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},E.prototype.toString=function(){return this.range},E.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[a.HYPHENRANGELOOSE]:o[a.HYPHENRANGE];e=e.replace(n,A),r("hyphen replace",e),e=e.replace(o[a.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,o[a.COMPARATORTRIM]),e=(e=(e=e.replace(o[a.TILDETRIM],"$1~")).replace(o[a.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],s=e.split(" ").map(function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[a.CARETLOOSE]:o[a.CARET];return e.replace(n,function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),T(n)?a="":T(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":T(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a})}(e,t)}).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var n=t.loose?o[a.TILDELOOSE]:o[a.TILDE];return e.replace(n,function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),T(n)?a="":T(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":T(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a})}(e,t)}).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var n=t.loose?o[a.XRANGELOOSE]:o[a.XRANGE];return e.replace(n,function(n,i,o,s,a,c){r("xRange",e,n,i,o,s,a,c);var u=T(o),l=u||T(s),p=l||T(a),h=p;return"="===i&&h&&(i=""),c=t.includePrerelease?"-0":"",u?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(l&&(s=0),a=0,">"===i?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a+c):l?n=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:p&&(n=">="+o+"."+s+".0"+c+" <"+o+"."+(+s+1)+".0"+c),r("xRange return",n),n})}(e,t)}).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[a.STAR],"")}(e,t),r("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new O(e,this.options)},this)},E.prototype.intersects=function(e,t){if(!(e instanceof E))throw new TypeError("a Range is required");return this.set.some(function(r){return j(r,t)&&e.set.some(function(e){return j(e,t)&&r.every(function(r){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=function(e,t){return new E(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},E.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new h(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1},t.satisfies=C,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new E(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new h(n=e,r)))}),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new E(t,r)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new h(n=e,r)))}),n},t.minVersion=function(e,t){e=new E(e,t);var r=new h("0.0.0");if(e.test(r))return r;if(r=new h("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(e){var t=new h(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!m(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new E(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return I(e,t,"<",r)},t.gtr=function(e,t,r){return I(e,t,">",r)},t.outside=I,t.prerelease=function(e,t){var r=p(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new E(e,r),t=new E(t,r),e.intersects(t)},t.coerce=function(e,t){if(e instanceof h)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=o[a.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),o[a.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;o[a.COERCERTL].lastIndex=-1}else r=e.match(o[a.COERCE]);if(null===r)return null;return p(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}}),semver_1$1=semver$1.SEMVER_SPEC_VERSION,semver_2$1=semver$1.re,semver_3$1=semver$1.src,semver_4$1=semver$1.tokens,semver_5$1=semver$1.parse,semver_6$1=semver$1.valid,semver_7$1=semver$1.clean,semver_8$1=semver$1.SemVer,semver_9$1=semver$1.inc,semver_10$1=semver$1.diff,semver_11$1=semver$1.compareIdentifiers,semver_12$1=semver$1.rcompareIdentifiers,semver_13$1=semver$1.major,semver_14$1=semver$1.minor,semver_15$1=semver$1.patch,semver_16$1=semver$1.compare,semver_17$1=semver$1.compareLoose,semver_18$1=semver$1.compareBuild,semver_19$1=semver$1.rcompare,semver_20$1=semver$1.sort,semver_21$1=semver$1.rsort,semver_22$1=semver$1.gt,semver_23$1=semver$1.lt,semver_24$1=semver$1.eq,semver_25$1=semver$1.neq,semver_26$1=semver$1.gte,semver_27$1=semver$1.lte,semver_28$1=semver$1.cmp,semver_29$1=semver$1.Comparator,semver_30$1=semver$1.Range,semver_31$1=semver$1.toComparators,semver_32$1=semver$1.satisfies,semver_33$1=semver$1.maxSatisfying,semver_34$1=semver$1.minSatisfying,semver_35$1=semver$1.minVersion,semver_36$1=semver$1.validRange,semver_37$1=semver$1.ltr,semver_38$1=semver$1.gtr,semver_39$1=semver$1.outside,semver_40$1=semver$1.prerelease,semver_41=semver$1.intersects,semver_42=semver$1.coerce;const ServerStatus=Object.freeze({FAILED:"failed",UNKNOWN:"unknown",NOT_RUNNING:"not running",NOT_INSTALLED:"not installed",BUSY:"busy",INIT:"init",READY:"ready"}),VERSION_TIMEOUT_MS=6e5,logger$1=getLogger(),FLOW_RETURN_CODES={ok:0,serverInitializing:1,typeError:2,noServerRunning:6,outOfRetries:7,buildIdMismatch:9,unexpectedArgument:64},SERVER_READY_TIMEOUT_MS=1e4,EXEC_FLOW_RETRIES=5;class FlowProcess{constructor(e){_defineProperty(this,"_startedServer",void 0),_defineProperty(this,"_serverStatus",void 0),_defineProperty(this,"_root",void 0),this._serverStatus=new BehaviorSubject$1(ServerStatus.UNKNOWN),this._root=e,this._serverStatus.subscribe(e=>{logger$1.info(`[${e}]: Flow server in ${this._root}`)}),this._serverStatus.filter(e=>e===ServerStatus.NOT_RUNNING).subscribe(()=>{this._startFlowServer(),this._pingServer()}),this._serverStatus.filter(function(e){return e===ServerStatus.BUSY||e===ServerStatus.INIT}).subscribe(()=>{this._pingServer()})}async dispose(){if(this._serverStatus.complete(),this._startedServer&&getStopFlowOnExit()){this._startedServer.kill("SIGKILL"),safeSpawn(await getPathToFlow(),["stop"],this._getFlowExecOptions())}}allowServerRestart(){this._serverStatus.getValue()===ServerStatus.FAILED&&this._serverStatus.next(ServerStatus.UNKNOWN)}getServerStatusUpdates(){return this._serverStatus.asObservable()}async execFlow(e,t,r=!1,n=!1){const i=r?EXEC_FLOW_RETRIES:0;if(this._serverStatus.getValue()===ServerStatus.FAILED)return null;for(let r=0;;r++)try{return await this._rawExecFlow(e,t)}catch(t){const o=-1!==[ServerStatus.NOT_RUNNING,ServerStatus.INIT,ServerStatus.BUSY].indexOf(this._serverStatus.getValue());if(!(r<i&&o)){if(!o&&!n){const r=await getPathToFlow();logger$1.error(`Flow failed: ${r} ${e.join(" ")}. Error: ${JSON.stringify(t)}`)}throw t}await this._serverIsReady()}return null}async _startFlowServer(){const e=await getPathToFlow(),t=await safeSpawn(e,["server","--from","nuclide","--max-workers",this._getMaxWorkers().toString(),this._root],this._getFlowExecOptions()),r=e=>{const r=t.pid;logger$1.debug(`flow server (${r}): ${e}`)};t.stdout.on("data",r),t.stderr.on("data",r),t.on("exit",(e,t)=>{2===e&&null===t&&(logger$1.error("Flow server unexpectedly exited",this._root),this._setServerStatus(ServerStatus.FAILED))}),this._startedServer=t}async _rawExecFlow(e,t={}){if(!await isFlowInstalled())return this._updateServerStatus(null),null;t={...this._getFlowExecOptions(),...t},e=[...e,"--retry-if-init","false","--retries","0","--no-auto-start"];try{const r=await FlowProcess.execFlowClient(e,t);return this._updateServerStatus(r),r}catch(e){if(this._updateServerStatus(e),e.exitCode===FLOW_RETURN_CODES.typeError)return e;throw e}}_updateServerStatus(e){let t;if(null==e)t=ServerStatus.NOT_INSTALLED;else switch(e.exitCode){case FLOW_RETURN_CODES.ok:case FLOW_RETURN_CODES.typeError:t=ServerStatus.READY;break;case FLOW_RETURN_CODES.serverInitializing:t=ServerStatus.INIT;break;case FLOW_RETURN_CODES.noServerRunning:t=ServerStatus.NOT_RUNNING;break;case FLOW_RETURN_CODES.outOfRetries:t=ServerStatus.BUSY;break;case FLOW_RETURN_CODES.buildIdMismatch:logger$1.info("Killed flow server with incorrect version in",this._root),t=ServerStatus.NOT_RUNNING;break;case FLOW_RETURN_CODES.unexpectedArgument:return;default:logger$1.error(`Unknown return code from Flow: ${String(e.exitCode)}`),t=ServerStatus.UNKNOWN}this._setServerStatus(t)}_setServerStatus(e){const t=this._serverStatus.getValue();e!==t&&t!==ServerStatus.FAILED&&this._serverStatus.next(e)}async _pingServer(e=5){const t=this._serverStatus.getValue();let r=!1;this._serverStatus.filter(e=>e!==t).first().subscribe(()=>{r=!0});for(let t=0;!r&&t<e;t++)await this._rawExecFlow(["status"]).catch(()=>null),await Observable$1.of(null).delay(1e3).toPromise()}_serverIsReady(){return this._serverStatus.filter(e=>e===ServerStatus.READY).map(()=>!0).race(Observable$1.of(!1).delay(SERVER_READY_TIMEOUT_MS)).first(null,null,!1).toPromise()}_getFlowExecOptions(){return{cwd:this._root,env:{OCAMLRUNPARAM:"b",...process.env}}}_getMaxWorkers(){return Math.max(os.cpus().length-2,1)}static async execFlowClient(e,t={}){e=[...e,"--from","nuclide"];const r=await getPathToFlow(),n=await asyncExecute(r,e,t);if(0!==n.exitCode)throw n;return n}}class FlowVersion{constructor(e){_defineProperty(this,"_lastVersion",void 0),_defineProperty(this,"_versionFn",void 0),this._versionFn=e,this._lastVersion=null}invalidateVersion(){this._lastVersion=null}async getVersion(){const e=this._lastVersion;return null==e?await this._queryAndSetVersion():Date.now()-e.receivedTime>=VERSION_TIMEOUT_MS?await this._queryAndSetVersion():e.version}async _queryAndSetVersion(){const e=await this._versionFn();return this._lastVersion={version:e,receivedTime:Date.now()},e}}function arrayCompact(e){const t=[];for(const r of e)null!=r&&t.push(r);return t}function keyword(e){return _buildToken("keyword",e)}function className(e){return _buildToken("class-name",e)}function method(e){return _buildToken("method",e)}function param(e){return _buildToken("param",e)}function string(e){return _buildToken("string",e)}function whitespace(e){return _buildToken("whitespace",e)}function plain(e){return _buildToken("plain",e)}function type(e){return _buildToken("type",e)}function _buildToken(e,t){return{kind:e,value:t}}function astToOutline(e){return itemsToTrees(e.body)}function itemsToTrees(e){return arrayCompact(e.map(itemToTree))}function itemToTree(e){if(null==e)return null;const t=getExtent(e);switch(e.type){case"FunctionDeclaration":return{tokenizedText:[keyword("function"),whitespace(" "),method(e.id.name),plain("("),...paramsTokenizedText(e.params),plain(")")],representativeName:e.id.name,children:[],...t};case"ClassDeclaration":return{tokenizedText:[keyword("class"),whitespace(" "),className(e.id.name)],representativeName:e.id.name,children:itemsToTrees(e.body.body),...t};case"ClassProperty":let r=[];return e.value&&"ArrowFunctionExpression"===e.value.type&&(r=[plain("("),...paramsTokenizedText(e.value.params),plain(")")]),{tokenizedText:[method(e.key.name),plain("="),...r],representativeName:e.key.name,children:[],...t};case"MethodDefinition":return{tokenizedText:[method(e.key.name),plain("("),...paramsTokenizedText(e.value.params),plain(")")],representativeName:e.key.name,children:[],...t};case"ExportDeclaration":const n=itemToTree(e.declaration);return null==n?null:{tokenizedText:[keyword("export"),whitespace(" "),...n.tokenizedText],representativeName:n.representativeName,children:n.children,...t};case"ExpressionStatement":return topLevelExpressionOutline(e);case"TypeAlias":return typeAliasOutline(e);default:return null}}function paramsTokenizedText(e){const t=[];return e.forEach((r,n)=>{switch(r.type){case"Identifier":t.push(param(r.name));break;case"ObjectPattern":t.push(plain("{")),t.push(...paramsTokenizedText(r.properties.map(e=>e.key))),t.push(plain("}"));break;case"ArrayPattern":t.push(plain("[")),t.push(...paramsTokenizedText(r.elements)),t.push(plain("]"));break;default:throw new Error(`encountered unexpected argument type ${r.type}`)}n<e.length-1&&(t.push(plain(",")),t.push(whitespace(" ")))}),t}function getExtent(e){return{startPosition:{line:e.loc.start.line-1,column:e.loc.start.column},endPosition:{line:e.loc.end.line-1,column:e.loc.end.column}}}function typeAliasOutline(e){invariant("TypeAlias"===e.type);const t=e.id.name;return{tokenizedText:[keyword("type"),whitespace(" "),type(t)],representativeName:t,children:[],...getExtent(e)}}function topLevelExpressionOutline(e){switch(e.expression.type){case"CallExpression":return specOutline(e,!0);case"AssignmentExpression":return moduleExportsOutline(e.expression);default:return null}}function moduleExportsOutline(e){if(invariant("AssignmentExpression"===e.type),!isModuleExports(e.left))return null;const t=e.right;if("ObjectExpression"!==t.type)return null;const r=t.properties;return{tokenizedText:[plain("module.exports")],children:arrayCompact(r.map(moduleExportsPropertyOutline)),...getExtent(e)}}function isModuleExports(e){return"MemberExpression"===e.type&&"Identifier"===e.object.type&&"module"===e.object.name&&"Identifier"===e.property.type&&"exports"===e.property.name}function moduleExportsPropertyOutline(e){if(invariant("Property"===e.type),"Identifier"!==e.key.type)return null;const t=e.key.name;return e.shorthand?{tokenizedText:[string(t)],representativeName:t,children:[],...getExtent(e)}:"FunctionExpression"===e.value.type||"ArrowFunctionExpression"===e.value.type?{tokenizedText:[method(t),plain("("),...paramsTokenizedText(e.value.params),plain(")")],representativeName:t,children:[],...getExtent(e)}:{tokenizedText:[string(t),plain(":")],representativeName:t,children:[],...getExtent(e)}}function specOutline(e,t=!1){const r=e.expression;if("CallExpression"!==r.type)return null;const n=getFunctionName(r.callee);if(null==n)return null;if(!isDescribe(n)&&(t||!isIt(n)))return null;const i=getStringLiteralValue(r.arguments[0]),o=getFunctionBody(r.arguments[1]);if(null==i||null==o)return null;let s;return s=isIt(n)?[]:arrayCompact(o.filter(e=>"ExpressionStatement"===e.type).map(e=>specOutline(e))),{tokenizedText:[method(n),whitespace(" "),string(i)],representativeName:i,children:s,...getExtent(e)}}function getFunctionName(e){switch(e.type){case"Identifier":return e.name;case"MemberExpression":return"Identifier"!==e.object.type||"Identifier"!==e.property.type?null:`${e.object.name}.${e.property.name}`;default:return null}}function isDescribe(e){switch(e){case"describe":case"fdescribe":case"ddescribe":case"xdescribe":case"describe.only":return!0;default:return!1}}function isIt(e){switch(e){case"it":case"fit":case"iit":case"pit":case"xit":case"it.only":return!0;default:return!1}}function getStringLiteralValue(e){if(null==e)return null;if("Literal"!==e.type)return null;const t=e.value;return"string"!=typeof t?null:t}function getFunctionBody(e){return null==e?null:"ArrowFunctionExpression"!==e.type&&"FunctionExpression"!==e.type?null:e.body.body}function flowStatusOutputToDiagnostics(e,t){return null!=t.flowVersion?newFlowStatusOutputToDiagnostics(e,t):oldFlowStatusOutputToDiagnostics(e,t)}function oldFlowStatusOutputToDiagnostics(e,t){return{flowRoot:e,messages:t.errors.map(e=>{const t=e.message,r=t[0].level,n=t.map(flowMessageComponentToMessageComponent),i=e.operation;if(null!=i){const e=flowMessageComponentToMessageComponent(i);e.descr="See also: "+e.descr,n.push(e)}return{level:r,messageComponents:n}})}}function flowMessageComponentToMessageComponent(e){const t=e.path;let r=null;return null!=t&&""!==t&&(r={file:t,start:{line:e.line,column:e.start},end:{line:e.endline,column:e.end}}),{descr:e.descr,range:r}}function newFlowStatusOutputToDiagnostics(e,t){return{flowRoot:e,messages:t.errors.map(e=>{const t=e.message,r=e.level,n=t.map(newFlowMessageComponentToMessageComponent),i=e.operation;if(null!=i){const e=newFlowMessageComponentToMessageComponent(i);e.descr="See also: "+e.descr,n.push(e)}const o=e.extra;if(null!=o){const e=[].concat(...o.map(({message:e})=>e));n.push(...e.map(newFlowMessageComponentToMessageComponent))}return{level:r,messageComponents:n}})}}function newFlowMessageComponentToMessageComponent(e){return{descr:e.descr,range:maybeFlowLocToRange(e.loc)}}function maybeFlowLocToRange(e){return null==e?null:flowLocToRange(e)}function flowLocToRange(e){return{file:e.source,start:{line:e.start.line,column:e.start.column},end:{line:e.end.line,column:e.end.column}}}const logger$2=getLogger();class FlowRoot{constructor(e){_defineProperty(this,"_root",void 0),_defineProperty(this,"_process",void 0),_defineProperty(this,"_version",void 0),this._root=e,this._process=new FlowProcess(e),this._version=new FlowVersion(()=>this._flowGetVersion()),this._process.getServerStatusUpdates().filter(e=>"not running"===e).subscribe(()=>this._version.invalidateVersion())}dispose(){this._process.dispose()}allowServerRestart(){this._process.allowServerRestart()}getPathToRoot(){return this._root}getServerStatusUpdates(){return this._process.getServerStatusUpdates()}async flowFindDefinition(e,t,r,n){const i={};i.stdin=t;const o=["get-def","--json","--path",e,r,n];try{const e=await this._process.execFlow(o,i);if(!e)return null;const t=parseJSON(o,e.stdout);return t.path?{file:t.path,point:{line:t.line-1,column:t.start-1}}:null}catch(e){return null}}async flowFindDiagnostics(e,t){await this._forceRecheck(e);const r={};let n,i,o;t?(r.stdin=t,n=["check-contents","--json",e]):n=["status","--json",e];try{if(!(i=await this._process.execFlow(n,r,!0)))return null}catch(e){if(void 0===e.exitCode)return logger$2.error(e),null;i=e}try{o=parseJSON(n,i.stdout)}catch(e){return null}return flowStatusOutputToDiagnostics(this._root,o)}async flowGetAutocompleteSuggestions(e,t,r,n,i,o){const s=-1!==i.indexOf("."),a=/^[\s.]*$/.test(i)?"":i;if(!o&&!s&&a.length<1)return[];const c={},u=["autocomplete","--json",e];c.stdin=insertAutocompleteToken(t,r,n);try{const e=await this._process.execFlow(u,c);if(!e)return[];const t=parseJSON(u,e.stdout);let r;const n=(r=Array.isArray(t)?t:t.result).map(e=>processAutocompleteItem(a,e));return fuzzaldrin_1(n,a,{key:"displayText"})}catch(e){return[]}}async flowGetType(e,t,r,n,i){const o={};o.stdin=t;const s=["type-at-pos","--json","--path",e,++r,++n];let a,c;i&&s.push("--raw");try{const e=await this._process.execFlow(s,o);if(!e)return null;""===(a=e.stdout)&&(a=e.stderr)}catch(e){return null}try{c=parseJSON(s,a)}catch(e){return null}const u=c.type,l=c.raw_type;return u&&"(unknown)"!==u&&""!==u?{type:u,rawType:l}:(""===u&&logger$2.error("Received empty type hint from `flow type-at-pos`"),null)}async flowGetCoverage(e){const t=await this._version.getVersion();return null==t||semver$1.lte(t,"0.27.0")?await this._getCoverageViaDumpTypes(e):await this._getCoverageViaCoverage(e)}async _getCoverageViaDumpTypes(e){const t=["dump-types","--json",e];let r,n;try{r=await this._process.execFlow(t,{})}catch(e){return null}if(null==r)return null;try{n=parseJSON(t,r.stdout)}catch(e){return null}const i=n,o=i.filter(e=>""===e.type||"any"===e.type),s=o.map(e=>flowCoordsToAtomCoords(e.loc)),a=o.length,c=i.length;return{percentage:0===c?100:(c-a)/c*100,uncoveredRanges:s}}async _getCoverageViaCoverage(e){const t=["coverage","--json",e];let r,n;try{r=await this._process.execFlow(t,{})}catch(e){return null}if(null==r)return null;try{n=parseJSON(t,r.stdout)}catch(e){return null}const i=n.expressions,o=i.uncovered_count,s=i.covered_count,a=o+s;return{percentage:0===a?100:s/a*100,uncoveredRanges:i.uncovered_locs.map(flowCoordsToAtomCoords)}}async _forceRecheck(e){try{return await this._process.execFlow(["force-recheck",e],{},!1,!0),!0}catch(e){return!1}}async _flowGetVersion(){const e=["version","--json"];let t;try{const r=await FlowProcess.execFlowClient(e);if(null==r)return null;t=parseJSON(e,r.stdout)}catch(e){return logger$2.warn(e),null}return t.semver}static async flowGetOutline(e){const t={stdin:e},r=["ast"];let n;try{const e=await FlowProcess.execFlowClient(r,t);if(null==e)return null;n=parseJSON(r,e.stdout)}catch(e){return logger$2.warn(e),null}try{return astToOutline(n)}catch(e){return logger$2.error(e),null}}}function parseJSON(e,t){try{return JSON.parse(t)}catch(r){throw logger$2.error(`Invalid JSON result from flow ${e.join(" ")}. JSON:\n'${t}'.`),r}}class FlowRootContainer{constructor(){_defineProperty(this,"_flowRootMap",void 0),_defineProperty(this,"_flowRoot$",void 0),_defineProperty(this,"_disposed",void 0),this._disposed=!1,this._flowRootMap=new Map,this._flowRoot$=new Subject$1,this._flowRoot$.subscribe(e=>{this._flowRootMap.set(e.getPathToRoot(),e)})}async getRootForPath(e){this._checkForDisposal();const t=await findFlowConfigDir(e);if(null==t||this._disposed)return null;let r=this._flowRootMap.get(t);return r||(r=new FlowRoot(t),this._flowRoot$.next(r)),r}async runWithRoot(e,t){this._checkForDisposal();const r=await this.getRootForPath(e);return null==r?null:await t(r)}getAllRoots(){return this._checkForDisposal(),this._flowRootMap.values()}getServerStatusUpdates(){return this._checkForDisposal(),this._flowRoot$.flatMap(e=>{const t=e.getPathToRoot();return e.getServerStatusUpdates().map(e=>({pathToRoot:t,status:e}))})}dispose(){this._checkForDisposal(),this._flowRootMap.forEach(e=>e.dispose()),this._flowRootMap.clear(),this._disposed=!0}_checkForDisposal(){invariant(!this._disposed,"Method called on disposed FlowRootContainer")}}let rootContainer=null;function getRootContainer(){return null==rootContainer&&(rootContainer=new FlowRootContainer),rootContainer}function flowFindDefinition(e,t,r,n){return getRootContainer().runWithRoot(e,i=>i.flowFindDefinition(e,t,r,n))}function flowFindDiagnostics(e,t){return getRootContainer().runWithRoot(e,r=>r.flowFindDiagnostics(e,t))}function flowGetAutocompleteSuggestions(e,t,r,n,i,o){return getRootContainer().runWithRoot(e,s=>s.flowGetAutocompleteSuggestions(e,t,r,n,i,o))}async function flowGetType(e,t,r,n,i){return getRootContainer().runWithRoot(e,o=>o.flowGetType(e,t,r,n,i))}async function flowGetCoverage(e){return getRootContainer().runWithRoot(e,t=>t.flowGetCoverage(e))}class CompletionSupport{async provideCompletionItems(e,t,r){const n=e.uri.fsPath,i=e.getText(),o=t.line,s=t.character,a=await flowGetAutocompleteSuggestions(n,i,o,s,".",!0);return a?a.map(e=>{const t=new vscode.CompletionItem(e.displayText);return e.description&&(t.detail=e.description),t.kind=this.typeToKind(e.type,e.description),t.kind===vscode.CompletionItemKind.Function&&useCodeSnippetOnFunctionSuggest()&&(t.insertText=new vscode.SnippetString(e.snippet)),t}):[]}typeToKind(e,t){return"function"===e?vscode.CompletionItemKind.Function:t&&t.indexOf("[class: ")>=0?vscode.CompletionItemKind.Class:vscode.CompletionItemKind.Variable}}class HoverSupport{async provideHover(e,t){const r=e.uri.fsPath,n=e.getWordRangeAtPosition(t);if(!n)return;const i=e.getText(n),o=e.getText(),s=t.line,a=t.character,c=await flowGetType(r,o,s,a,!1);if(c){const e=format(c.type);return new vscode.Hover(["[Flow]",{language:"javascript",value:`${i}: ${e}`}])}}}function normalizeLineNumber(e){return e<0?0:e}class DeclarationSupport{async provideDefinition(e,t,r){const n=e.uri.fsPath,i=e.getText(),o=e.getWordRangeAtPosition(t);if(o){const e=o.start.line+1,t=o.start.character+1,r=await flowFindDefinition(n,i,e,t);if(r){const e=new vscode.Range(normalizeLineNumber(r.point.line),r.point.column,normalizeLineNumber(r.point.line),r.point.column),t=vscode.Uri.file(r.file);return new vscode.Location(t,e)}}return null}}var frames="win32"===process.platform?["-","\\","|","/"]:["","","","","","","","","",""],elegantSpinner=function(){var e=0;return function(){return frames[e=++e%frames.length]}},frames_1=frames;elegantSpinner.frames=frames_1;class Status{static createStatusBarItem(){const e=vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);return e.tooltip="Flow is type checking",e.command="flow.show-output",e}static render(e){return e.render()}constructor(){_defineProperty(this,"statusBarItem",void 0),_defineProperty(this,"state",void 0),this.statusBarItem=Status.createStatusBarItem()}isBusy(){return null!=this.state}idle(){this.update(!1)}busy(){this.update(isFlowStatusEnabled())}update(e){const{state:t}=this;t&&!e&&(clearInterval(t.id),this.state=null),!t&&e&&(this.state={id:setInterval(Status.render,100,this)}),t!=this.state&&this.render()}render(){this.isBusy()?(this.statusBarItem.show(),this.statusBarItem.text=`Flow: ${Status.spin()}`):(this.statusBarItem.hide(),this.statusBarItem.text="")}}_defineProperty(Status,"spin",elegantSpinner());let lastDiagnostics=null;class Coverage{static createStatusBarItem(){const e=vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);return e.tooltip="Flow type coverage. Click to toggle uncovered code",e.command="flow.show-coverage",e}constructor(){_defineProperty(this,"coverageStatus",void 0),_defineProperty(this,"state",void 0),this.coverageStatus=Coverage.createStatusBarItem(),this.state={showUncovered:shouldShowUncoveredCode(),uri:null},vscode.commands.registerCommand("flow.show-coverage",()=>{this.setState({showUncovered:!this.state.showUncovered})})}setState(e){this.state=Object.assign({},this.state,e),this.render()}update(e){this.setState({uri:e})}applyDiagnostics(e,t){lastDiagnostics&&lastDiagnostics.dispose(),lastDiagnostics=vscode.languages.createDiagnosticCollection();const{uncoveredRanges:r}=e,n=r.map(e=>{const t=new vscode.Range(e.start.line,e.start.column,e.end.line,e.end.column),r=new vscode.Diagnostic(t,"uncovered code",vscode.DiagnosticSeverity.Information);return r.source="flow coverage",r});this.state.showUncovered&&lastDiagnostics.set(t,n)}async render(){const{uri:e}=this.state;if(!e)return null;this.coverageStatus.show();try{const t=await flowGetCoverage(e.fsPath);if(t){const r="number"==typeof t.percentage&&t.percentage.toFixed(1);this.coverageStatus.text=`Flow: ${r.toString()}%`,this.applyDiagnostics(t,e)}}catch(e){this.coverageStatus.text=""}}}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root$1.Date.now()};function debounce$1(e,t,r){var n,i,o,s,a,c,u=0,l=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function f(t){var r=n,o=i;return n=i=void 0,u=t,s=e.apply(o,r)}function b(e){var r=e-c;return void 0===c||r>=t||r<0||p&&e-u>=o}function d(){var e=now();if(b(e))return m(e);a=setTimeout(d,function(e){var r=t-(e-c);return p?nativeMin(r,o-(e-u)):r}(e))}function m(e){return a=void 0,h&&n?f(e):(n=i=void 0,s)}function v(){var e=now(),r=b(e);if(n=arguments,i=this,c=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(d,t),l?f(e):s}(c);if(p)return a=setTimeout(d,t),f(c)}return void 0===a&&(a=setTimeout(d,t)),s}return t=toNumber(t)||0,isObject$1(r)&&(l=!!r.leading,o=(p="maxWait"in r)?nativeMax(toNumber(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=c=i=a=void 0},v.flush=function(){return void 0===a?s:m(now())},v}function isObject$1(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce$1;const ON_CHANGE_TEXT_TIMEOUT=500,status=new Status,coverage=new Coverage;let lastDiagnostics$1=null;function setupDiagnostics(e){const{subscriptions:t}=e,r=lodash_debounce(updateDiagnostics,ON_CHANGE_TEXT_TIMEOUT);vscode.window.activeTextEditor&&hasFlowPragma(vscode.window.activeTextEditor.document.getText())&&r(e,vscode.window.activeTextEditor.document),t.push(vscode.window.onDidChangeActiveTextEditor(t=>{t&&hasFlowPragma(t.document.getText())&&r(e,t.document)})),t.push(vscode.workspace.onDidSaveTextDocument(t=>{vscode.window.activeTextEditor&&hasFlowPragma(vscode.window.activeTextEditor.document.getText())&&r(e,vscode.window.activeTextEditor.document)})),t.push(vscode.workspace.onDidChangeTextDocument(t=>{const{activeTextEditor:n}=vscode.window;n&&n.document.fileName===t.document.fileName&&isRunOnEditEnabled()&&hasFlowPragma(t.document.getText())&&r(e,t.document)}))}const pendingDiagnostics=new Map;function updateDiagnostics(e,t){const{uri:r,version:n}=t;if("file"!==r.scheme)return;const i=r.toString(),o=pendingDiagnostics.get(i);null==o?requestDiagnostics(e,t):o!==n&&(abortDiagnostics(i),requestDiagnostics(e,t))}function abortDiagnostics(e){pendingDiagnostics.has(e)&&pendingDiagnostics.delete(e),0===pendingDiagnostics.size&&status.idle()}async function requestDiagnostics(e,t){const{uri:r,version:n}=t,i=r.toString();pendingDiagnostics.set(i,n),pendingDiagnostics.size>0&&status.busy();try{let r=await getDocumentDiagnostics(e,t);pendingDiagnostics.get(i)===n&&applyDiagnostics(r)}catch(e){console.error(e)}status.idle(),coverage.update(t.uri),pendingDiagnostics.get(i)===n&&pendingDiagnostics.delete(i),0===pendingDiagnostics.size&&status.idle()}async function getDocumentDiagnostics(e,t){return t.isUntitled?getDraftDocumentDiagnostics(e,t):t.isDirty?getDirtyDocumentDiagnostics(e,t):getSavedDocumentDiagnostics(e,t)}const noDiagnostics=Object.create(null);async function getFileDiagnostics(e,t,r=toURI){if(-1===getFileExtensions().indexOf(path$1.extname(e)))return noDiagnostics;let n=await flowFindDiagnostics(e,t);if(n&&n.messages){const{flowRoot:e,messages:t}=n,i=Object.create(null);return t.forEach(t=>{const{level:n,messageComponents:o}=t;if(!o.length)return;const[s,...a]=o,c=s.range;if(null==c)return;const u=path$1.resolve(e,c.file),l=r(u);let p={severity:n,startLine:c.start.line,startCol:c.start.column,endLine:c.end.line,endCol:c.end.column,msg:""},h=[];a.forEach(e=>{let t=e.descr;t&&"null"!==t&&"undefined"!==t&&h.push(t)});let f=s.descr;h.length&&(f=`${f} (${h.join(" ")})`),p.msg=f,i[u]||(i[u]={uri:l,reports:[]}),i[u].reports.push(p)}),i}return noDiagnostics}const supportedLanguages=new Set(["javascript","javascriptreact"]);async function getDraftDocumentDiagnostics(e,t){if(supportedLanguages.has(t.languageId)){const r=t.getText(),n=getTryPath(e),i=t.uri;return getFileDiagnostics(n,r,e=>i)}return noDiagnostics}async function getDirtyDocumentDiagnostics(e,t){return getFileDiagnostics(t.uri.fsPath,t.getText())}async function getSavedDocumentDiagnostics(e,t){return getFileDiagnostics(t.uri.fsPath,null)}function mapSeverity(e){switch(e){case"error":return vscode.DiagnosticSeverity.Error;case"warning":return vscode.DiagnosticSeverity.Warning;default:return vscode.DiagnosticSeverity.Error}}function applyDiagnostics(e){lastDiagnostics$1&&lastDiagnostics$1.dispose(),lastDiagnostics$1=vscode.languages.createDiagnosticCollection();for(let t in e){const{uri:r,reports:n}=e[t],i=n.map(e=>{const t=Math.max(0,e.startLine-1),n=Math.max(0,e.endLine-1),i=new vscode.Range(t,e.startCol-1,n,e.endCol),o=(new vscode.Location(r,i),new vscode.Diagnostic(i,e.msg,mapSeverity(e.severity)));return o.source="flow",o});lastDiagnostics$1.set(r,i)}}function setupLogging(e){const t=getOutputChannel();e.subscriptions.push(t)}const languages=[{language:"javascript",scheme:"file"},{language:"javascriptreact",scheme:"file"}];function activate(e){isFlowEnabled()&&(global.vscode=vscode,setupLogging(e),checkNode(),checkFlow(),languages.forEach(t=>{e.subscriptions.push(vscode.languages.registerHoverProvider(t,new HoverSupport)),e.subscriptions.push(vscode.languages.registerDefinitionProvider(t,new DeclarationSupport)),e.subscriptions.push(vscode.languages.registerCompletionItemProvider(t,new CompletionSupport,"."))}),setupDiagnostics(e))}vscode.workspace.onDidChangeConfiguration(e=>{clearWorkspaceCaches()}),exports.activate=activate;
//# sourceMappingURL=flowNonLSP.js.map
