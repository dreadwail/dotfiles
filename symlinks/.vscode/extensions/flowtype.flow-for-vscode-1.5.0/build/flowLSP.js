"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var vscode=require("vscode"),vscode__default=_interopDefault(vscode),path$1=_interopDefault(require("path")),child_process=_interopDefault(require("child_process")),fs$1=_interopDefault(require("fs")),os=_interopDefault(require("os")),crypto=_interopDefault(require("crypto")),net=_interopDefault(require("net")),module$1=_interopDefault(require("module")),assert=_interopDefault(require("assert")),util=_interopDefault(require("util")),events$1=_interopDefault(require("events")),prettier=_interopDefault(require("prettier/standalone")),parserFlow=_interopDefault(require("prettier/parser-flow")),stream=_interopDefault(require("stream"));function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var semver=createCommonjsModule(function(e,t){var n;t=e.exports=B,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var m=a++;s[m]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var f=a++;s[f]="(?:-("+s[m]+"(?:\\."+s[m]+")*))";var g=a++;s[g]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var _=a++;s[_]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var y=a++,w="v?"+s[d]+s[f]+"?"+s[_]+"?";s[y]="^"+w+"$";var C="[v=\\s]*"+s[p]+s[g]+"?"+s[_]+"?",E=a++;s[E]="^"+C+"$";var R=a++;s[R]="((?:<|>)?=?)";var S=a++;s[S]=s[u]+"|x|X|\\*";var $=a++;s[$]=s[c]+"|x|X|\\*";var b=a++;s[b]="[v=\\s]*("+s[$]+")(?:\\.("+s[$]+")(?:\\.("+s[$]+")(?:"+s[f]+")?"+s[_]+"?)?)?";var x=a++;s[x]="[v=\\s]*("+s[S]+")(?:\\.("+s[S]+")(?:\\.("+s[S]+")(?:"+s[g]+")?"+s[_]+"?)?)?";var T=a++;s[T]="^"+s[R]+"\\s*"+s[b]+"$";var D=a++;s[D]="^"+s[R]+"\\s*"+s[x]+"$";var P=a++;s[P]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var k=a++;s[k]="(?:~>?)";var I=a++;s[I]="(\\s*)"+s[k]+"\\s+",o[I]=new RegExp(s[I],"g");var O=a++;s[O]="^"+s[k]+s[b]+"$";var F=a++;s[F]="^"+s[k]+s[x]+"$";var N=a++;s[N]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[N]+"\\s+",o[M]=new RegExp(s[M],"g");var L=a++;s[L]="^"+s[N]+s[b]+"$";var A=a++;s[A]="^"+s[N]+s[x]+"$";var q=a++;s[q]="^"+s[R]+"\\s*("+C+")$|^$";var j=a++;s[j]="^"+s[R]+"\\s*("+w+")$|^$";var W=a++;s[W]="(\\s*)"+s[R]+"\\s*("+C+"|"+s[b]+")",o[W]=new RegExp(s[W],"g");var K=a++;s[K]="^\\s*("+s[b]+")\\s+-\\s+("+s[b]+")\\s*$";var U=a++;s[U]="^\\s*("+s[x]+")\\s+-\\s+("+s[x]+")\\s*$";var G=a++;s[G]="(<|>)?=?\\s*\\*";for(var z=0;z<35;z++)n(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function H(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof B)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[E]:o[y]).test(e))return null;try{return new B(e,t)}catch(e){return null}}function B(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof B){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof B))return new B(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[E]:o[y]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=H,t.valid=function(e,t){var n=H(e,t);return n?n.version:null},t.clean=function(e,t){var n=H(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=B,B.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},B.prototype.toString=function(){return this.version},B.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof B||(e=new B(e,this.options)),this.compareMain(e)||this.comparePre(e)},B.prototype.compareMain=function(e){return e instanceof B||(e=new B(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},B.prototype.comparePre=function(e){if(e instanceof B||(e=new B(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return X(r,i)}while(++t)},B.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new B(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var n=H(e),r=H(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=X;var V=/^[0-9]+$/;function X(e,t){var n=V.test(e),r=V.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function J(e,t,n){return new B(e,n).compare(new B(t,n))}function Z(e,t,n){return J(e,t,n)>0}function Q(e,t,n){return J(e,t,n)<0}function Y(e,t,n){return 0===J(e,t,n)}function ee(e,t,n){return 0!==J(e,t,n)}function te(e,t,n){return J(e,t,n)>=0}function ne(e,t,n){return J(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Y(e,n,r);case"!=":return ee(e,n,r);case">":return Z(e,n,r);case">=":return te(e,n,r);case"<":return Q(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new B(e,t).major},t.minor=function(e,t){return new B(e,t).minor},t.patch=function(e,t){return new B(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,n){return J(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Z,t.lt=Q,t.eq=Y,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new B(e,r),t=new se(t,r),n){case">":i=Z,o=ne,s=Q,a=">",c=">=";break;case"<":i=Q,o=te,s=Z,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)}),d.operator===a||d.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[q]:o[j],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new B(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new B(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[U]:o[K];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[W],"$1$2$3"),n("comparator trim",e,o[W]),e=(e=(e=e.replace(o[I],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[j],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[A]:o[L];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t.loose?o[F]:o[O];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t.loose?o[D]:o[T];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s),d=l;return"="===r&&d&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&d?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),n("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,this.options)},this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new B(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new B(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new B(r=e,n)))}),r},t.minVersion=function(e,t){e=new se(e,t);var n=new B("0.0.0");if(e.test(n))return n;if(n=new B("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(e){var t=new B(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Z(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=H(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof B)return e;if("string"!=typeof e)return null;var t=e.match(o[P]);if(null==t)return null;return H(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),semver_1=semver.SEMVER_SPEC_VERSION,semver_2=semver.re,semver_3=semver.src,semver_4=semver.parse,semver_5=semver.valid,semver_6=semver.clean,semver_7=semver.SemVer,semver_8=semver.inc,semver_9=semver.diff,semver_10=semver.compareIdentifiers,semver_11=semver.rcompareIdentifiers,semver_12=semver.major,semver_13=semver.minor,semver_14=semver.patch,semver_15=semver.compare,semver_16=semver.compareLoose,semver_17=semver.rcompare,semver_18=semver.sort,semver_19=semver.rsort,semver_20=semver.gt,semver_21=semver.lt,semver_22=semver.eq,semver_23=semver.neq,semver_24=semver.gte,semver_25=semver.lte,semver_26=semver.cmp,semver_27=semver.Comparator,semver_28=semver.Range,semver_29=semver.toComparators,semver_30=semver.satisfies,semver_31=semver.maxSatisfying,semver_32=semver.minSatisfying,semver_33=semver.minVersion,semver_34=semver.validRange,semver_35=semver.ltr,semver_36=semver.gtr,semver_37=semver.outside,semver_38=semver.prerelease,semver_39=semver.intersects,semver_40=semver.coerce,is=createCommonjsModule(function(e,t){function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every(e=>n(e))}});unwrapExports(is);var is_1=is.string,is_2=is.number,is_3=is.error,is_4=is.func,is_5=is.array,is_6=is.stringArray,messages=createCommonjsModule(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(n=t.ErrorCodes||(t.ErrorCodes={}));class r extends Error{constructor(e,t,i){super(t),this.code=is.number(e)?e:n.UnknownErrorCode,this.data=i,Object.setPrototypeOf(this,r.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=r;class i{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=i;t.RequestType0=class extends i{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends i{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends i{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends i{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends i{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends i{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends i{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends i{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends i{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends i{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends i{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends i{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends i{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends i{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends i{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends i{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends i{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends i{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends i{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends i{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends i{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends i{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&is.string(t.method)&&(is.string(t.id)||is.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&is.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(is.string(t.id)||is.number(t.id)||null===t.id)}});unwrapExports(messages);var messages_1=messages.ErrorCodes,messages_2=messages.ResponseError,messages_3=messages.AbstractMessageType,messages_4=messages.RequestType0,messages_5=messages.RequestType,messages_6=messages.RequestType1,messages_7=messages.RequestType2,messages_8=messages.RequestType3,messages_9=messages.RequestType4,messages_10=messages.RequestType5,messages_11=messages.RequestType6,messages_12=messages.RequestType7,messages_13=messages.RequestType8,messages_14=messages.RequestType9,messages_15=messages.NotificationType,messages_16=messages.NotificationType0,messages_17=messages.NotificationType1,messages_18=messages.NotificationType2,messages_19=messages.NotificationType3,messages_20=messages.NotificationType4,messages_21=messages.NotificationType5,messages_22=messages.NotificationType6,messages_23=messages.NotificationType7,messages_24=messages.NotificationType8,messages_25=messages.NotificationType9,messages_26=messages.isRequestMessage,messages_27=messages.isNotificationMessage,messages_28=messages.isResponseMessage,events=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),i=0,o=n.length;i<o;i++)try{t.push(n[i].apply(r[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{let o;return this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(i)&&i.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}r._noop=function(){},t.Emitter=r});unwrapExports(events);var events_1=events.Disposable,events_2=events.Event,events_3=events.Emitter,messageReader=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});let n=8192,r=Buffer.from("\r","ascii")[0],i=Buffer.from("\n","ascii")[0],o="\r\n";class s{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(n)}append(e){var t=e;if("string"==typeof e){var r=e,i=Buffer.byteLength(r,this.encoding);(t=Buffer.allocUnsafe(i)).write(r,0,i,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var o=(Math.ceil((this.index+t.length)/n)+1)*n;0===this.index?(this.buffer=Buffer.allocUnsafe(o),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],o)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==r||this.buffer[t+1]!==i||this.buffer[t+2]!==r||this.buffer[t+3]!==i);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(o).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&is.func(t.listen)&&is.func(t.dispose)&&is.func(t.onError)&&is.func(t.onClose)&&is.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class a{constructor(){this.errorEmitter=new events.Emitter,this.closeEmitter=new events.Emitter,this.partialMessageEmitter=new events.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${is.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a;class c extends a{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new s(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=c;t.IPCMessageReader=class extends a{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends c{constructor(e,t="utf-8"){super(e,t)}}});unwrapExports(messageReader);var messageReader_1=messageReader.MessageReader,messageReader_2=messageReader.AbstractMessageReader,messageReader_3=messageReader.StreamMessageReader,messageReader_4=messageReader.IPCMessageReader,messageReader_5=messageReader.SocketMessageReader,messageWriter=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});let n="Content-Length: ",r="\r\n";!function(e){e.is=function(e){let t=e;return t&&is.func(t.dispose)&&is.func(t.onClose)&&is.func(t.onError)&&is.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class i{constructor(){this.errorEmitter=new events.Emitter,this.closeEmitter=new events.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${is.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=i;t.StreamMessageWriter=class extends i{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),i=Buffer.byteLength(t,this.encoding),o=[n,i.toString(),r,r];try{this.writable.write(o.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends i{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends i{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),i=Buffer.byteLength(t,this.encoding),o=[n,i.toString(),r,r];try{this.sending=!0,this.socket.write(o.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}});unwrapExports(messageWriter);var messageWriter_1=messageWriter.MessageWriter,messageWriter_2=messageWriter.AbstractMessageWriter,messageWriter_3=messageWriter.StreamMessageWriter,messageWriter_4=messageWriter.IPCMessageWriter,messageWriter_5=messageWriter.SocketMessageWriter,cancellation=createCommonjsModule(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:events.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:events.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||is.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(n=t.CancellationToken||(t.CancellationToken={}));const r=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});class i{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?r:(this._emitter||(this._emitter=new events.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new i),this._token}cancel(){this._token?this._token.cancel():this._token=n.Cancelled}dispose(){this.cancel()}}});unwrapExports(cancellation);var cancellation_1=cancellation.CancellationToken,cancellation_2=cancellation.CancellationTokenSource,linkedMap=createCommonjsModule(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(n=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}});unwrapExports(linkedMap);var linkedMap_1=linkedMap.Touch,linkedMap_2=linkedMap.LinkedMap,pipeSupport=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomPipeName=function(){const e=crypto.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:path$1.join(os.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let s=net.createServer(e=>{s.close(),n([new messageReader.SocketMessageReader(e,t),new messageWriter.SocketMessageWriter(e,t)])});s.on("error",o),s.listen(e,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=net.createConnection(e);return[new messageReader.SocketMessageReader(n,t),new messageWriter.SocketMessageWriter(n,t)]}});unwrapExports(pipeSupport);var pipeSupport_1=pipeSupport.generateRandomPipeName,pipeSupport_2=pipeSupport.createClientPipeTransport,pipeSupport_3=pipeSupport.createServerPipeTransport,socketSupport=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createClientSocketTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let s=net.createServer(e=>{s.close(),n([new messageReader.SocketMessageReader(e,t),new messageWriter.SocketMessageWriter(e,t)])});s.on("error",o),s.listen(e,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=net.createConnection(e,"127.0.0.1");return[new messageReader.SocketMessageReader(n,t),new messageWriter.SocketMessageWriter(n,t)]}});unwrapExports(socketSupport);var socketSupport_1=socketSupport.createClientSocketTransport,socketSupport_2=socketSupport.createServerSocketTransport,main=createCommonjsModule(function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var r,i,o,s,a,c,u;Object.defineProperty(t,"__esModule",{value:!0}),t.RequestType=messages.RequestType,t.RequestType0=messages.RequestType0,t.RequestType1=messages.RequestType1,t.RequestType2=messages.RequestType2,t.RequestType3=messages.RequestType3,t.RequestType4=messages.RequestType4,t.RequestType5=messages.RequestType5,t.RequestType6=messages.RequestType6,t.RequestType7=messages.RequestType7,t.RequestType8=messages.RequestType8,t.RequestType9=messages.RequestType9,t.ResponseError=messages.ResponseError,t.ErrorCodes=messages.ErrorCodes,t.NotificationType=messages.NotificationType,t.NotificationType0=messages.NotificationType0,t.NotificationType1=messages.NotificationType1,t.NotificationType2=messages.NotificationType2,t.NotificationType3=messages.NotificationType3,t.NotificationType4=messages.NotificationType4,t.NotificationType5=messages.NotificationType5,t.NotificationType6=messages.NotificationType6,t.NotificationType7=messages.NotificationType7,t.NotificationType8=messages.NotificationType8,t.NotificationType9=messages.NotificationType9,t.MessageReader=messageReader.MessageReader,t.StreamMessageReader=messageReader.StreamMessageReader,t.IPCMessageReader=messageReader.IPCMessageReader,t.SocketMessageReader=messageReader.SocketMessageReader,t.MessageWriter=messageWriter.MessageWriter,t.StreamMessageWriter=messageWriter.StreamMessageWriter,t.IPCMessageWriter=messageWriter.IPCMessageWriter,t.SocketMessageWriter=messageWriter.SocketMessageWriter,t.Disposable=events.Disposable,t.Event=events.Event,t.Emitter=events.Emitter,t.CancellationTokenSource=cancellation.CancellationTokenSource,t.CancellationToken=cancellation.CancellationToken,n(pipeSupport),n(socketSupport),function(e){e.type=new messages.NotificationType("$/cancelRequest")}(r||(r={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(i=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(i=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(o=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(o=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new messages.NotificationType("$/setTraceNotification")}(s=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new messages.NotificationType("$/logTraceNotification")}(a=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(c=t.ConnectionErrors||(t.ConnectionErrors={}));class l extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,l.prototype)}}function d(e,t,n,d){let p=0,m=0,h=0;const f="2.0";let g,v,_=void 0,y=Object.create(null),w=void 0,C=Object.create(null),E=new linkedMap.LinkedMap,R=Object.create(null),S=Object.create(null),$=i.Off,b=o.Text,x=u.New,T=new events.Emitter,D=new events.Emitter,P=new events.Emitter,k=new events.Emitter;function I(e){return"req-"+e.toString()}function O(e,t){var n;messages.isRequestMessage(t)?e.set(I(t.id),t):messages.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++h).toString():"res-"+n.toString(),t):e.set("not-"+(++m).toString(),t)}function F(e){}function N(){return x===u.Listening}function M(){return x===u.Closed}function L(){return x===u.Disposed}function A(){x!==u.New&&x!==u.Listening||(x=u.Closed,D.fire(void 0))}function q(){g||0===E.size||(g=setImmediate(()=>{g=void 0,function(){if(0===E.size)return;let e=E.shift();try{messages.isRequestMessage(e)?function(e){if(L())return;function n(n,r,i){let o={jsonrpc:f,id:e.id};n instanceof messages.ResponseError?o.error=n.toJson():o.result=void 0===n?null:n,W(o,r,i),t.write(o)}function r(n,r,i){let o={jsonrpc:f,id:e.id,error:n.toJson()};W(o,r,i),t.write(o)}!function(e){if($===i.Off||!v)return;if(b===o.Text){let t=void 0;$===i.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),v.log(`Received request '${e.method} - (${e.id})'.`,t)}else K("receive-request",e)}(e);let s,a,c=y[e.method];c&&(s=c.type,a=c.handler);let u=Date.now();if(a||_){let i=new cancellation.CancellationTokenSource,o=String(e.id);S[o]=i;try{let c,l=c=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(i.token):_(e.method,i.token):is.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,i.token):_(e.method,...e.params,i.token):a?a(e.params,i.token):_(e.method,e.params,i.token);c?l.then?l.then(t=>{delete S[o],n(t,e.method,u)},t=>{delete S[o],t instanceof messages.ResponseError?r(t,e.method,u):t&&is.string(t.message)?r(new messages.ResponseError(messages.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new messages.ResponseError(messages.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}):(delete S[o],n(c,e.method,u)):(delete S[o],function(n,r,i){void 0===n&&(n=null);let o={jsonrpc:f,id:e.id,result:n};W(o,r,i),t.write(o)}(c,e.method,u))}catch(t){delete S[o],t instanceof messages.ResponseError?n(t,e.method,u):t&&is.string(t.message)?r(new messages.ResponseError(messages.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new messages.ResponseError(messages.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else r(new messages.ResponseError(messages.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):messages.isNotificationMessage(e)?function(e){if(L())return;let t,s=void 0;if(e.method===r.type.method)t=e=>{let t=e.id,n=S[String(t)];n&&n.cancel()};else{let n=C[e.method];n&&(t=n.handler,s=n.type)}if(t||w)try{!function(e){if($===i.Off||!v||e.method===a.type.method)return;if(b===o.Text){let t=void 0;$===i.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),v.log(`Received notification '${e.method}'.`,t)}else K("receive-notification",e)}(e),void 0===e.params||void 0!==s&&0===s.numberOfParams?t?t():w(e.method):is.array(e.params)&&(void 0===s||s.numberOfParams>1)?t?t(...e.params):w(e.method,...e.params):t?t(e.params):w(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else P.fire(e)}(e):messages.isResponseMessage(e)?function(e){if(L())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=R[t];if(function(e,t){if($===i.Off||!v)return;if(b===o.Text){let n=void 0;if($===i.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";v.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else v.log(`Received response ${e.id} without active response promise.`,n)}else K("receive-response",e)}(e,r),r){delete R[t];try{if(e.error){let t=e.error;r.reject(new messages.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(is.string(t.id)||is.number(t.id)){let e=String(t.id),n=R[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{q()}}()}))}e.onClose(A),e.onError(function(e){T.fire([e,void 0,void 0])}),t.onClose(A),t.onError(function(e){T.fire(e)});let j=e=>{try{if(messages.isNotificationMessage(e)&&e.method===r.type.method){let n=I(e.params.id),r=E.get(n);if(messages.isRequestMessage(r)){let i=d&&d.cancelUndispatched?d.cancelUndispatched(r,F):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return E.delete(n),i.id=r.id,W(i,e.method,Date.now()),void t.write(i)}}O(E,e)}finally{q()}};function W(e,t,n){if($!==i.Off&&v)if(b===o.Text){let r=void 0;$===i.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),v.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else K("send-response",e)}function K(e,t){if(!v||$===i.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};v.log(n)}function U(){if(M())throw new l(c.Closed,"Connection is closed.");if(L())throw new l(c.Disposed,"Connection is disposed.")}function G(e){return void 0===e?null:e}function z(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=G(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(G(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let H={sendNotification:(e,...n)=>{let r,s;if(U(),is.string(e))switch(r=e,n.length){case 0:s=null;break;case 1:s=n[0];break;default:s=n}else r=e.method,s=z(e,n);let a={jsonrpc:f,method:r,params:s};!function(e){if($!==i.Off&&v)if(b===o.Text){let t=void 0;$===i.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),v.log(`Sending notification '${e.method}'.`,t)}else K("send-notification",e)}(a),t.write(a)},onNotification:(e,t)=>{U(),is.func(e)?w=e:t&&(is.string(e)?C[e]={type:void 0,handler:t}:C[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let s,a;U(),function(){if(!N())throw new Error("Call listen() first.")}();let c=void 0;if(is.string(e))switch(s=e,n.length){case 0:a=null;break;case 1:cancellation.CancellationToken.is(n[0])?(a=null,c=n[0]):a=G(n[0]);break;default:const t=n.length-1;cancellation.CancellationToken.is(n[t])?(c=n[t],a=2===n.length?G(n[0]):n.slice(0,t).map(e=>G(e))):a=n.map(e=>G(e))}else{s=e.method,a=z(e,n);let t=e.numberOfParams;c=cancellation.CancellationToken.is(n[t])?n[t]:void 0}let u=p++,l=new Promise((e,n)=>{let r={jsonrpc:f,id:u,method:s,params:a},c={method:s,timerStart:Date.now(),resolve:e,reject:n};!function(e){if($!==i.Off&&v)if(b===o.Text){let t=void 0;$===i.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),v.log(`Sending request '${e.method} - (${e.id})'.`,t)}else K("send-request",e)}(r);try{t.write(r)}catch(e){c.reject(new messages.ResponseError(messages.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),c=null}c&&(R[String(u)]=c)});return c&&c.onCancellationRequested(()=>{H.sendNotification(r.type,{id:u})}),l},onRequest:(e,t)=>{U(),is.func(e)?_=e:t&&(is.string(e)?y[e]={type:void 0,handler:t}:y[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,a=o.Text;void 0!==n&&(is.boolean(n)?r=n:(r=n.sendNotification||!1,a=n.traceFormat||o.Text)),b=a,v=($=e)===i.Off?void 0:t,!r||M()||L()||H.sendNotification(s.type,{value:i.toString(e)})},onError:T.event,onClose:D.event,onUnhandledNotification:P.event,onDispose:k.event,dispose:()=>{if(L())return;x=u.Disposed,k.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(R).forEach(e=>{R[e].reject(n)}),R=Object.create(null),S=Object.create(null),E=new linkedMap.LinkedMap,is.func(t.dispose)&&t.dispose(),is.func(e.dispose)&&e.dispose()},listen:()=>{U(),function(){if(N())throw new l(c.AlreadyListening,"Connection is already listening")}(),x=u.Listening,e.listen(j)},inspect:()=>{console.log("inspect")}};return H.onNotification(a.type,e=>{$!==i.Off&&v&&v.log(e.message,$===i.Verbose?e.verbose:void 0)}),H}t.ConnectionError=l,function(e){e.is=function(e){let t=e;return t&&is.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(u||(u={})),t.createMessageConnection=function(e,n,r,i){var o;return r||(r=t.NullLogger),d(void 0!==(o=e).listen&&void 0===o.read?e:new messageReader.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new messageWriter.StreamMessageWriter(n),r,i)}});unwrapExports(main);var Position,Range,Location,LocationLink,Color,ColorInformation,ColorPresentation,FoldingRangeKind,FoldingRange,DiagnosticRelatedInformation,DiagnosticSeverity,Diagnostic,Command,TextEdit,TextDocumentEdit,CreateFile,RenameFile,DeleteFile,WorkspaceEdit,main_1=main.RequestType,main_2=main.RequestType0,main_3=main.RequestType1,main_4=main.RequestType2,main_5=main.RequestType3,main_6=main.RequestType4,main_7=main.RequestType5,main_8=main.RequestType6,main_9=main.RequestType7,main_10=main.RequestType8,main_11=main.RequestType9,main_12=main.ResponseError,main_13=main.ErrorCodes,main_14=main.NotificationType,main_15=main.NotificationType0,main_16=main.NotificationType1,main_17=main.NotificationType2,main_18=main.NotificationType3,main_19=main.NotificationType4,main_20=main.NotificationType5,main_21=main.NotificationType6,main_22=main.NotificationType7,main_23=main.NotificationType8,main_24=main.NotificationType9,main_25=main.MessageReader,main_26=main.StreamMessageReader,main_27=main.IPCMessageReader,main_28=main.SocketMessageReader,main_29=main.MessageWriter,main_30=main.StreamMessageWriter,main_31=main.IPCMessageWriter,main_32=main.SocketMessageWriter,main_33=main.Disposable,main_34=main.Event,main_35=main.Emitter,main_36=main.CancellationTokenSource,main_37=main.CancellationToken,main_38=main.NullLogger,main_39=main.Trace,main_40=main.TraceFormat,main_41=main.SetTraceNotification,main_42=main.LogTraceNotification,main_43=main.ConnectionErrors,main_44=main.ConnectionError,main_45=main.ConnectionStrategy,main_46=main.createMessageConnection;!function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return Is.objectLiteral(t)&&Is.number(t.line)&&Is.number(t.character)}}(Position||(Position={})),function(e){e.create=function(e,t,n,r){if(Is.number(e)&&Is.number(t)&&Is.number(n)&&Is.number(r))return{start:Position.create(e,t),end:Position.create(n,r)};if(Position.is(e)&&Position.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},e.is=function(e){var t=e;return Is.objectLiteral(t)&&Position.is(t.start)&&Position.is(t.end)}}(Range||(Range={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Is.defined(t)&&Range.is(t.range)&&(Is.string(t.uri)||Is.undefined(t.uri))}}(Location||(Location={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return Is.defined(t)&&Range.is(t.targetRange)&&Is.string(t.targetUri)&&(Range.is(t.targetSelectionRange)||Is.undefined(t.targetSelectionRange))&&(Range.is(t.originSelectionRange)||Is.undefined(t.originSelectionRange))}}(LocationLink||(LocationLink={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return Is.number(t.red)&&Is.number(t.green)&&Is.number(t.blue)&&Is.number(t.alpha)}}(Color||(Color={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return Range.is(t.range)&&Color.is(t.color)}}(ColorInformation||(ColorInformation={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Is.string(t.label)&&(Is.undefined(t.textEdit)||TextEdit.is(t))&&(Is.undefined(t.additionalTextEdits)||Is.typedArray(t.additionalTextEdits,TextEdit.is))}}(ColorPresentation||(ColorPresentation={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(FoldingRangeKind||(FoldingRangeKind={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return Is.defined(n)&&(o.startCharacter=n),Is.defined(r)&&(o.endCharacter=r),Is.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return Is.number(t.startLine)&&Is.number(t.startLine)&&(Is.undefined(t.startCharacter)||Is.number(t.startCharacter))&&(Is.undefined(t.endCharacter)||Is.number(t.endCharacter))&&(Is.undefined(t.kind)||Is.string(t.kind))}}(FoldingRange||(FoldingRange={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Is.defined(t)&&Location.is(t.location)&&Is.string(t.message)}}(DiagnosticRelatedInformation||(DiagnosticRelatedInformation={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(DiagnosticSeverity||(DiagnosticSeverity={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return Is.defined(n)&&(s.severity=n),Is.defined(r)&&(s.code=r),Is.defined(i)&&(s.source=i),Is.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return Is.defined(t)&&Range.is(t.range)&&Is.string(t.message)&&(Is.number(t.severity)||Is.undefined(t.severity))&&(Is.number(t.code)||Is.string(t.code)||Is.undefined(t.code))&&(Is.string(t.source)||Is.undefined(t.source))&&(Is.undefined(t.relatedInformation)||Is.typedArray(t.relatedInformation,DiagnosticRelatedInformation.is))}}(Diagnostic||(Diagnostic={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return Is.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return Is.defined(t)&&Is.string(t.title)&&Is.string(t.command)}}(Command||(Command={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Is.objectLiteral(t)&&Is.string(t.newText)&&Range.is(t.range)}}(TextEdit||(TextEdit={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Is.defined(t)&&VersionedTextDocumentIdentifier.is(t.textDocument)&&Array.isArray(t.edits)}}(TextDocumentEdit||(TextDocumentEdit={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&Is.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Is.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Is.boolean(t.options.ignoreIfExists)))}}(CreateFile||(CreateFile={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Is.string(t.oldUri)&&Is.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Is.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Is.boolean(t.options.ignoreIfExists)))}}(RenameFile||(RenameFile={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Is.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Is.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Is.boolean(t.options.ignoreIfNotExists)))}}(DeleteFile||(DeleteFile={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every(function(e){return Is.string(e.kind)?CreateFile.is(e)||RenameFile.is(e)||DeleteFile.is(e):TextDocumentEdit.is(e)}))}}(WorkspaceEdit||(WorkspaceEdit={}));var TextDocumentIdentifier,VersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,MarkupContent,CompletionItemKind,InsertTextFormat,CompletionItem,CompletionList,MarkedString,Hover,ParameterInformation,SignatureInformation,DocumentHighlightKind,DocumentHighlight,SymbolKind,SymbolInformation,TextEditChangeImpl=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(TextEdit.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(TextEdit.replace(e,t))},e.prototype.delete=function(e){this.edits.push(TextEdit.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),WorkspaceChange=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach(function(e){if(TextDocumentEdit.is(e)){var n=new TextEditChangeImpl(e.edits);t._textEditChanges[e.textDocument.uri]=n}}):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new TextEditChangeImpl(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(VersionedTextDocumentIdentifier.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new TextEditChangeImpl(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new TextEditChangeImpl(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(CreateFile.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(RenameFile.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(DeleteFile.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Is.defined(t)&&Is.string(t.uri)}}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Is.defined(t)&&Is.string(t.uri)&&(null===t.version||Is.number(t.version))}}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return Is.defined(t)&&Is.string(t.uri)&&Is.string(t.languageId)&&Is.number(t.version)&&Is.string(t.text)}}(TextDocumentItem||(TextDocumentItem={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(MarkupKind||(MarkupKind={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(MarkupKind||(MarkupKind={})),function(e){e.is=function(e){var t=e;return Is.objectLiteral(e)&&MarkupKind.is(t.kind)&&Is.string(t.value)}}(MarkupContent||(MarkupContent={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(CompletionItemKind||(CompletionItemKind={})),function(e){e.PlainText=1,e.Snippet=2}(InsertTextFormat||(InsertTextFormat={})),function(e){e.create=function(e){return{label:e}}}(CompletionItem||(CompletionItem={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(CompletionList||(CompletionList={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Is.string(t)||Is.objectLiteral(t)&&Is.string(t.language)&&Is.string(t.value)}}(MarkedString||(MarkedString={})),function(e){e.is=function(e){var t=e;return!!t&&Is.objectLiteral(t)&&(MarkupContent.is(t.contents)||MarkedString.is(t.contents)||Is.typedArray(t.contents,MarkedString.is))&&(void 0===e.range||Range.is(e.range))}}(Hover||(Hover={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(ParameterInformation||(ParameterInformation={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return Is.defined(t)&&(i.documentation=t),Is.defined(n)?i.parameters=n:i.parameters=[],i}}(SignatureInformation||(SignatureInformation={})),function(e){e.Text=1,e.Read=2,e.Write=3}(DocumentHighlightKind||(DocumentHighlightKind={})),function(e){e.create=function(e,t){var n={range:e};return Is.number(t)&&(n.kind=t),n}}(DocumentHighlight||(DocumentHighlight={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(SymbolKind||(SymbolKind={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(SymbolInformation||(SymbolInformation={}));var CodeActionKind,CodeActionContext,CodeAction,CodeLens,FormattingOptions,DocumentSymbol=function(){};!function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Is.string(t.name)&&Is.number(t.kind)&&Range.is(t.range)&&Range.is(t.selectionRange)&&(void 0===t.detail||Is.string(t.detail))&&(void 0===t.deprecated||Is.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(DocumentSymbol||(DocumentSymbol={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(CodeActionKind||(CodeActionKind={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return Is.defined(t)&&Is.typedArray(t.diagnostics,Diagnostic.is)&&(void 0===t.only||Is.typedArray(t.only,Is.string))}}(CodeActionContext||(CodeActionContext={})),function(e){e.create=function(e,t,n){var r={title:e};return Command.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&Is.string(t.title)&&(void 0===t.diagnostics||Is.typedArray(t.diagnostics,Diagnostic.is))&&(void 0===t.kind||Is.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||Command.is(t.command))&&(void 0===t.edit||WorkspaceEdit.is(t.edit))}}(CodeAction||(CodeAction={})),function(e){e.create=function(e,t){var n={range:e};return Is.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Is.defined(t)&&Range.is(t.range)&&(Is.undefined(t.command)||Command.is(t.command))}}(CodeLens||(CodeLens={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Is.defined(t)&&Is.number(t.tabSize)&&Is.boolean(t.insertSpaces)}}(FormattingOptions||(FormattingOptions={}));var DocumentLink=function(){};!function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Is.defined(t)&&Range.is(t.range)&&(Is.undefined(t.target)||Is.string(t.target))}}(DocumentLink||(DocumentLink={}));var TextDocument,TextDocumentSaveReason,EOL=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new FullTextDocument(e,t,n,r)},e.is=function(e){var t=e;return!!(Is.defined(t)&&Is.string(t.uri)&&(Is.undefined(t.languageId)||Is.string(t.languageId))&&Is.number(t.lineCount)&&Is.func(t.getText)&&Is.func(t.positionAt)&&Is.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n}}(TextDocument||(TextDocument={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(TextDocumentSaveReason||(TextDocumentSaveReason={}));var Is,FullTextDocument=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return Position.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return Position.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Is||(Is={}));var main$1=Object.freeze({get Position(){return Position},get Range(){return Range},get Location(){return Location},get LocationLink(){return LocationLink},get Color(){return Color},get ColorInformation(){return ColorInformation},get ColorPresentation(){return ColorPresentation},get FoldingRangeKind(){return FoldingRangeKind},get FoldingRange(){return FoldingRange},get DiagnosticRelatedInformation(){return DiagnosticRelatedInformation},get DiagnosticSeverity(){return DiagnosticSeverity},get Diagnostic(){return Diagnostic},get Command(){return Command},get TextEdit(){return TextEdit},get TextDocumentEdit(){return TextDocumentEdit},get CreateFile(){return CreateFile},get RenameFile(){return RenameFile},get DeleteFile(){return DeleteFile},get WorkspaceEdit(){return WorkspaceEdit},WorkspaceChange:WorkspaceChange,get TextDocumentIdentifier(){return TextDocumentIdentifier},get VersionedTextDocumentIdentifier(){return VersionedTextDocumentIdentifier},get TextDocumentItem(){return TextDocumentItem},get MarkupKind(){return MarkupKind},get MarkupContent(){return MarkupContent},get CompletionItemKind(){return CompletionItemKind},get InsertTextFormat(){return InsertTextFormat},get CompletionItem(){return CompletionItem},get CompletionList(){return CompletionList},get MarkedString(){return MarkedString},get Hover(){return Hover},get ParameterInformation(){return ParameterInformation},get SignatureInformation(){return SignatureInformation},get DocumentHighlightKind(){return DocumentHighlightKind},get DocumentHighlight(){return DocumentHighlight},get SymbolKind(){return SymbolKind},get SymbolInformation(){return SymbolInformation},get DocumentSymbol(){return DocumentSymbol},get CodeActionKind(){return CodeActionKind},get CodeActionContext(){return CodeActionContext},get CodeAction(){return CodeAction},get CodeLens(){return CodeLens},get FormattingOptions(){return FormattingOptions},get DocumentLink(){return DocumentLink},EOL:EOL,get TextDocument(){return TextDocument},get TextDocumentSaveReason(){return TextDocumentSaveReason}}),is$1=createCommonjsModule(function(e,t){function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>n(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}});unwrapExports(is$1);var is_1$1=is$1.string,is_2$1=is$1.number,is_3$1=is$1.error,is_4$1=is$1.func,is_5$1=is$1.array,is_6$1=is$1.stringArray,is_7=is$1.typedArray,is_8=is$1.thenable,protocol_implementation=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.type=new main.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))});unwrapExports(protocol_implementation);var protocol_implementation_1=protocol_implementation.ImplementationRequest,protocol_typeDefinition=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.type=new main.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))});unwrapExports(protocol_typeDefinition);var protocol_typeDefinition_1=protocol_typeDefinition.TypeDefinitionRequest,protocol_workspaceFolders=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.type=new main.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new main.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))});unwrapExports(protocol_workspaceFolders);var protocol_workspaceFolders_1=protocol_workspaceFolders.WorkspaceFoldersRequest,protocol_workspaceFolders_2=protocol_workspaceFolders.DidChangeWorkspaceFoldersNotification,protocol_configuration=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.type=new main.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))});unwrapExports(protocol_configuration);var protocol_configuration_1=protocol_configuration.ConfigurationRequest,protocol_colorProvider=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.type=new main.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new main.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))});unwrapExports(protocol_colorProvider);var protocol_colorProvider_1=protocol_colorProvider.DocumentColorRequest,protocol_colorProvider_2=protocol_colorProvider.ColorPresentationRequest,protocol_foldingRange=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new main.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))});unwrapExports(protocol_foldingRange);var protocol_foldingRange_1=protocol_foldingRange.FoldingRangeKind,protocol_foldingRange_2=protocol_foldingRange.FoldingRangeRequest,protocol_declaration=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.type=new main.RequestType("textDocument/declaration")}(t.DeclarationRequest||(t.DeclarationRequest={}))});unwrapExports(protocol_declaration);var protocol_declaration_1=protocol_declaration.DeclarationRequest,protocol=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=protocol_implementation.ImplementationRequest,t.TypeDefinitionRequest=protocol_typeDefinition.TypeDefinitionRequest,t.WorkspaceFoldersRequest=protocol_workspaceFolders.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=protocol_workspaceFolders.DidChangeWorkspaceFoldersNotification,t.ConfigurationRequest=protocol_configuration.ConfigurationRequest,t.DocumentColorRequest=protocol_colorProvider.DocumentColorRequest,t.ColorPresentationRequest=protocol_colorProvider.ColorPresentationRequest,t.FoldingRangeRequest=protocol_foldingRange.FoldingRangeRequest,t.DeclarationRequest=protocol_declaration.DeclarationRequest,function(e){e.is=function(e){let t=e;return is$1.string(t.language)||is$1.string(t.scheme)||is$1.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new main.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new main.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new main.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new main.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new main.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new main.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new main.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new main.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new main.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new main.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new main.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new main.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new main.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new main.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new main.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new main.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new main.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new main.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new main.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new main.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new main.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new main.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new main.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new main.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new main.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new main.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new main.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new main.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new main.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new main.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new main.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new main.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new main.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new main.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new main.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new main.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new main.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new main.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new main.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new main.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))});unwrapExports(protocol);var protocol_1=protocol.ImplementationRequest,protocol_2=protocol.TypeDefinitionRequest,protocol_3=protocol.WorkspaceFoldersRequest,protocol_4=protocol.DidChangeWorkspaceFoldersNotification,protocol_5=protocol.ConfigurationRequest,protocol_6=protocol.DocumentColorRequest,protocol_7=protocol.ColorPresentationRequest,protocol_8=protocol.FoldingRangeRequest,protocol_9=protocol.DeclarationRequest,protocol_10=protocol.DocumentFilter,protocol_11=protocol.RegistrationRequest,protocol_12=protocol.UnregistrationRequest,protocol_13=protocol.ResourceOperationKind,protocol_14=protocol.FailureHandlingKind,protocol_15=protocol.TextDocumentSyncKind,protocol_16=protocol.InitializeRequest,protocol_17=protocol.InitializeError,protocol_18=protocol.InitializedNotification,protocol_19=protocol.ShutdownRequest,protocol_20=protocol.ExitNotification,protocol_21=protocol.DidChangeConfigurationNotification,protocol_22=protocol.MessageType,protocol_23=protocol.ShowMessageNotification,protocol_24=protocol.ShowMessageRequest,protocol_25=protocol.LogMessageNotification,protocol_26=protocol.TelemetryEventNotification,protocol_27=protocol.DidOpenTextDocumentNotification,protocol_28=protocol.DidChangeTextDocumentNotification,protocol_29=protocol.DidCloseTextDocumentNotification,protocol_30=protocol.DidSaveTextDocumentNotification,protocol_31=protocol.WillSaveTextDocumentNotification,protocol_32=protocol.WillSaveTextDocumentWaitUntilRequest,protocol_33=protocol.DidChangeWatchedFilesNotification,protocol_34=protocol.FileChangeType,protocol_35=protocol.WatchKind,protocol_36=protocol.PublishDiagnosticsNotification,protocol_37=protocol.CompletionTriggerKind,protocol_38=protocol.CompletionRequest,protocol_39=protocol.CompletionResolveRequest,protocol_40=protocol.HoverRequest,protocol_41=protocol.SignatureHelpRequest,protocol_42=protocol.DefinitionRequest,protocol_43=protocol.ReferencesRequest,protocol_44=protocol.DocumentHighlightRequest,protocol_45=protocol.DocumentSymbolRequest,protocol_46=protocol.WorkspaceSymbolRequest,protocol_47=protocol.CodeActionRequest,protocol_48=protocol.CodeLensRequest,protocol_49=protocol.CodeLensResolveRequest,protocol_50=protocol.DocumentFormattingRequest,protocol_51=protocol.DocumentRangeFormattingRequest,protocol_52=protocol.DocumentOnTypeFormattingRequest,protocol_53=protocol.RenameRequest,protocol_54=protocol.PrepareRenameRequest,protocol_55=protocol.DocumentLinkRequest,protocol_56=protocol.DocumentLinkResolveRequest,protocol_57=protocol.ExecuteCommandRequest,protocol_58=protocol.ApplyWorkspaceEditRequest,main$2=createCommonjsModule(function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCodes=main.ErrorCodes,t.ResponseError=main.ResponseError,t.CancellationToken=main.CancellationToken,t.CancellationTokenSource=main.CancellationTokenSource,t.Disposable=main.Disposable,t.Event=main.Event,t.Emitter=main.Emitter,t.Trace=main.Trace,t.TraceFormat=main.TraceFormat,t.SetTraceNotification=main.SetTraceNotification,t.LogTraceNotification=main.LogTraceNotification,t.RequestType=main.RequestType,t.RequestType0=main.RequestType0,t.NotificationType=main.NotificationType,t.NotificationType0=main.NotificationType0,t.MessageReader=main.MessageReader,t.MessageWriter=main.MessageWriter,t.ConnectionStrategy=main.ConnectionStrategy,t.StreamMessageReader=main.StreamMessageReader,t.StreamMessageWriter=main.StreamMessageWriter,t.IPCMessageReader=main.IPCMessageReader,t.IPCMessageWriter=main.IPCMessageWriter,t.createClientPipeTransport=main.createClientPipeTransport,t.createServerPipeTransport=main.createServerPipeTransport,t.generateRandomPipeName=main.generateRandomPipeName,t.createClientSocketTransport=main.createClientSocketTransport,t.createServerSocketTransport=main.createServerSocketTransport,n(main$1),n(protocol),t.createProtocolConnection=function(e,t,n,r){return main.createMessageConnection(e,t,n,r)}});unwrapExports(main$2);var main_1$1=main$2.ErrorCodes,main_2$1=main$2.ResponseError,main_3$1=main$2.CancellationToken,main_4$1=main$2.CancellationTokenSource,main_5$1=main$2.Disposable,main_6$1=main$2.Event,main_7$1=main$2.Emitter,main_8$1=main$2.Trace,main_9$1=main$2.TraceFormat,main_10$1=main$2.SetTraceNotification,main_11$1=main$2.LogTraceNotification,main_12$1=main$2.RequestType,main_13$1=main$2.RequestType0,main_14$1=main$2.NotificationType,main_15$1=main$2.NotificationType0,main_16$1=main$2.MessageReader,main_17$1=main$2.MessageWriter,main_18$1=main$2.ConnectionStrategy,main_19$1=main$2.StreamMessageReader,main_20$1=main$2.StreamMessageWriter,main_21$1=main$2.IPCMessageReader,main_22$1=main$2.IPCMessageWriter,main_23$1=main$2.createClientPipeTransport,main_24$1=main$2.createServerPipeTransport,main_25$1=main$2.generateRandomPipeName,main_26$1=main$2.createClientSocketTransport,main_27$1=main$2.createServerSocketTransport,main_28$1=main$2.createProtocolConnection,is$2=createCommonjsModule(function(e,t){function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>n(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}});unwrapExports(is$2);var is_1$2=is$2.string,is_2$2=is$2.number,is_3$2=is$2.error,is_4$2=is$2.func,is_5$2=is$2.array,is_6$2=is$2.stringArray,is_7$1=is$2.typedArray,is_8$1=is$2.thenable,protocolCompletionItem=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class extends vscode__default.CompletionItem{constructor(e){super(e)}}});unwrapExports(protocolCompletionItem);var protocolCodeLens=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class extends vscode__default.CodeLens{constructor(e){super(e)}}});unwrapExports(protocolCodeLens);var protocolDocumentLink=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class extends vscode__default.DocumentLink{constructor(e,t){super(e,t)}}});unwrapExports(protocolDocumentLink);var codeConverter=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function r(e){return{uri:t(e.uri)}}function i(e){return{uri:t(e.uri),version:e.version}}function o(e){switch(e){case vscode__default.TextDocumentSaveReason.Manual:return main$2.TextDocumentSaveReason.Manual;case vscode__default.TextDocumentSaveReason.AfterDelay:return main$2.TextDocumentSaveReason.AfterDelay;case vscode__default.TextDocumentSaveReason.FocusOut:return main$2.TextDocumentSaveReason.FocusOut}return main$2.TextDocumentSaveReason.Manual}function s(e){switch(e){case vscode__default.CompletionTriggerKind.TriggerCharacter:return main$2.CompletionTriggerKind.TriggerCharacter;case vscode__default.CompletionTriggerKind.TriggerForIncompleteCompletions:return main$2.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return main$2.CompletionTriggerKind.Invoked}}function a(e){return{line:e.line,character:e.character}}function c(e){if(void 0!==e)return null===e?null:{line:e.line,character:e.character}}function u(e){return null==e?e:{start:c(e.start),end:c(e.end)}}function l(e){switch(e){case vscode__default.DiagnosticSeverity.Error:return main$2.DiagnosticSeverity.Error;case vscode__default.DiagnosticSeverity.Warning:return main$2.DiagnosticSeverity.Warning;case vscode__default.DiagnosticSeverity.Information:return main$2.DiagnosticSeverity.Information;case vscode__default.DiagnosticSeverity.Hint:return main$2.DiagnosticSeverity.Hint}}function d(e){let t=main$2.Diagnostic.create(u(e.range),e.message);return is$2.number(e.severity)&&(t.severity=l(e.severity)),(is$2.number(e.code)||is$2.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),t}function p(e){return null==e?e:e.map(d)}function m(e){return{range:u(e.range),newText:e.newText}}function h(e){let t=main$2.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:r,asVersionedTextDocumentIdentifier:i,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:r(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:i(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:r(e.document),reason:o(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:r(e),position:a(t)}},asCompletionParams:function(e,t,n){return{textDocument:r(e),position:a(t),context:{triggerKind:s(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asWorkerPosition:a,asRange:u,asPosition:c,asDiagnosticSeverity:l,asDiagnostic:d,asDiagnostics:p,asCompletionItem:function(e){let t={label:e.label},n=e instanceof protocolCompletionItem.default?e:void 0;var r,i,o;return e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case main$2.MarkupKind.PlainText:return{kind:e,value:t};case main$2.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n,r=main$2.InsertTextFormat.PlainText,i=void 0;t.textEdit?(n=t.textEdit.newText,i=u(t.textEdit.range)):t.insertText instanceof vscode__default.SnippetString?(r=main$2.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText,t.range&&(i=u(t.range)),e.insertTextFormat=r,t.fromEdit&&n&&i?e.textEdit={newText:n,range:i}:e.insertText=n}(t,e),is$2.number(e.kind)&&(t.kind=(r=e.kind,void 0!==(i=n&&n.originalItemKind)?i:r+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=null==(o=e.additionalTextEdits)?o:o.map(m)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=h(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),n&&(void 0!==n.data&&(t.data=n.data),!0!==n.deprecated&&!1!==n.deprecated||(t.deprecated=n.deprecated)),t},asTextEdit:m,asReferenceParams:function(e,t,n){return{textDocument:r(e),position:a(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeActionContext:function(e){return null==e?e:main$2.CodeActionContext.create(p(e.diagnostics),is$2.string(e.only)?[e.only]:void 0)},asCommand:h,asCodeLens:function(e){let t=main$2.CodeLens.create(u(e.range));return e.command&&(t.command=h(e.command)),e instanceof protocolCodeLens.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:r(e)}},asCodeLensParams:function(e){return{textDocument:r(e)}},asDocumentLink:function(e){let t=main$2.DocumentLink.create(u(e.range));e.target&&(t.target=n(e.target));let r=e instanceof protocolDocumentLink.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:r(e)}}}}});unwrapExports(codeConverter);var codeConverter_1=codeConverter.createConverter,protocolConverter=createCommonjsModule(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.is=function(e){let t=e;return t&&is$2.string(t.language)&&is$2.string(t.value)}}(n||(n={})),t.createConverter=function(e){const t=e||(e=>vscode__default.Uri.parse(e));function r(e){return t(e)}function i(e){return e.map(o)}function o(e){let t=new vscode__default.Diagnostic(c(e.range),e.message,u(e.severity));return(is$2.number(e.code)||is$2.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(s)),t}function s(e){return new vscode__default.DiagnosticRelatedInformation(_(e.location),e.message)}function a(e){if(e)return new vscode__default.Position(e.line,e.character)}function c(e){if(e)return new vscode__default.Range(a(e.start),a(e.end))}function u(e){if(null==e)return vscode__default.DiagnosticSeverity.Error;switch(e){case main$2.DiagnosticSeverity.Error:return vscode__default.DiagnosticSeverity.Error;case main$2.DiagnosticSeverity.Warning:return vscode__default.DiagnosticSeverity.Warning;case main$2.DiagnosticSeverity.Information:return vscode__default.DiagnosticSeverity.Information;case main$2.DiagnosticSeverity.Hint:return vscode__default.DiagnosticSeverity.Hint}return vscode__default.DiagnosticSeverity.Error}function l(e){if(is$2.string(e))return e;switch(e.kind){case main$2.MarkupKind.Markdown:return new vscode__default.MarkdownString(e.value);case main$2.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function d(e){let t=new protocolCompletionItem.default(e.label);e.detail&&(t.detail=e.detail),e.documentation&&(t.documentation=l(e.documentation),t.documentationFormat=is$2.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(t.filterText=e.filterText);let n=function(e){return e.textEdit?e.insertTextFormat===main$2.InsertTextFormat.Snippet?{text:new vscode__default.SnippetString(e.textEdit.newText),range:c(e.textEdit.range),fromEdit:!0}:{text:e.textEdit.newText,range:c(e.textEdit.range),fromEdit:!0}:e.insertText?e.insertTextFormat===main$2.InsertTextFormat.Snippet?{text:new vscode__default.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(n&&(t.insertText=n.text,t.range=n.range,t.fromEdit=n.fromEdit),is$2.number(e.kind)){let[n,i]=(r=e.kind,main$2.CompletionItemKind.Text<=r&&r<=main$2.CompletionItemKind.TypeParameter?[r-1,void 0]:[vscode__default.CompletionItemKind.Text,r]);t.kind=n,i&&(t.originalItemKind=i)}var r;return e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=m(e.additionalTextEdits)),is$2.stringArray(e.commitCharacters)&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=b(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(t.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),void 0!==e.data&&(t.data=e.data),t}function p(e){if(e)return new vscode__default.TextEdit(c(e.range),e.newText)}function m(e){if(e)return e.map(p)}function h(e){return e.map(f)}function f(e){let t=new vscode__default.SignatureInformation(e.label);return e.documentation&&(t.documentation=l(e.documentation)),e.parameters&&(t.parameters=g(e.parameters)),t}function g(e){return e.map(v)}function v(e){let t=new vscode__default.ParameterInformation(e.label);return e.documentation&&(t.documentation=l(e.documentation)),t}function _(e){if(e)return new vscode__default.Location(t(e.uri),c(e.range))}function y(e){if(e)return{targetUri:t(e.targetUri),targetRange:c(e.targetSelectionRange),originSelectionRange:c(e.originSelectionRange),targetSelectionRange:c(e.targetSelectionRange)}}function w(e){if(e)return is$2.array(e)?0===e.length?[]:main$2.LocationLink.is(e[0])?e.map(e=>y(e)):e.map(e=>_(e)):main$2.LocationLink.is(e)?[y(e)]:_(e)}function C(e){let t=new vscode__default.DocumentHighlight(c(e.range));return is$2.number(e.kind)&&(t.kind=E(e.kind)),t}function E(e){switch(e){case main$2.DocumentHighlightKind.Text:return vscode__default.DocumentHighlightKind.Text;case main$2.DocumentHighlightKind.Read:return vscode__default.DocumentHighlightKind.Read;case main$2.DocumentHighlightKind.Write:return vscode__default.DocumentHighlightKind.Write}return vscode__default.DocumentHighlightKind.Text}function R(e){return e<=main$2.SymbolKind.TypeParameter?e-1:vscode__default.SymbolKind.Property}function S(e,n){let r=new vscode__default.SymbolInformation(e.name,R(e.kind),c(e.location.range),e.location.uri?t(e.location.uri):n);return e.containerName&&(r.containerName=e.containerName),r}function $(e){let t=new vscode__default.DocumentSymbol(e.name,e.detail||"",R(e.kind),c(e.range),c(e.selectionRange));if(void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push($(t));t.children=n}return t}function b(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const x=new Map;function T(e){if(null==e)return;let t=x.get(e);if(t)return t;let n=e.split(".");t=vscode__default.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}function D(e){if(!e)return;let t=new protocolCodeLens.default(c(e.range));return e.command&&(t.command=b(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function P(e){if(!e)return;let n=new vscode__default.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach(e=>{main$2.CreateFile.is(e)?n.createFile(t(e.uri),e.options):main$2.RenameFile.is(e)?n.renameFile(t(e.oldUri),t(e.newUri),e.options):main$2.DeleteFile.is(e)?n.deleteFile(t(e.uri),e.options):main$2.TextDocumentEdit.is(e)?n.set(t(e.textDocument.uri),m(e.edits)):console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`)}):e.changes&&Object.keys(e.changes).forEach(r=>{n.set(t(r),m(e.changes[r]))}),n}function k(e){let t=c(e.range),n=e.target?r(e.target):void 0,i=new protocolDocumentLink.default(t,n);return void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function I(e){return new vscode__default.Color(e.red,e.green,e.blue,e.alpha)}function O(e){return new vscode__default.ColorInformation(c(e.range),I(e.color))}function F(e){let t=new vscode__default.ColorPresentation(e.label);return t.additionalTextEdits=m(e.additionalTextEdits),e.textEdit&&(t.textEdit=p(e.textEdit)),t}function N(e){if(e)switch(e){case main$2.FoldingRangeKind.Comment:return vscode__default.FoldingRangeKind.Comment;case main$2.FoldingRangeKind.Imports:return vscode__default.FoldingRangeKind.Imports;case main$2.FoldingRangeKind.Region:return vscode__default.FoldingRangeKind.Region}}function M(e){return new vscode__default.FoldingRange(e.startLine,e.endLine,N(e.kind))}return x.set("",vscode__default.CodeActionKind.Empty),x.set(main$2.CodeActionKind.QuickFix,vscode__default.CodeActionKind.QuickFix),x.set(main$2.CodeActionKind.Refactor,vscode__default.CodeActionKind.Refactor),x.set(main$2.CodeActionKind.RefactorExtract,vscode__default.CodeActionKind.RefactorExtract),x.set(main$2.CodeActionKind.RefactorInline,vscode__default.CodeActionKind.RefactorInline),x.set(main$2.CodeActionKind.RefactorRewrite,vscode__default.CodeActionKind.RefactorRewrite),x.set(main$2.CodeActionKind.Source,vscode__default.CodeActionKind.Source),x.set(main$2.CodeActionKind.SourceOrganizeImports,vscode__default.CodeActionKind.SourceOrganizeImports),{asUri:r,asDiagnostics:i,asDiagnostic:o,asRange:c,asPosition:a,asDiagnosticSeverity:u,asHover:function(e){if(e)return new vscode__default.Hover(function(e){if(is$2.string(e))return new vscode__default.MarkdownString(e);if(n.is(e))return(new vscode__default.MarkdownString).appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let r of e){let e=new vscode__default.MarkdownString;n.is(r)?e.appendCodeblock(r.value,r.language):e.appendMarkdown(r),t.push(e)}return t}{let t;switch(e.kind){case main$2.MarkupKind.Markdown:return new vscode__default.MarkdownString(e.value);case main$2.MarkupKind.PlainText:return(t=new vscode__default.MarkdownString).appendText(e.value),t;default:return(t=new vscode__default.MarkdownString).appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),c(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e))return e.map(d);let t=e;return new vscode__default.CompletionList(t.items.map(d),t.isIncomplete)},asCompletionItem:d,asTextEdit:p,asTextEdits:m,asSignatureHelp:function(e){if(!e)return;let t=new vscode__default.SignatureHelp;return is$2.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,is$2.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=h(e.signatures)),t},asSignatureInformations:h,asSignatureInformation:f,asParameterInformations:g,asParameterInformation:v,asDeclarationResult:function(e){if(e)return w(e)},asDefinitionResult:function(e){if(e)return w(e)},asLocation:_,asReferences:function(e){if(e)return e.map(e=>_(e))},asDocumentHighlights:function(e){if(e)return e.map(C)},asDocumentHighlight:C,asDocumentHighlightKind:E,asSymbolInformations:function(e,t){if(e)return e.map(e=>S(e,t))},asSymbolInformation:S,asDocumentSymbols:function(e){if(null!=e)return e.map($)},asDocumentSymbol:$,asCommand:b,asCommands:function(e){if(e)return e.map(b)},asCodeAction:function(e){if(null==e)return;let t=new vscode__default.CodeAction(e.title);return void 0!==e.kind&&(t.kind=T(e.kind)),e.diagnostics&&(t.diagnostics=i(e.diagnostics)),e.edit&&(t.edit=P(e.edit)),e.command&&(t.command=b(e.command)),t},asCodeActionKind:T,asCodeActionKinds:function(e){if(null!=e)return e.map(e=>T(e))},asCodeLens:D,asCodeLenses:function(e){if(e)return e.map(e=>D(e))},asWorkspaceEdit:P,asDocumentLink:k,asDocumentLinks:function(e){if(e)return e.map(k)},asFoldingRangeKind:N,asFoldingRange:M,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(M)},asColor:I,asColorInformation:O,asColorInformations:function(e){if(Array.isArray(e))return e.map(O)},asColorPresentation:F,asColorPresentations:function(e){if(Array.isArray(e))return e.map(F)}}}});unwrapExports(protocolConverter);var protocolConverter_1=protocolConverter.createConverter,async=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e})),(t>=0||void 0===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}});unwrapExports(async);var async_1=async.Delayer,uuid=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class r extends n{constructor(){super([r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-","4",r._randomHex(),r._randomHex(),r._randomHex(),"-",r._oneOf(r._timeHighBits),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return r._oneOf(r._chars)}}function i(){return new r}r._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],r._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new n(e)},t.generateUuid=function(){return i().asHex()}});unwrapExports(uuid);var uuid_1=uuid.empty,uuid_2=uuid.v4,uuid_3=uuid.isUUID,uuid_4=uuid.parse,uuid_5=uuid.generateUuid,client=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(main$2);class n{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}var r,i,o,s,a;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(r=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(i=t.CloseAction||(t.CloseAction={}));class c{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?r.Continue:r.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return i.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(vscode__default.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),i.DoNotRestart):(this.restarts.shift(),i.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(o=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(s=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(a||(a={}));const u=[main$2.SymbolKind.File,main$2.SymbolKind.Module,main$2.SymbolKind.Namespace,main$2.SymbolKind.Package,main$2.SymbolKind.Class,main$2.SymbolKind.Method,main$2.SymbolKind.Property,main$2.SymbolKind.Field,main$2.SymbolKind.Constructor,main$2.SymbolKind.Enum,main$2.SymbolKind.Interface,main$2.SymbolKind.Function,main$2.SymbolKind.Variable,main$2.SymbolKind.Constant,main$2.SymbolKind.String,main$2.SymbolKind.Number,main$2.SymbolKind.Boolean,main$2.SymbolKind.Array,main$2.SymbolKind.Object,main$2.SymbolKind.Key,main$2.SymbolKind.Null,main$2.SymbolKind.EnumMember,main$2.SymbolKind.Struct,main$2.SymbolKind.Event,main$2.SymbolKind.Operator,main$2.SymbolKind.TypeParameter],l=[main$2.CompletionItemKind.Text,main$2.CompletionItemKind.Method,main$2.CompletionItemKind.Function,main$2.CompletionItemKind.Constructor,main$2.CompletionItemKind.Field,main$2.CompletionItemKind.Variable,main$2.CompletionItemKind.Class,main$2.CompletionItemKind.Interface,main$2.CompletionItemKind.Module,main$2.CompletionItemKind.Property,main$2.CompletionItemKind.Unit,main$2.CompletionItemKind.Value,main$2.CompletionItemKind.Enum,main$2.CompletionItemKind.Keyword,main$2.CompletionItemKind.Snippet,main$2.CompletionItemKind.Color,main$2.CompletionItemKind.File,main$2.CompletionItemKind.Reference,main$2.CompletionItemKind.Folder,main$2.CompletionItemKind.EnumMember,main$2.CompletionItemKind.Constant,main$2.CompletionItemKind.Struct,main$2.CompletionItemKind.Event,main$2.CompletionItemKind.Operator,main$2.CompletionItemKind.TypeParameter];function d(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var p;!function(e){e.is=function(e){let t=e;return t&&is$2.func(t.register)&&is$2.func(t.unregister)&&is$2.func(t.dispose)&&void 0!==t.messages}}(p||(p={}));class m{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const n of e)if(vscode__default.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class h extends m{constructor(e,t){super(e,vscode__default.workspace.onDidOpenTextDocument,main$2.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),m.textDocumentFilter),this._syncedDocuments=t}get messages(){return main$2.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){d(d(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;vscode__default.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&vscode__default.languages.match(n,e)){let n=this._client.clientOptions.middleware,r=e=>{this._client.sendNotification(this._type,this._createParams(e))};n.didOpen?n.didOpen(e,r):r(e),this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class f extends m{constructor(e,t){super(e,vscode__default.workspace.onDidCloseTextDocument,main$2.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),m.textDocumentFilter),this._syncedDocuments=t}get messages(){return main$2.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){d(d(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(e=>{if(vscode__default.languages.match(t,e)&&!this._selectorFilter(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}})}}class g{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return main$2.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){d(d(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==main$2.TextDocumentSyncKind.None&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=vscode__default.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(vscode__default.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===main$2.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(main$2.DidChangeTextDocumentNotification.type,t)):this._client.sendNotification(main$2.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===main$2.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(main$2.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new async.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(main$2.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1))};n.didChange?n.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class v extends m{constructor(e){super(e,vscode__default.workspace.onWillSaveTextDocument,main$2.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>m.textDocumentFilter(e,t.document))}get messages(){return main$2.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){d(d(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:{documentSelector:t}})}}class _{constructor(e){this._client=e,this._selectors=new Map}get messages(){return main$2.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){d(d(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=vscode__default.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(m.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=e=>this._client.sendRequest(main$2.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class y extends m{constructor(e){super(e,vscode__default.workspace.onDidSaveTextDocument,main$2.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),m.textDocumentFilter)}get messages(){return main$2.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){d(d(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class w{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return main$2.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){d(d(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let e of t.registerOptions.watchers){if(!is$2.string(e.globPattern))continue;let t=!0,r=!0,i=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&main$2.WatchKind.Create),r=0!=(e.kind&main$2.WatchKind.Change),i=0!=(e.kind&main$2.WatchKind.Delete));let o=vscode__default.workspace.createFileSystemWatcher(e.globPattern,!t,!r,!i);this.hookListeners(o,t,r,i),n.push(o)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,i){t&&e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:main$2.FileChangeType.Created}),null,i),n&&e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:main$2.FileChangeType.Changed}),null,i),r&&e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:main$2.FileChangeType.Deleted}),null,i)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}}class C{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}t.TextDocumentFeature=C;class E{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}class R extends C{constructor(e){super(e,main$2.CompletionRequest.type)}fillClientCapabilities(e){let t=d(d(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[main$2.MarkupKind.Markdown,main$2.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:l}}initialize(e,t){e.completionProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,r=(e,t,r,i)=>n.sendRequest(main$2.CompletionRequest.type,n.code2ProtocolConverter.asCompletionParams(e,t,r),i).then(n.protocol2CodeConverter.asCompletionResult,e=>(n.logFailedRequest(main$2.CompletionRequest.type,e),Promise.resolve([]))),i=(e,t)=>n.sendRequest(main$2.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e),t).then(n.protocol2CodeConverter.asCompletionItem,t=>(n.logFailedRequest(main$2.CompletionResolveRequest.type,t),Promise.resolve(e))),o=this._client.clientOptions.middleware;return vscode__default.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,n,i)=>o.provideCompletionItem?o.provideCompletionItem(e,t,i,n,r):r(e,t,i,n),resolveCompletionItem:e.resolveProvider?(e,t)=>o.resolveCompletionItem?o.resolveCompletionItem(e,t,i):i(e,t):void 0},...t)}}class S extends C{constructor(e){super(e,main$2.HoverRequest.type)}fillClientCapabilities(e){const t=d(d(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[main$2.MarkupKind.Markdown,main$2.MarkupKind.PlainText]}initialize(e,t){e.hoverProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asHover,e=>(t.logFailedRequest(main$2.HoverRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return vscode__default.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,i)=>r.provideHover?r.provideHover(e,t,i,n):n(e,t,i)})}}class $ extends C{constructor(e){super(e,main$2.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=d(d(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[main$2.MarkupKind.Markdown,main$2.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){e.signatureHelpProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asSignatureHelp,e=>(t.logFailedRequest(main$2.SignatureHelpRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware,i=e.triggerCharacters||[];return vscode__default.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,i)=>r.provideSignatureHelp?r.provideSignatureHelp(e,t,i,n):n(e,t,i)},...i)}}class b extends C{constructor(e){super(e,main$2.DefinitionRequest.type)}fillClientCapabilities(e){let t=d(d(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){e.definitionProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(main$2.DefinitionRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return vscode__default.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,i)=>r.provideDefinition?r.provideDefinition(e,t,i,n):n(e,t,i)})}}class x extends C{constructor(e){super(e,main$2.ReferencesRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){e.referencesProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,i)=>t.sendRequest(main$2.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,n,r),i).then(t.protocol2CodeConverter.asReferences,e=>(t.logFailedRequest(main$2.ReferencesRequest.type,e),Promise.resolve([]))),r=t.clientOptions.middleware;return vscode__default.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,i,o)=>r.provideReferences?r.provideReferences(e,t,i,o,n):n(e,t,i,o)})}}class T extends C{constructor(e){super(e,main$2.DocumentHighlightRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){e.documentHighlightProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDocumentHighlights,e=>(t.logFailedRequest(main$2.DocumentHighlightRequest.type,e),Promise.resolve([]))),r=t.clientOptions.middleware;return vscode__default.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,i)=>r.provideDocumentHighlights?r.provideDocumentHighlights(e,t,i,n):n(e,t,i)})}}class D extends C{constructor(e){super(e,main$2.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=d(d(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:u},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){e.documentSymbolProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(main$2.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),n).then(e=>{if(null!==e){if(0===e.length)return[];{let n=e[0];return main$2.DocumentSymbol.is(n)?t.protocol2CodeConverter.asDocumentSymbols(e):t.protocol2CodeConverter.asSymbolInformations(e)}}},e=>(t.logFailedRequest(main$2.DocumentSymbolRequest.type,e),Promise.resolve([]))),r=t.clientOptions.middleware;return vscode__default.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>r.provideDocumentSymbols?r.provideDocumentSymbols(e,t,n):n(e,t)})}}class P extends E{constructor(e){super(e,main$2.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=d(d(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:u}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(main$2.WorkspaceSymbolRequest.type,{query:e},n).then(t.protocol2CodeConverter.asSymbolInformations,e=>(t.logFailedRequest(main$2.WorkspaceSymbolRequest.type,e),Promise.resolve([]))),r=t.clientOptions.middleware;return vscode__default.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>r.provideWorkspaceSymbols?r.provideWorkspaceSymbols(e,t,n):n(e,t)})}}class k extends C{constructor(e){super(e,main$2.CodeActionRequest.type)}fillClientCapabilities(e){const t=d(d(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",main$2.CodeActionKind.QuickFix,main$2.CodeActionKind.Refactor,main$2.CodeActionKind.RefactorExtract,main$2.CodeActionKind.RefactorInline,main$2.CodeActionKind.RefactorRewrite,main$2.CodeActionKind.Source,main$2.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let n=void 0;is$2.boolean(e.codeActionProvider)||(n=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:uuid.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:n}})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,i)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),context:t.code2ProtocolConverter.asCodeActionContext(r)};return t.sendRequest(main$2.CodeActionRequest.type,o,i).then(e=>{if(null===e)return;let n=[];for(let r of e)main$2.Command.is(r)?n.push(t.protocol2CodeConverter.asCommand(r)):n.push(t.protocol2CodeConverter.asCodeAction(r));return n},e=>(t.logFailedRequest(main$2.CodeActionRequest.type,e),Promise.resolve([])))},r=t.clientOptions.middleware;return vscode__default.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,i,o)=>r.provideCodeActions?r.provideCodeActions(e,t,i,o,n):n(e,t,i,o)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}}class I extends C{constructor(e){super(e,main$2.CodeLensRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){e.codeLensProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(main$2.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),n).then(t.protocol2CodeConverter.asCodeLenses,e=>(t.logFailedRequest(main$2.CodeLensRequest.type,e),Promise.resolve([]))),r=(e,n)=>t.sendRequest(main$2.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),n).then(t.protocol2CodeConverter.asCodeLens,n=>(t.logFailedRequest(main$2.CodeLensResolveRequest.type,n),e)),i=t.clientOptions.middleware;return vscode__default.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>i.provideCodeLenses?i.provideCodeLenses(e,t,n):n(e,t),resolveCodeLens:e.resolveProvider?(e,t)=>i.resolveCodeLens?i.resolveCodeLens(e,t,r):r(e,t):void 0})}}class O extends C{constructor(e){super(e,main$2.DocumentFormattingRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){e.documentFormattingProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{let i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(main$2.DocumentFormattingRequest.type,i,r).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(main$2.DocumentFormattingRequest.type,e),Promise.resolve([])))},r=t.clientOptions.middleware;return vscode__default.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,i)=>r.provideDocumentFormattingEdits?r.provideDocumentFormattingEdits(e,t,i,n):n(e,t,i)})}}class F extends C{constructor(e){super(e,main$2.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentRangeFormattingProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,i)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),options:t.code2ProtocolConverter.asFormattingOptions(r)};return t.sendRequest(main$2.DocumentRangeFormattingRequest.type,o,i).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(main$2.DocumentRangeFormattingRequest.type,e),Promise.resolve([])))},r=t.clientOptions.middleware;return vscode__default.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,i,o)=>r.provideDocumentRangeFormattingEdits?r.provideDocumentRangeFormattingEdits(e,t,i,o,n):n(e,t,i,o)})}}class N extends C{constructor(e){super(e,main$2.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentOnTypeFormattingProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],r=(e,n,r,i,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),ch:r,options:t.code2ProtocolConverter.asFormattingOptions(i)};return t.sendRequest(main$2.DocumentOnTypeFormattingRequest.type,s,o).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(main$2.DocumentOnTypeFormattingRequest.type,e),Promise.resolve([])))},i=t.clientOptions.middleware;return vscode__default.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,n,o,s)=>i.provideOnTypeFormattingEdits?i.provideOnTypeFormattingEdits(e,t,n,o,s,r):r(e,t,n,o,s)},e.firstTriggerCharacter,...n)}}class M extends C{constructor(e){super(e,main$2.RenameRequest.type)}fillClientCapabilities(e){let t=d(d(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let n=Object.assign({},{documentSelector:t});is$2.boolean(e.renameProvider)?n.prepareProvider=!1:n.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:uuid.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,i)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),newName:r};return t.sendRequest(main$2.RenameRequest.type,o,i).then(t.protocol2CodeConverter.asWorkspaceEdit,e=>(t.logFailedRequest(main$2.RenameRequest.type,e),Promise.reject(new Error(e.message))))},r=(e,n,r)=>{let i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n)};return t.sendRequest(main$2.PrepareRenameRequest.type,i,r).then(e=>main$2.Range.is(e)?t.protocol2CodeConverter.asRange(e):e&&e.range?{range:t.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:null,e=>(t.logFailedRequest(main$2.PrepareRenameRequest.type,e),Promise.reject(new Error(e.message))))},i=t.clientOptions.middleware;return vscode__default.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,r,o)=>i.provideRenameEdits?i.provideRenameEdits(e,t,r,o,n):n(e,t,r,o),prepareRename:e.prepareProvider?(e,t,n)=>i.prepareRename?i.prepareRename(e,t,n,r):r(e,t,n):void 0})}}class L extends C{constructor(e){super(e,main$2.DocumentLinkRequest.type)}fillClientCapabilities(e){d(d(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){e.documentLinkProvider&&t&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(main$2.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),n).then(t.protocol2CodeConverter.asDocumentLinks,e=>{t.logFailedRequest(main$2.DocumentLinkRequest.type,e),Promise.resolve(new Error(e.message))}),r=(e,n)=>t.sendRequest(main$2.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),n).then(t.protocol2CodeConverter.asDocumentLink,e=>{t.logFailedRequest(main$2.DocumentLinkResolveRequest.type,e),Promise.resolve(new Error(e.message))}),i=t.clientOptions.middleware;return vscode__default.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>i.provideDocumentLinks?i.provideDocumentLinks(e,t,n):n(e,t),resolveDocumentLink:e.resolveProvider?(e,t)=>i.resolveDocumentLink?i.resolveDocumentLink(e,t,r):r(e,t):void 0})}}class A{constructor(e){this._client=e,this._listeners=new Map}get messages(){return main$2.DidChangeConfigurationNotification.type}fillClientCapabilities(e){d(d(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=vscode__default.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,n),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(void 0!==(n=is$2.string(e)?[e]:e)&&void 0!==t){if(!n.some(e=>t.affectsConfiguration(e)))return}let r=e=>{void 0!==e?this._client.sendNotification(main$2.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(main$2.DidChangeConfigurationNotification.type,{settings:null})},i=this.getMiddleware();i?i(n,r):r(n)}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];r||(r=Object.create(null),n[t[e]]=r),n=r}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let i=0;i<e.length;i++){let o=e[i],s=o.indexOf("."),a=null;if(a=s>=0?vscode__default.workspace.getConfiguration(o.substr(0,s),n).get(o.substr(s+1)):vscode__default.workspace.getConfiguration(o,n)){let n=e[i].split(".");t(r,n)[n[n.length-1]]=a}}return r}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class q{constructor(e){this._client=e,this._commands=new Map}get messages(){return main$2.ExecuteCommandRequest.type}fillClientCapabilities(e){d(d(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let e=[];for(const r of t.registerOptions.commands)e.push(vscode__default.commands.registerCommand(r,(...e)=>{let t={command:r,arguments:e};return n.sendRequest(main$2.ExecuteCommandRequest.type,t).then(void 0,e=>{n.logFailedRequest(main$2.ExecuteCommandRequest.type,e)})}));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(e=>e.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())}),this._commands.clear()}}!function(e){e.is=function(e){return e&&main$2.MessageReader.is(e.reader)&&main$2.MessageWriter.is(e.writer)}}(t.MessageTransports||(t.MessageTransports={}));class j{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}t.BaseLanguageClient=class{constructor(e,t,n){this._traceFormat=main$2.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||o.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new c(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=a.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new async.Delayer(250),this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new j(e,t)}),this._onStop=void 0,this._telemetryEmitter=new main$2.Emitter,this._stateChangeEmitter=new main$2.Emitter,this._tracer={log:(e,t)=>{is$2.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=codeConverter.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=protocolConverter.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===a.Running?s.Running:this.state===a.Starting?s.Starting:s.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${is$2.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${is$2.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${is$2.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${is$2.string(e)?e:e.method} failed.`,t),t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=vscode__default.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new c(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof main$2.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?is$2.string(e.stack)?e.stack:e.message:is$2.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=o.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=o.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=o.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===a.Initial||this.state===a.Stopping||this.state===a.Stopped}needsStop(){return this.state===a.Starting||this.state===a.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===a.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new j(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?vscode__default.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):vscode__default.languages.createDiagnosticCollection()),this.state=a.Starting,this.resolveConnection().then(e=>(e.onLogMessage(e=>{switch(e.type){case main$2.MessageType.Error:this.error(e.message);break;case main$2.MessageType.Warning:this.warn(e.message);break;case main$2.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}}),e.onShowMessage(e=>{switch(e.type){case main$2.MessageType.Error:vscode__default.window.showErrorMessage(e.message);break;case main$2.MessageType.Warning:vscode__default.window.showWarningMessage(e.message);break;case main$2.MessageType.Info:vscode__default.window.showInformationMessage(e.message);break;default:vscode__default.window.showInformationMessage(e.message)}}),e.onRequest(main$2.ShowMessageRequest.type,e=>{let t;switch(e.type){case main$2.MessageType.Error:t=vscode__default.window.showErrorMessage;break;case main$2.MessageType.Warning:t=vscode__default.window.showWarningMessage;break;case main$2.MessageType.Info:t=vscode__default.window.showInformationMessage;break;default:t=vscode__default.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)}),e.onTelemetry(e=>{this._telemetryEmitter.fire(e)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=a.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),vscode__default.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new vscode__default.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),r={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(vscode__default.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:is$2.func(t)?t():t,trace:main$2.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(r),e.initialize(r).then(t=>{this._resolvedConnection=e,this._initializeResult=t,this.state=a.Running;let n=void 0;return is$2.number(t.capabilities.textDocumentSync)?n=t.capabilities.textDocumentSync===main$2.TextDocumentSyncKind.None?{openClose:!1,change:main$2.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(n=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:n}),e.onDiagnostics(e=>this.handleDiagnostics(e)),e.onRequest(main$2.RegistrationRequest.type,e=>this.handleRegistrationRequest(e)),e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e)),e.onRequest(main$2.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e)),e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e)),e.onRequest(main$2.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e)),e.sendNotification(main$2.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t}).then(void 0,t=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof main$2.ResponseError&&t.data&&t.data.retry?vscode__default.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(n=>{n&&"retry"===n.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))}):(t&&t.message&&vscode__default.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t))})}_clientGetRootPath(){let e=vscode__default.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===a.Stopping&&this._onStop?this._onStop:(this.state=a.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=a.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=a.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(e=>e.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(e=>e.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(e=>{this.isConnectionActive()&&e.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},e=>{this.error("Notify file events failed.",e)})})}forceDocumentSync(){this._dynamicFeatures.get(main$2.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware.handleDiagnostics;r?r(t,n,(e,t)=>this.setDiagnostics(e,t)):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(r=>(function(e,t,r,i){let o=new n,s=main$2.createProtocolConnection(e,t,o);return s.onError(e=>{r(e[0],e[1],e[2])}),s.onClose(i),{listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(is$2.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(is$2.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(is$2.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(is$2.string(e)?e:e.method,t),trace:(e,t,n)=>{const r={sendNotification:!1,traceFormat:main$2.TraceFormat.Text};void 0===n?s.trace(e,t,r):(is$2.boolean(n),s.trace(e,t,n))},initialize:e=>s.sendRequest(main$2.InitializeRequest.type,e),shutdown:()=>s.sendRequest(main$2.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(main$2.ExitNotification.type),onLogMessage:e=>s.onNotification(main$2.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(main$2.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(main$2.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(main$2.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(main$2.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(main$2.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(main$2.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(main$2.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(main$2.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(main$2.PublishDiagnosticsNotification.type,e),dispose:()=>s.dispose()}})(r.reader,r.writer,e,t))}handleConnectionClosed(){if(this.state===a.Stopping||this.state===a.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=i.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===i.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=a.Stopped,this.cleanUp(!1,!0)):e===i.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=a.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===r.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){vscode__default.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=vscode__default.workspace.getConfiguration(this._id),r=main$2.Trace.Off,i=main$2.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?r=main$2.Trace.fromString(e):(r=main$2.Trace.fromString(n.get("trace.server.verbosity","off")),i=main$2.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=r,this._traceFormat=i,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=is$2.array(n)?n:[n])&&this._dynamicFeatures.get(main$2.DidChangeWatchedFilesNotification.type.method).registerRaw(uuid.generateUuid(),t)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),p.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new A(this)),this.registerFeature(new h(this,this._syncedDocuments)),this.registerFeature(new g(this)),this.registerFeature(new v(this)),this.registerFeature(new _(this)),this.registerFeature(new y(this)),this.registerFeature(new f(this,this._syncedDocuments)),this.registerFeature(new w(this,e=>this.notifyFileEvent(e))),this.registerFeature(new R(this)),this.registerFeature(new S(this)),this.registerFeature(new $(this)),this.registerFeature(new b(this)),this.registerFeature(new x(this)),this.registerFeature(new T(this)),this.registerFeature(new D(this)),this.registerFeature(new P(this)),this.registerFeature(new k(this)),this.registerFeature(new I(this)),this.registerFeature(new O(this)),this.registerFeature(new F(this)),this.registerFeature(new N(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new q(this))}fillInitializeParams(e){for(let t of this._features)is$2.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};d(e,"workspace").applyEdit=!0;let t=d(d(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[main$2.ResourceOperationKind.Create,main$2.ResourceOperationKind.Rename,main$2.ResourceOperationKind.Delete],t.failureHandling=main$2.FailureHandlingKind.TextOnlyTransactional,d(d(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions||{};r.documentSelector=r.documentSelector||this._clientOptions.documentSelector;const i={id:t.id,registerOptions:r};e.register(this._method2Message.get(t.method),i)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;vscode__default.workspace.textDocuments.forEach(e=>n.set(e.uri.toString(),e));let r=!1;if(t.documentChanges)for(const e of t.documentChanges)if(main$2.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=n.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){r=!0;break}}return r?Promise.resolve({applied:!1}):vscode__default.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>({applied:e}))}logFailedRequest(e,t){t instanceof main$2.ResponseError&&t.code===main$2.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}}});unwrapExports(client);var client_1=client.ErrorAction,client_2=client.CloseAction,client_3=client.RevealOutputChannelOn,client_4=client.State,client_5=client.TextDocumentFeature,client_6=client.MessageTransports,client_7=client.BaseLanguageClient,colorProvider=createCommonjsModule(function(e,t){function n(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Object.defineProperty(t,"__esModule",{value:!0});t.ColorProviderFeature=class extends client.TextDocumentFeature{constructor(e){super(e,main$2.DocumentColorRequest.type)}fillClientCapabilities(e){n(n(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;const n=e.colorProvider,r=is$2.string(n.id)&&n.id.length>0?n.id:uuid.generateUuid(),i=n.documentSelector||t;i&&this.register(this.messages,{id:r,registerOptions:Object.assign({},{documentSelector:i})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(n.document),range:t.code2ProtocolConverter.asRange(n.range)};return t.sendRequest(main$2.ColorPresentationRequest.type,i,r).then(this.asColorPresentations.bind(this),e=>(t.logFailedRequest(main$2.ColorPresentationRequest.type,e),Promise.resolve(null)))},r=(e,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(main$2.DocumentColorRequest.type,r,n).then(this.asColorInformations.bind(this),e=>(t.logFailedRequest(main$2.ColorPresentationRequest.type,e),Promise.resolve(null)))},i=t.clientOptions.middleware;return vscode__default.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,r)=>i.provideColorPresentations?i.provideColorPresentations(e,t,r,n):n(e,t,r),provideDocumentColors:(e,t)=>i.provideDocumentColors?i.provideDocumentColors(e,t,r):r(e,t)})}asColor(e){return new vscode__default.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(e=>new vscode__default.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(e=>{let t=new vscode__default.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t}):[]}}});unwrapExports(colorProvider);var colorProvider_1=colorProvider.ColorProviderFeature,configuration=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(main$2.ConfigurationRequest.type,(t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)})}getConfiguration(e,t){let n=null;if(t){let r=t.lastIndexOf(".");if(-1===r)n=vscode__default.workspace.getConfiguration(void 0,e).get(t);else{let e=vscode__default.workspace.getConfiguration(t.substr(0,r));e&&(n=e.get(t.substr(r+1)))}}else{let t=vscode__default.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=t.get(e))}return n||null}}});unwrapExports(configuration);var configuration_1=configuration.ConfigurationFeature,implementation=createCommonjsModule(function(e,t){function n(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Object.defineProperty(t,"__esModule",{value:!0});t.ImplementationFeature=class extends client.TextDocumentFeature{constructor(e){super(e,main$2.ImplementationRequest.type)}fillClientCapabilities(e){let t=n(n(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.implementationProvider)if(!0===e.implementationProvider){if(!t)return;this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.implementationProvider,r=is$2.string(n.id)&&n.id.length>0?n.id:uuid.generateUuid(),i=n.documentSelector||t;i&&this.register(this.messages,{id:r,registerOptions:Object.assign({},{documentSelector:i})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(main$2.ImplementationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return vscode__default.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,i)=>r.provideImplementation?r.provideImplementation(e,t,i,n):n(e,t,i)})}}});unwrapExports(implementation);var implementation_1=implementation.ImplementationFeature,typeDefinition=createCommonjsModule(function(e,t){function n(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Object.defineProperty(t,"__esModule",{value:!0});t.TypeDefinitionFeature=class extends client.TextDocumentFeature{constructor(e){super(e,main$2.TypeDefinitionRequest.type)}fillClientCapabilities(e){n(n(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=n(n(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.typeDefinitionProvider)if(!0===e.typeDefinitionProvider){if(!t)return;this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.typeDefinitionProvider,r=is$2.string(n.id)&&n.id.length>0?n.id:uuid.generateUuid(),i=n.documentSelector||t;i&&this.register(this.messages,{id:r,registerOptions:Object.assign({},{documentSelector:i})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(main$2.TypeDefinitionRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return vscode__default.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,i)=>r.provideTypeDefinition?r.provideTypeDefinition(e,t,i,n):n(e,t,i)})}}});unwrapExports(typeDefinition);var typeDefinition_1=typeDefinition.TypeDefinitionFeature,workspaceFolders=createCommonjsModule(function(e,t){function n(e,t){if(void 0!==e)return e[t]}Object.defineProperty(t,"__esModule",{value:!0});t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return main$2.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=vscode__default.workspace.workspaceFolders;e.workspaceFolders=void 0===t?null:t.map(e=>this.asProtocol(e))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(main$2.WorkspaceFoldersRequest.type,e=>{let n=()=>{let e=vscode__default.workspace.workspaceFolders;return void 0===e?null:e.map(e=>this.asProtocol(e))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()});let r,i=n(n(n(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof i?r=i:!0===i&&(r=uuid.generateUuid()),r&&this.register(this.messages,{id:r,registerOptions:void 0})}register(e,t){let n=t.id,r=this._client,i=vscode__default.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{let t={event:{added:e.added.map(e=>this.asProtocol(e)),removed:e.removed.map(e=>this.asProtocol(e))}};this._client.sendNotification(main$2.DidChangeWorkspaceFoldersNotification.type,t)},n=r.clientOptions.middleware.workspace;n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(n,i)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}});unwrapExports(workspaceFolders);var workspaceFolders_1=workspaceFolders.WorkspaceFoldersFeature,foldingRange=createCommonjsModule(function(e,t){function n(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Object.defineProperty(t,"__esModule",{value:!0});t.FoldingRangeFeature=class extends client.TextDocumentFeature{constructor(e){super(e,main$2.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=n(n(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;const n=e.foldingRangeProvider,r=is$2.string(n.id)&&n.id.length>0?n.id:uuid.generateUuid(),i=n.documentSelector||t;i&&this.register(this.messages,{id:r,registerOptions:Object.assign({},{documentSelector:i})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(main$2.FoldingRangeRequest.type,i,r).then(this.asFoldingRanges.bind(this),e=>(t.logFailedRequest(main$2.FoldingRangeRequest.type,e),Promise.resolve(null)))},r=t.clientOptions.middleware;return vscode__default.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges:(e,t,i)=>r.provideFoldingRanges?r.provideFoldingRanges(e,t,i,n):n(e,0,i)})}asFoldingRangeKind(e){if(e)switch(e){case main$2.FoldingRangeKind.Comment:return vscode__default.FoldingRangeKind.Comment;case main$2.FoldingRangeKind.Imports:return vscode__default.FoldingRangeKind.Imports;case main$2.FoldingRangeKind.Region:return vscode__default.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(e=>new vscode__default.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind))):[]}}});unwrapExports(foldingRange);var foldingRange_1=foldingRange.FoldingRangeFeature,declaration=createCommonjsModule(function(e,t){function n(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Object.defineProperty(t,"__esModule",{value:!0});t.DeclarationFeature=class extends client.TextDocumentFeature{constructor(e){super(e,main$2.DeclarationRequest.type)}fillClientCapabilities(e){let t=n(n(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.declarationProvider)if(!0===e.declarationProvider){if(!t)return;this.register(this.messages,{id:uuid.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.declarationProvider,r=is$2.string(n.id)&&n.id.length>0?n.id:uuid.generateUuid(),i=n.documentSelector||t;i&&this.register(this.messages,{id:r,registerOptions:Object.assign({},{documentSelector:i})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(main$2.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDeclarationResult,e=>(t.logFailedRequest(main$2.DeclarationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return vscode__default.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(e,t,i)=>r.provideDeclaration?r.provideDeclaration(e,t,i,n):n(e,t,i)})}}});unwrapExports(declaration);var declaration_1=declaration.DeclarationFeature,processes=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="win32"===process.platform,r="darwin"===process.platform,i="linux"===process.platform;t.terminate=function(e,t){if(n)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),child_process.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!i&&!r)return e.kill("SIGKILL"),!0;try{var o=path$1.join(__dirname,"terminateProcess.sh");return!child_process.spawnSync(o,[e.pid.toString()]).error}catch(e){return!1}}}});unwrapExports(processes);var processes_1=processes.terminate,main$3=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=child_process;!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(client);const r="^1.30";var i,o,s,a,c,u,l;!function(e){e.is=function(e){return is$2.string(e.command)}}(i||(i={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(o=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===o.socket&&is$2.number(t.port)}}(s||(s={})),function(e){e.is=function(e){return is$2.string(e.module)}}(a||(a={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(c||(c={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(u||(u={}));t.LanguageClient=class extends client.BaseLanguageClient{constructor(e,t,n,r,i){let o,s,a,c,u;is$2.string(t)?(o=e,s=t,a=n,c=r,u=!!i):(o=e.toLowerCase(),s=e,a=t,c=n,u=r),void 0===u&&(u=!1),super(o,s,c),this._serverOptions=a,this._forceDebug=u;try{this.checkVersion()}catch(e){throw is$2.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){let e=semver.parse(vscode__default.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${vscode__default.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!semver.satisfies(e,r))throw new Error(`The language client requires VS Code version ${r} but received version ${vscode__default.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),processes.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t,r=this._serverOptions;if(is$2.func(r))return r().then(t=>{if(client.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(c.is(t))return this._isDetached=!!t.detached,{reader:new main$2.StreamMessageReader(t.reader),writer:new main$2.StreamMessageWriter(t.writer)};{let n;return u.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),{reader:new main$2.StreamMessageReader(n.stdout),writer:new main$2.StreamMessageWriter(n.stdin)}}});let l=r;return t=l.run||l.debug?"object"==typeof v8debug||this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some(e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e))}()?l.debug:l.run:r,this._getServerWorkingDir(t.options).then(c=>{if(a.is(t)&&t.module){let r=t,i=r.transport||o.stdio;if(!r.runtime){let t=void 0;return new Promise((a,u)=>{let l=r.args&&r.args.slice()||[];i===o.ipc?l.push("--node-ipc"):i===o.stdio?l.push("--stdio"):i===o.pipe?(t=main$2.generateRandomPipeName(),l.push(`--pipe=${t}`)):s.isSocket(i)&&l.push(`--socket=${i.port}`),l.push(`--clientProcessId=${process.pid.toString()}`);let d=r.options||Object.create(null);if(d.execArgv=d.execArgv||[],d.cwd=c,d.silent=!0,i===o.ipc||i===o.stdio){let t=n.fork(r.module,l||[],d);this._serverProcess=t,t.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),i===o.ipc?(t.stdout.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),a({reader:new main$2.IPCMessageReader(this._serverProcess),writer:new main$2.IPCMessageWriter(this._serverProcess)})):a({reader:new main$2.StreamMessageReader(t.stdout),writer:new main$2.StreamMessageWriter(t.stdin)})}else i===o.pipe?main$2.createClientPipeTransport(t).then(t=>{let i=n.fork(r.module,l||[],d);this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),t.onConnected().then(e=>{a({reader:e[0],writer:e[1]})})}):s.isSocket(i)&&main$2.createClientSocketTransport(i.port).then(t=>{let i=n.fork(r.module,l||[],d);this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),t.onConnected().then(e=>{a({reader:e[0],writer:e[1]})})})})}{let t=[],a=r.options||Object.create(null);a.execArgv&&a.execArgv.forEach(e=>t.push(e)),t.push(r.module),r.args&&r.args.forEach(e=>t.push(e));let u=Object.create(null);u.cwd=c,u.env=function(e){if(!e)return process.env;let t=Object.create(null);return Object.keys(process.env).forEach(e=>t[e]=process.env[e]),Object.keys(e).forEach(n=>t[n]=e[n]),t}(a.env);let l=void 0;if(i===o.ipc?(u.stdio=[null,null,null,"ipc"],t.push("--node-ipc")):i===o.stdio?t.push("--stdio"):i===o.pipe?(l=main$2.generateRandomPipeName(),t.push(`--pipe=${l}`)):s.isSocket(i)&&t.push(`--socket=${i.port}`),t.push(`--clientProcessId=${process.pid.toString()}`),i===o.ipc||i===o.stdio){let s=n.spawn(r.runtime,t,u);return s&&s.pid?(this._serverProcess=s,s.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),i===o.ipc?(s.stdout.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),Promise.resolve({reader:new main$2.IPCMessageReader(s),writer:new main$2.IPCMessageWriter(s)})):Promise.resolve({reader:new main$2.StreamMessageReader(s.stdout),writer:new main$2.StreamMessageWriter(s.stdin)})):Promise.reject(`Launching server using runtime ${r.runtime} failed.`)}if(i==o.pipe)return main$2.createClientPipeTransport(l).then(i=>{let o=n.spawn(r.runtime,t,u);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${r.runtime} failed.`)});if(s.isSocket(i))return main$2.createClientSocketTransport(i.port).then(i=>{let o=n.spawn(r.runtime,t,u);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${r.runtime} failed.`)})}}else if(i.is(t)&&t.command){let r=t,i=r.args||[],o=Object.assign({},r.options);o.cwd=o.cwd||c;let s=n.spawn(r.command,i,o);return s&&s.pid?(s.stderr.on("data",t=>this.outputChannel.append(is$2.string(t)?t:t.toString(e))),this._serverProcess=s,this._isDetached=!!o.detached,Promise.resolve({reader:new main$2.StreamMessageReader(s.stdout),writer:new main$2.StreamMessageWriter(s.stdin)})):Promise.reject(`Launching server using command ${r.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(r,null,4)))})}registerProposedFeatures(){this.registerFeatures(l.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new configuration.ConfigurationFeature(this)),this.registerFeature(new typeDefinition.TypeDefinitionFeature(this)),this.registerFeature(new implementation.ImplementationFeature(this)),this.registerFeature(new colorProvider.ColorProviderFeature(this)),this.registerFeature(new workspaceFolders.WorkspaceFoldersFeature(this)),this.registerFeature(new foldingRange.FoldingRangeFeature(this)),this.registerFeature(new declaration.DeclarationFeature(this))}_mainGetRootPath(){let e=vscode__default.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(e=>{fs$1.lstat(t,(n,r)=>{e(!n&&r.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return vscode__default.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new vscode__default.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,r=n?vscode__default.workspace.getConfiguration(t).get(n,!1):vscode__default.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start():!r&&this._client.needsStop()&&this._client.stop()}},function(e){e.createAll=function(e){return[]}}(l=t.ProposedFeatures||(t.ProposedFeatures={}))});unwrapExports(main$3);var main_1$2=main$3.TextDocumentFeature,main_2$2=main$3.RevealOutputChannelOn,main_3$2=main$3.ErrorAction,main_4$2=main$3.CloseAction,main_5$2=main$3.ErrorCodes,main_6$2=main$3.ResponseError,main_7$2=main$3.CancellationToken,main_8$2=main$3.CancellationTokenSource,main_9$2=main$3.Disposable,main_10$2=main$3.Event,main_11$2=main$3.Emitter,main_12$2=main$3.Trace,main_13$2=main$3.TraceFormat,main_14$2=main$3.SetTraceNotification,main_15$2=main$3.LogTraceNotification,main_16$2=main$3.RequestType,main_17$2=main$3.RequestType0,main_18$2=main$3.NotificationType,main_19$2=main$3.NotificationType0,main_20$2=main$3.MessageReader,main_21$2=main$3.MessageWriter,main_22$2=main$3.ConnectionStrategy,main_23$2=main$3.StreamMessageReader,main_24$2=main$3.StreamMessageWriter,main_25$2=main$3.IPCMessageReader,main_26$2=main$3.IPCMessageWriter,main_27$2=main$3.createClientPipeTransport,main_28$2=main$3.createServerPipeTransport,main_29$1=main$3.generateRandomPipeName,main_30$1=main$3.createClientSocketTransport,main_31$1=main$3.createServerSocketTransport,main_32$1=main$3.Position,main_33$1=main$3.Range,main_34$1=main$3.Location,main_35$1=main$3.LocationLink,main_36$1=main$3.Color,main_37$1=main$3.ColorInformation,main_38$1=main$3.ColorPresentation,main_39$1=main$3.FoldingRangeKind,main_40$1=main$3.FoldingRange,main_41$1=main$3.DiagnosticRelatedInformation,main_42$1=main$3.DiagnosticSeverity,main_43$1=main$3.Diagnostic,main_44$1=main$3.Command,main_45$1=main$3.TextEdit,main_46$1=main$3.TextDocumentEdit,main_47=main$3.CreateFile,main_48=main$3.RenameFile,main_49=main$3.DeleteFile,main_50=main$3.WorkspaceEdit,main_51=main$3.WorkspaceChange,main_52=main$3.TextDocumentIdentifier,main_53=main$3.VersionedTextDocumentIdentifier,main_54=main$3.TextDocumentItem,main_55=main$3.MarkupKind,main_56=main$3.MarkupContent,main_57=main$3.CompletionItemKind,main_58=main$3.InsertTextFormat,main_59=main$3.CompletionItem,main_60=main$3.CompletionList,main_61=main$3.MarkedString,main_62=main$3.Hover,main_63=main$3.ParameterInformation,main_64=main$3.SignatureInformation,main_65=main$3.DocumentHighlightKind,main_66=main$3.DocumentHighlight,main_67=main$3.SymbolKind,main_68=main$3.SymbolInformation,main_69=main$3.DocumentSymbol,main_70=main$3.CodeActionKind,main_71=main$3.CodeActionContext,main_72=main$3.CodeAction,main_73=main$3.CodeLens,main_74=main$3.FormattingOptions,main_75=main$3.DocumentLink,main_76=main$3.EOL,main_77=main$3.TextDocument,main_78=main$3.TextDocumentSaveReason,main_79=main$3.ImplementationRequest,main_80=main$3.TypeDefinitionRequest,main_81=main$3.WorkspaceFoldersRequest,main_82=main$3.DidChangeWorkspaceFoldersNotification,main_83=main$3.ConfigurationRequest,main_84=main$3.DocumentColorRequest,main_85=main$3.ColorPresentationRequest,main_86=main$3.FoldingRangeRequest,main_87=main$3.DeclarationRequest,main_88=main$3.DocumentFilter,main_89=main$3.RegistrationRequest,main_90=main$3.UnregistrationRequest,main_91=main$3.ResourceOperationKind,main_92=main$3.FailureHandlingKind,main_93=main$3.TextDocumentSyncKind,main_94=main$3.InitializeRequest,main_95=main$3.InitializeError,main_96=main$3.InitializedNotification,main_97=main$3.ShutdownRequest,main_98=main$3.ExitNotification,main_99=main$3.DidChangeConfigurationNotification,main_100=main$3.MessageType,main_101=main$3.ShowMessageNotification,main_102=main$3.ShowMessageRequest,main_103=main$3.LogMessageNotification,main_104=main$3.TelemetryEventNotification,main_105=main$3.DidOpenTextDocumentNotification,main_106=main$3.DidChangeTextDocumentNotification,main_107=main$3.DidCloseTextDocumentNotification,main_108=main$3.DidSaveTextDocumentNotification,main_109=main$3.WillSaveTextDocumentNotification,main_110=main$3.WillSaveTextDocumentWaitUntilRequest,main_111=main$3.DidChangeWatchedFilesNotification,main_112=main$3.FileChangeType,main_113=main$3.WatchKind,main_114=main$3.PublishDiagnosticsNotification,main_115=main$3.CompletionTriggerKind,main_116=main$3.CompletionRequest,main_117=main$3.CompletionResolveRequest,main_118=main$3.HoverRequest,main_119=main$3.SignatureHelpRequest,main_120=main$3.DefinitionRequest,main_121=main$3.ReferencesRequest,main_122=main$3.DocumentHighlightRequest,main_123=main$3.DocumentSymbolRequest,main_124=main$3.WorkspaceSymbolRequest,main_125=main$3.CodeActionRequest,main_126=main$3.CodeLensRequest,main_127=main$3.CodeLensResolveRequest,main_128=main$3.DocumentFormattingRequest,main_129=main$3.DocumentRangeFormattingRequest,main_130=main$3.DocumentOnTypeFormattingRequest,main_131=main$3.RenameRequest,main_132=main$3.PrepareRenameRequest,main_133=main$3.DocumentLinkRequest,main_134=main$3.DocumentLinkResolveRequest,main_135=main$3.ExecuteCommandRequest,main_136=main$3.ApplyWorkspaceEditRequest,main_137=main$3.createProtocolConnection,main_138=main$3.TransportKind,main_139=main$3.LanguageClient,main_140=main$3.SettingMonitor,main_141=main$3.ProposedFeatures;const TypeCoverageRequest={type:new main_16$2("textDocument/typeCoverage")},ConnectionStatusNotification={type:new main_18$2("telemetry/connectionStatus")};class TypeCoverageProvider{constructor(e){_defineProperty(this,"_client",void 0),_defineProperty(this,"_listeners",[]),_defineProperty(this,"onConnectionStatus",e=>(this._listeners.push(e),{dispose:()=>{const t=this._listeners.findIndex(t=>e===t);-1!==t&&this._listeners.splice(t,1)}})),_defineProperty(this,"provideTypeCoverage",e=>{const{middleware:t}=this._client.clientOptions;return t&&t.provideTypeCoverage?t.provideTypeCoverage(e,this._provideTypeCoverage):this._provideTypeCoverage(e)}),_defineProperty(this,"_provideTypeCoverage",e=>{const t=this._client;return t.sendRequest(TypeCoverageRequest.type,{textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)}).then(e=>e,e=>(t.logFailedRequest(TypeCoverageRequest.type,e),Promise.resolve(null)))}),_defineProperty(this,"_handleConnectionStatus",e=>{this._listeners.forEach(t=>{t(e)})}),this._client=e,this._client.onNotification(ConnectionStatusNotification.type,this._handleConnectionStatus)}}class TypeCoverage{constructor(e,t,n){_defineProperty(this,"_subscriptions",[]),_defineProperty(this,"_diagnostics",void 0),_defineProperty(this,"_documentSelector",void 0),_defineProperty(this,"_provider",void 0),_defineProperty(this,"_options",void 0),_defineProperty(this,"_state",void 0),_defineProperty(this,"_handleConnectionStatus",e=>{this._setState({isConnected:e.isConnected}),e.isConnected&&vscode.window.activeTextEditor&&this._computeCoverage(vscode.window.activeTextEditor.document)}),this._provider=t,this._options=n,this._documentSelector=e,this._state={showUncovered:n.defaultShowUncovered,activeDocument:null,coverage:null,pendingRequest:null,isConnected:!1},this._diagnostics=vscode.languages.createDiagnosticCollection("flow_coverage"),this._subscriptions.push(this._provider.onConnectionStatus(this._handleConnectionStatus),this._diagnostics,vscode.commands.registerCommand(n.command,()=>{this._setState({showUncovered:!this._state.showUncovered})}),vscode.workspace.onDidSaveTextDocument(e=>this._computeCoverage(e)),vscode.window.onDidChangeActiveTextEditor(e=>{this._computeCoverage(e?e.document:null)})),vscode.window.activeTextEditor&&this._computeCoverage(vscode.window.activeTextEditor.document)}dispose(){this._subscriptions.forEach(e=>e.dispose()),this._state.pendingRequest&&this._state.pendingRequest.cancel()}render(){this._renderCoverage(),this._renderDiagnostics()}_renderCoverage(){const{_state:e}=this,{coverage:t}=e;if(e.activeDocument&&e.isConnected){if(!t&&e.pendingRequest)return void this._options.onChange({computing:!0,coveredPercent:null,showingUncovered:e.showUncovered});if(t){const n=Boolean(e.pendingRequest);return void this._options.onChange({computing:n,coveredPercent:t.coveredPercent,showingUncovered:e.showUncovered})}}this._options.onChange(null)}_renderDiagnostics(){const{coverage:e,showUncovered:t,activeDocument:n,pendingRequest:r}=this._state;if(this._diagnostics.clear(),t&&n&&!r&&e&&e.uncoveredRanges.length>0){const t=e.uncoveredRanges.map(e=>uncoveredRangeToDiagnostic(e,this._options.diagnosticSeverity));this._diagnostics.set(n.uri,t)}}_setState(e){this._state={...this._state,...e},this.render()}_computeCoverage(e){if(!this._state.isConnected||!e||!vscode.languages.match(this._documentSelector,e))return void this._setState({activeDocument:null,pendingRequest:null,coverage:null});this._state.pendingRequest&&this._state.pendingRequest.cancel();const t=requestTypeCoverage(this._provider,e,e=>{this._setState({pendingRequest:null,coverage:e})});this._setState({activeDocument:e,pendingRequest:t,coverage:this._state.activeDocument!==e?null:this._state.coverage})}}function requestTypeCoverage(e,t,n){let r=!1;return Promise.resolve(e.provideTypeCoverage(t)).then(e=>r?null:n(e||null)),{cancel:()=>{r=!0}}}function uncoveredRangeToDiagnostic(e,t){const n=new vscode.Diagnostic(e.range,e.message||"Not covered by flow",t);return n.source="Type Coverage",n}class TypeCoverageFeature extends main_1$2{constructor(e){super(e,TypeCoverageRequest.type),_defineProperty(this,"_client",void 0),this._client=e}fillClientCapabilities(e){e.telemetry=e.telemetry||{},e.telemetry.connectionStatus={dynamicRegistration:!1}}initialize(e,t){e.typeCoverageProvider&&t&&this.register(this.messages,{id:uuid_5(),registerOptions:{documentSelector:t}})}registerLanguageProvider(e){const t=new TypeCoverageProvider(this._client);return new TypeCoverage(e.documentSelector,t,this._client.clientOptions.extensions.typeCoverage)}}const LspMessageType={Error:1,Warning:2,Info:3,Log:4};function convertToStatus(e){const t=(e.actions||[]).map(e=>e.title);switch(e.type){case LspMessageType.Error:return{kind:"red",message:null==e.message?"":e.message,buttons:t};case LspMessageType.Warning:return{kind:"yellow",message:null==e.message?"":e.message,shortMessage:e.shortMessage,progress:null==e.progress?void 0:{numerator:e.progress.numerator,denominator:e.progress.denominator},buttons:t};case LspMessageType.Info:return{kind:"green",message:e.message};default:return null}}class Defer{constructor(){_defineProperty(this,"promise",void 0),_defineProperty(this,"resolve",void 0),_defineProperty(this,"reject",void 0),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}const ShowStatusRequest={type:new main_16$2("window/showStatus")};class StatusProvider{constructor(e){_defineProperty(this,"_client",void 0),_defineProperty(this,"_currentStatusID",0),_defineProperty(this,"_statusActionDeferred",new Defer),_defineProperty(this,"_listeners",[]),_defineProperty(this,"_updateStatus",e=>{this._listeners.forEach(t=>{t(e)})}),_defineProperty(this,"_handleShowStatusRequest",e=>{const t=e.actions||[],n=convertToStatus(e);return n?Promise.resolve(this._showStatus(n)).then(e=>{if(null===e)return null;return t.find(t=>t.title===e)||null}):Promise.resolve(null)}),this._client=e,this._client.onRequest(ShowStatusRequest.type,this._handleShowStatusRequest)}clickAction(e,t){e===String(this._currentStatusID)&&this._statusActionDeferred.resolve(t)}onStatus(e){return this._listeners.push(e),{dispose:()=>{const t=this._listeners.findIndex(t=>e===t);-1!==t&&this._listeners.splice(t,1)}}}_showStatus(e){switch(this._statusActionDeferred.resolve(null),this._statusActionDeferred=new Defer,this._currentStatusID+=1,e.kind){case"red":this._updateStatus({kind:"red",...e,id:String(this._currentStatusID)});break;case"yellow":this._updateStatus({kind:"yellow",...e,id:String(this._currentStatusID)});break;default:this._updateStatus(e)}return this._statusActionDeferred.promise}}class Status{constructor(e,t){_defineProperty(this,"state",{status:{kind:"null"}}),_defineProperty(this,"_provider",void 0),_defineProperty(this,"_options",void 0),_defineProperty(this,"_subscriptions",[]),this._options=t,this._provider=e,this._subscriptions.push(this._provider.onStatus(e=>{this.setState({status:e})}))}setState(e){this.state={...this.state,...e},this.render()}render(){const{status:e}=this.state;switch(e.kind){case"green":this._options.onChange({state:"idle",message:e.message||""});break;case"yellow":this._options.onChange({state:"busy",progress:this._getProgress(e),message:e.message||"",actions:this._createActions(e.id,e.buttons)});break;case"red":this._options.onChange({state:"error",message:e.message||"",actions:this._createActions(e.id,e.buttons)});break;case"null":this._options.onChange(null);break;default:this._options.onChange(null)}}_createActions(e,t){return t.map(t=>({title:t,command:()=>this._provider.clickAction(e||"",t)}))}_getProgress(e){if("yellow"!==e.kind)return"";if(null!=e.shortMessage)return e.shortMessage;if(null!=e.progress){const{numerator:t,denominator:n}=e.progress;return`${Math.round(t/(null==n?100:n)*100)}%`}return null!=e.message?e.message.replace("Flow:",""):""}dispose(){this._subscriptions.forEach(e=>e.dispose())}}class StatusFeature{constructor(e){_defineProperty(this,"_client",void 0),this._client=e}fillClientCapabilities(e){e.window=e.window||{},e.window.status={dynamicRegistration:!1}}initialize(){const e=new StatusProvider(this._client);return new Status(e,this._client.clientOptions.extensions.status)}}class ConfigureCompletionSnippetSupport{constructor(e){_defineProperty(this,"_enableSnippetSupport",void 0),_defineProperty(this,"messages",[]);const{initializationOptions:t}=e.clientOptions;this._enableSnippetSupport=!!t&&Boolean(t.useCodeSnippetOnFunctionSuggest)}fillClientCapabilities(e){e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&(e.textDocument.completion.completionItem.snippetSupport=this._enableSnippetSupport)}register(){}unregister(){}initialize(){}dispose(){}}class LanguageClientEx extends main_139{constructor(e,t,n,r,i){super(e,t,n,r,i),this._clientOptions.extensions=r.extensions,this._registerExtraFeatures()}get clientOptions(){return this._clientOptions}_registerExtraFeatures(){this.registerFeature(new TypeCoverageFeature(this)),this.registerFeature(new StatusFeature(this)),this.registerFeature(new ConfigureCompletionSnippetSupport(this))}}var frames="win32"===process.platform?["-","\\","|","/"]:["","","","","","","","","",""],elegantSpinner=function(){var e=0;return function(){return frames[e=++e%frames.length]}},frames_1=frames;elegantSpinner.frames=frames_1;class StatusBarWidget{constructor(e){_defineProperty(this,"_item",void 0),_defineProperty(this,"_defaultColor",void 0),_defineProperty(this,"_options",void 0),_defineProperty(this,"_spinner",elegantSpinner()),_defineProperty(this,"_spinnerTimeoutID",void 0),_defineProperty(this,"state",{status:null,coverage:null,flowInfo:{path:"",version:""},show:!1}),_defineProperty(this,"_getSpinner",()=>(this._clearSpinnerTimeout(),this._spinnerTimeoutID=setTimeout(()=>this.render(),100),this._spinner())),this._options=e,this._item=vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left,-Number.MAX_SAFE_INTEGER),this._defaultColor=this._item.color}setFlowInfo(e){this._setState({flowInfo:e})}getFlowInfo(){return this.state.flowInfo}setStatus(e){this._setState({status:e})}getStatus(){return this.state.status}setCoverage(e){this._setState({coverage:e})}render(){const e=this._item,t=this._options,{coverage:n,status:r,flowInfo:i,show:o}=this.state;if(!n&&!r||!o)return void e.hide();let s="Flow",a="",c=this._defaultColor;if(i.version&&(s+=` ${i.version}`),a+=[`${heading("Flow Info")}`,`Config = ${t.flowconfig}`,`Version = ${i.version}`,`Path = ${i.path}`,`ClientName = ${t.clientName}`].join("\n"),r)switch(a+=`\n\n${heading("Server Status")}\n`,r.state){case"idle":a+=r.message;break;case"busy":s+=` ${this._getSpinner()} ${r.progress}`,a+=r.message;break;case"error":s+=" $(stop)",a+=r.message,c="red"}if(n&&!this._isServerBusy()){const{coveredPercent:e,computing:t,showingUncovered:r}=n,i=`Uncovered areas: ${r?"Visible":"Hidden"}`,o=t||null===e?"Computing coverage...":`This file is ${e}% covered by flow.\n${i}`;s+=` ( coverage ${[null!==e?`${e}%`:null,t?`${this._getSpinner()}`:null,r?"$(eye)":null].filter(Boolean).join(" ")} )`,a+=`\n\n${heading("Type Coverage")}\n${o}`}e.text=s,e.tooltip=a,e.command=t.onClickCommand,e.color=c,e.show()}show(){this._setState({show:!0})}hide(){this._setState({show:!1})}dispose(){this._item.dispose()}_isServerBusy(){const{status:e}=this.state;return e&&"idle"!==e.state}_clearSpinnerTimeout(){this._spinnerTimeoutID&&(clearTimeout(this._spinnerTimeoutID),this._spinnerTimeoutID=null)}_setState(e){this.state={...this.state,...e},this.render()}}function heading(e){return`[ ${e} ]`}var underscore=createCommonjsModule(function(e,t){(function(){var n=this,r=n._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,c=o.push,u=o.slice,l=o.concat,d=s.toString,p=s.hasOwnProperty,m=o.forEach,h=o.map,f=o.reduce,g=o.reduceRight,v=o.filter,_=o.every,y=o.some,w=o.indexOf,C=o.lastIndexOf,E=Array.isArray,R=Object.keys,S=a.bind,$=function(e){return e instanceof $?e:this instanceof $?void(this._wrapped=e):new $(e)};e.exports&&(t=e.exports=$),t._=$,$.VERSION="1.6.0";var b=$.each=$.forEach=function(e,t,n){if(null==e)return e;if(m&&e.forEach===m)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e)===i)return}else{var s=$.keys(e);for(r=0,o=s.length;r<o;r++)if(t.call(n,e[s[r]],s[r],e)===i)return}return e};$.map=$.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(b(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r)};var x="Reduce of empty array with no initial value";$.reduce=$.foldl=$.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return r&&(t=$.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(b(e,function(e,o,s){i?n=t.call(r,n,e,o,s):(n=e,i=!0)}),!i)throw new TypeError(x);return n},$.reduceRight=$.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return r&&(t=$.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var s=$.keys(e);o=s.length}if(b(e,function(a,c,u){c=s?s[--o]:--o,i?n=t.call(r,n,e[c],c,u):(n=e[c],i=!0)}),!i)throw new TypeError(x);return n},$.find=$.detect=function(e,t,n){var r;return T(e,function(e,i,o){if(t.call(n,e,i,o))return r=e,!0}),r},$.filter=$.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(b(e,function(e,i,o){t.call(n,e,i,o)&&r.push(e)}),r)},$.reject=function(e,t,n){return $.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},$.every=$.all=function(e,t,n){t||(t=$.identity);var r=!0;return null==e?r:_&&e.every===_?e.every(t,n):(b(e,function(e,o,s){if(!(r=r&&t.call(n,e,o,s)))return i}),!!r)};var T=$.some=$.any=function(e,t,n){t||(t=$.identity);var r=!1;return null==e?r:y&&e.some===y?e.some(t,n):(b(e,function(e,o,s){if(r||(r=t.call(n,e,o,s)))return i}),!!r)};$.contains=$.include=function(e,t){return null!=e&&(w&&e.indexOf===w?-1!=e.indexOf(t):T(e,function(e){return e===t}))},$.invoke=function(e,t){var n=u.call(arguments,2),r=$.isFunction(t);return $.map(e,function(e){return(r?t:e[t]).apply(e,n)})},$.pluck=function(e,t){return $.map(e,$.property(t))},$.where=function(e,t){return $.filter(e,$.matches(t))},$.findWhere=function(e,t){return $.find(e,$.matches(t))},$.max=function(e,t,n){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return b(e,function(e,o,s){var a=t?t.call(n,e,o,s):e;a>i&&(r=e,i=a)}),r},$.min=function(e,t,n){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return b(e,function(e,o,s){var a=t?t.call(n,e,o,s):e;a<i&&(r=e,i=a)}),r},$.shuffle=function(e){var t,n=0,r=[];return b(e,function(e){t=$.random(n++),r[n-1]=r[t],r[t]=e}),r},$.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=$.values(e)),e[$.random(e.length-1)]):$.shuffle(e).slice(0,Math.max(0,t))};var D=function(e){return null==e?$.identity:$.isFunction(e)?e:$.property(e)};$.sortBy=function(e,t,n){return t=D(t),$.pluck($.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,r){var i={};return n=D(n),b(t,function(o,s){var a=n.call(r,o,s,t);e(i,a,o)}),i}};$.groupBy=P(function(e,t,n){$.has(e,t)?e[t].push(n):e[t]=[n]}),$.indexBy=P(function(e,t,n){e[t]=n}),$.countBy=P(function(e,t){$.has(e,t)?e[t]++:e[t]=1}),$.sortedIndex=function(e,t,n,r){for(var i=(n=D(n)).call(r,t),o=0,s=e.length;o<s;){var a=o+s>>>1;n.call(r,e[a])<i?o=a+1:s=a}return o},$.toArray=function(e){return e?$.isArray(e)?u.call(e):e.length===+e.length?$.map(e,$.identity):$.values(e):[]},$.size=function(e){return null==e?0:e.length===+e.length?e.length:$.keys(e).length},$.first=$.head=$.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:t<0?[]:u.call(e,0,t)},$.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},$.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},$.rest=$.tail=$.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},$.compact=function(e){return $.filter(e,$.identity)};var k=function(e,t,n){return t&&$.every(e,$.isArray)?l.apply(n,e):(b(e,function(e){$.isArray(e)||$.isArguments(e)?t?c.apply(n,e):k(e,t,n):n.push(e)}),n)};$.flatten=function(e,t){return k(e,t,[])},$.without=function(e){return $.difference(e,u.call(arguments,1))},$.partition=function(e,t){var n=[],r=[];return b(e,function(e){(t(e)?n:r).push(e)}),[n,r]},$.uniq=$.unique=function(e,t,n,r){$.isFunction(t)&&(r=n,n=t,t=!1);var i=n?$.map(e,n,r):e,o=[],s=[];return b(i,function(n,r){(t?r&&s[s.length-1]===n:$.contains(s,n))||(s.push(n),o.push(e[r]))}),o},$.union=function(){return $.uniq($.flatten(arguments,!0))},$.intersection=function(e){var t=u.call(arguments,1);return $.filter($.uniq(e),function(e){return $.every(t,function(t){return $.contains(t,e)})})},$.difference=function(e){var t=l.apply(o,u.call(arguments,1));return $.filter(e,function(e){return!$.contains(t,e)})},$.zip=function(){for(var e=$.max($.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;n<e;n++)t[n]=$.pluck(arguments,""+n);return t},$.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},$.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return e[r=$.sortedIndex(e,t)]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(w&&e.indexOf===w)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},$.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(C&&e.lastIndexOf===C)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},$.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);i<r;)o[i++]=e,e+=n;return o};var I=function(){};$.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!$.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));I.prototype=e.prototype;var i=new I;I.prototype=null;var o=e.apply(i,n.concat(u.call(arguments)));return Object(o)===o?o:i}},$.partial=function(e){var t=u.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,o=r.length;i<o;i++)r[i]===$&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},$.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return b(t,function(t){e[t]=$.bind(e[t],e)}),e},$.memoize=function(e,t){var n={};return t||(t=$.identity),function(){var r=t.apply(this,arguments);return $.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},$.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},$.defer=function(e){return $.delay.apply($,[e,1].concat(u.call(arguments,1)))},$.throttle=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:$.now(),s=null,o=e.apply(r,i),r=i=null};return function(){var u=$.now();a||!1!==n.leading||(a=u);var l=t-(u-a);return r=this,i=arguments,l<=0?(clearTimeout(s),s=null,a=u,o=e.apply(r,i),r=i=null):s||!1===n.trailing||(s=setTimeout(c,l)),o}},$.debounce=function(e,t,n){var r,i,o,s,a,c=function(){var u=$.now()-s;u<t?r=setTimeout(c,t-u):(r=null,n||(a=e.apply(o,i),o=i=null))};return function(){o=this,i=arguments,s=$.now();var u=n&&!r;return r||(r=setTimeout(c,t)),u&&(a=e.apply(o,i),o=i=null),a}},$.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},$.wrap=function(e,t){return $.partial(t,e)},$.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},$.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},$.keys=function(e){if(!$.isObject(e))return[];if(R)return R(e);var t=[];for(var n in e)$.has(e,n)&&t.push(n);return t},$.values=function(e){for(var t=$.keys(e),n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},$.pairs=function(e){for(var t=$.keys(e),n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},$.invert=function(e){for(var t={},n=$.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},$.functions=$.methods=function(e){var t=[];for(var n in e)$.isFunction(e[n])&&t.push(n);return t.sort()},$.extend=function(e){return b(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},$.pick=function(e){var t={},n=l.apply(o,u.call(arguments,1));return b(n,function(n){n in e&&(t[n]=e[n])}),t},$.omit=function(e){var t={},n=l.apply(o,u.call(arguments,1));for(var r in e)$.contains(n,r)||(t[r]=e[r]);return t},$.defaults=function(e){return b(u.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},$.clone=function(e){return $.isObject(e)?$.isArray(e)?e.slice():$.extend({},e):e},$.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof $&&(e=e._wrapped),t instanceof $&&(t=t._wrapped);var i=d.call(e);if(i!=d.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!($.isFunction(s)&&s instanceof s&&$.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var c=0,u=!0;if("[object Array]"==i){if(u=(c=e.length)==t.length)for(;c--&&(u=O(e[c],t[c],n,r)););}else{for(var l in e)if($.has(e,l)&&(c++,!(u=$.has(t,l)&&O(e[l],t[l],n,r))))break;if(u){for(l in t)if($.has(t,l)&&!c--)break;u=!c}}return n.pop(),r.pop(),u};$.isEqual=function(e,t){return O(e,t,[],[])},$.isEmpty=function(e){if(null==e)return!0;if($.isArray(e)||$.isString(e))return 0===e.length;for(var t in e)if($.has(e,t))return!1;return!0},$.isElement=function(e){return!(!e||1!==e.nodeType)},$.isArray=E||function(e){return"[object Array]"==d.call(e)},$.isObject=function(e){return e===Object(e)},b(["Arguments","Function","String","Number","Date","RegExp"],function(e){$["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),$.isArguments(arguments)||($.isArguments=function(e){return!(!e||!$.has(e,"callee"))}),"function"!=typeof/./&&($.isFunction=function(e){return"function"==typeof e}),$.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},$.isNaN=function(e){return $.isNumber(e)&&e!=+e},$.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==d.call(e)},$.isNull=function(e){return null===e},$.isUndefined=function(e){return void 0===e},$.has=function(e,t){return p.call(e,t)},$.noConflict=function(){return n._=r,this},$.identity=function(e){return e},$.constant=function(e){return function(){return e}},$.property=function(e){return function(t){return t[e]}},$.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},$.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;i<e;i++)r[i]=t.call(n,i);return r},$.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},$.now=Date.now||function(){return(new Date).getTime()};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=$.invert(F.escape);var N={escape:new RegExp("["+$.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+$.keys(F.unescape).join("|")+")","g")};$.each(["escape","unescape"],function(e){$[e]=function(t){return null==t?"":(""+t).replace(N[e],function(t){return F[e][t]})}}),$.result=function(e,t){if(null!=e){var n=e[t];return $.isFunction(n)?n.call(e):n}},$.mixin=function(e){b($.functions(e),function(t){var n=$[t]=e[t];$.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),j.call(this,n.apply($,e))}})};var M=0;$.uniqueId=function(e){var t=++M+"";return e?e+t:t},$.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\t|\u2028|\u2029/g;$.template=function(e,t,n){var r;n=$.defaults({},n,$.templateSettings);var i=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,n,r,i,a){return s+=e.slice(o,a).replace(q,function(e){return"\\"+A[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(t)return r(t,$);var a=function(e){return r.call(this,e,$)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},$.chain=function(e){return $(e).chain()};var j=function(e){return this._chain?$(e).chain():e};$.mixin($),b(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];$.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),b(["concat","join","slice"],function(e){var t=o[e];$.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),$.extend($.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(commonjsGlobal)}),underscore_1=underscore._,underscorePlus=createCommonjsModule(function(e){(function(){var t,n,r,i,o,s,a,c,u=[].slice;c=underscore,r={cmd:"",ctrl:"",alt:"",option:"",shift:"",enter:"",left:"",right:"",up:"",down:""},i={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},s={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},a=function(e){var t,n,r,i,o;if(r=0,n=[],null==e)return n;for(t=i=0,o=e.length;i<o;t=++i)"."!==e[t]||0!==t&&"\\"===e[t-1]||(n.push(e.substring(r,t)),r=t+1);return n.push(e.substr(r,e.length)),n},n=function(e){return c.isObject(e)&&!c.isArray(e)},o={adviseBefore:function(e,t,n){var r;return r=e[t],e[t]=function(){var e;if(e=1<=arguments.length?u.call(arguments,0):[],!1!==n.apply(this,e))return r.apply(this,e)}},camelize:function(e){return e?e.replace(/[_-]+(\w)/g,function(e){return e[1].toUpperCase()}):""},capitalize:function(e){return e?"github"===e.toLowerCase()?"GitHub":e[0].toUpperCase()+e.slice(1):""},compactObject:function(e){var t,n,r;for(t in n={},e)null!=(r=e[t])&&(n[t]=r);return n},dasherize:function(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|(_)/g,function(e,t){return t?"-"+t.toLowerCase():"-"}):""},deepClone:function(e){return c.isArray(e)?e.map(function(e){return o.deepClone(e)}):c.isObject(e)&&!c.isFunction(e)?o.mapObject(e,function(e,t){return[e,o.deepClone(t)]}):e},deepExtend:function(e){var t,r,i,s,a,c,u;for(s=e,t=0;++t<arguments.length;)if(i=arguments[t],n(s)&&n(i))for(a=0,c=(u=Object.keys(i)).length;a<c;a++)s[r=u[a]]=o.deepExtend(s[r],i[r]);else s=o.deepClone(i);return s},deepContains:function(e,t){var n,r,i;if(null==e)return!1;for(r=0,i=e.length;r<i;r++)if(n=e[r],c.isEqual(n,t))return!0;return!1},endsWith:function(e,t){return null==t&&(t=""),!!e&&-1!==e.indexOf(t,e.length-t.length)},escapeAttribute:function(e){return e?e.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(e){return e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(e,t){var n,r,i,s;return r=(s=e.split(":"))[0],null==(n=s[1])?o.undasherize(r):(i=o.undasherize(r),null==t&&(t=o.undasherize(n)),i+": "+t)},humanizeKey:function(e,t){var n;return null==t&&(t=process.platform),e?(n="darwin"===t?r:i)[e]?n[e]:1===e.length&&null!=s[e]?[n.shift,s[e]]:1===e.length&&e===e.toUpperCase()&&e.toUpperCase()!==e.toLowerCase()?[n.shift,e.toUpperCase()]:1===e.length||/f[0-9]{1,2}/.test(e)?e.toUpperCase():"darwin"===t?e:o.capitalize(e):e},humanizeKeystroke:function(e,t){var n,r,i,s,a,u,l,d,p,m;if(null==t&&(t=process.platform),!e)return e;for(n=[],l=0,p=(a=e.split(" ")).length;l<p;l++){for(s=[],r=d=0,m=(u=(e=a[l]).split("-")).length;d<m;r=++d)""===(i=u[r])&&""===u[r-1]&&(i="-"),i&&s.push(o.humanizeKey(i,t));s=c.uniq(c.flatten(s)),s="darwin"===t?s.join(""):s.join("+"),n.push(s)}return n.join(" ")},isSubset:function(e,t){return c.every(e,function(e){return c.include(t,e)})},losslessInvert:function(e){var t,n,r;for(n in t={},e)null==t[r=e[n]]&&(t[r]=[]),t[r].push(n);return t},mapObject:function(e,t){var n,r,i,o,s,a,c;for(r={},o=0,s=(a=Object.keys(e)).length;o<s;o++)n=(c=t(n=a[o],e[n]))[0],i=c[1],r[n]=i;return r},multiplyString:function(e,t){var n,r;for(n="",r=0;r<t;)n+=e,r++;return n},pluralize:function(e,t,n){return null==e&&(e=0),null==n&&(n=t+"s"),1===e?e+" "+t:e+" "+n},remove:function(e,t){var n;return(n=e.indexOf(t))>=0&&e.splice(n,1),e},setValueForKeyPath:function(e,t,n){var r,i;for(i=a(t);i.length>1;)null==e[r=i.shift()]&&(e[r]={}),e=e[r];return null!=n?e[i.shift()]=n:delete e[i.shift()]},hasKeyPath:function(e,t){var n,r,i,o;for(i=0,o=(r=a(t)).length;i<o;i++){if(n=r[i],!e.hasOwnProperty(n))return!1;e=e[n]}return!0},spliceWithArray:function(e,t,n,r,i){var o,s,a,c;if(null==i&&(i=1e5),r.length<i)return e.splice.apply(e,[t,n].concat(u.call(r)));for(e.splice(t,n),c=[],o=s=0,a=r.length;i>0?s<=a:s>=a;o=s+=i)c.push(e.splice.apply(e,[t+o,0].concat(u.call(r.slice(o,o+i)))));return c},sum:function(e){var t,n,r;for(t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t},uncamelcase:function(e){var t;return e?(t=e.replace(/([A-Z])|_+/g,function(e,t){return null==t&&(t="")," "+t}),o.capitalize(t.trim())):""},undasherize:function(e){return e?e.split("-").map(o.capitalize).join(" "):""},underscore:function(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|-+/g,function(e,t){return null==t&&(t=""),"_"+t.toLowerCase()}):""},valueForKeyPath:function(e,t){var n,r,i;for(r=0,i=(n=a(t)).length;r<i;r++)if(null==(e=e[n[r]]))return;return e},isEqual:function(e,n,r,i){return c.isArray(r)&&c.isArray(i)?t(e,n,r,i):t(e,n)},isEqualForProperties:function(){var e,t,n,r,i,o;for(e=arguments[0],t=arguments[1],i=0,o=(n=3<=arguments.length?u.call(arguments,2):[]).length;i<o;i++)if(r=n[i],!c.isEqual(e[r],t[r]))return!1;return!0}},t=function(e,n,r,i){var o,s,a,u,l,d,p,m,h,f,g,v,_,y;if(null==r&&(r=[]),null==i&&(i=[]),e===n)return c.isEqual(e,n);if(c.isFunction(e)||c.isFunction(n))return c.isEqual(e,n);for(v=r.length;v--;)if(r[v]===e)return i[v]===n;if(r.push(e),i.push(n),h=!1,c.isFunction(null!=e?e.isEqual:void 0))h=e.isEqual(n,r,i);else if(c.isFunction(null!=n?n.isEqual:void 0))h=n.isEqual(e,i,r);else if(c.isArray(e)&&c.isArray(n)&&e.length===n.length){for(h=!0,f=_=0,y=e.length;_<y;f=++_)if(a=e[f],!t(a,n[f],r,i)){h=!1;break}}else if(c.isRegExp(e)&&c.isRegExp(n))h=c.isEqual(e,n);else if(c.isElement(e)&&c.isElement(n))h=e===n;else if(c.isObject(e)&&c.isObject(n))if(o=e.constructor,d=n.constructor,s=c.isFunction(o)&&o instanceof o,p=c.isFunction(d)&&d instanceof d,o===d||s&&p){for(g in u=0,h=!0,e)if(l=e[g],c.has(e,g)&&(u++,!c.has(n,g)||!t(l,n[g],r,i))){h=!1;break}if(h){for(g in m=0,n)n[g],c.has(n,g)&&m++;h=u===m}}else h=!1;else h=c.isEqual(e,n);return r.pop(),i.pop(),h},e.exports=c.extend({},c,o)}).call(commonjsGlobal)}),async$1=createCommonjsModule(function(e){!function(){var t,n={};function r(){}function i(e){return e}function o(e){return!!e}function s(e){return!e}var a="object"==typeof self&&self.self===self&&self||"object"==typeof commonjsGlobal&&commonjsGlobal.global===commonjsGlobal&&commonjsGlobal||this;function c(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function u(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=a&&(t=a.async),n.noConflict=function(){return a.async=t,n};var l=Object.prototype.toString,d=Array.isArray||function(e){return"[object Array]"===l.call(e)};function p(e){return d(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function m(e,t){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e)}function h(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function f(e){return h(Array(e),function(e,t){return t})}function g(e,t,n){return m(e,function(e,r,i){n=t(n,e,r,i)}),n}function v(e,t){m(y(e),function(n){t(e[n],n)})}function _(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var y=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};function w(e){var t,n,r=-1;return p(e)?(t=e.length,function(){return++r<t?r:null}):(n=y(e),t=n.length,function(){return++r<t?n[r]:null})}function C(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r)}}}function E(e){return function(t,n,r){return e(t,r)}}var R="function"==typeof setImmediate&&setImmediate,S=R?function(e){R(e)}:function(e){setTimeout(e,0)};function $(e){return function(t,n,i){i=u(i||r);var o=w(t=t||[]);if(e<=0)return i(null);var s=!1,a=0,l=!1;!function r(){if(s&&a<=0)return i(null);for(;a<e&&!l;){var u=o();if(null===u)return s=!0,void(a<=0&&i(null));a+=1,n(t[u],u,c(function(e){a-=1,e?(i(e),l=!0):r()}))}}()}}function b(e){return function(t,r,i){return e(n.eachOf,t,r,i)}}function x(e){return function(t,n,r,i){return e($(n),t,r,i)}}function T(e){return function(t,r,i){return e(n.eachOfSeries,t,r,i)}}function D(e,t,n,i){i=u(i||r);var o=p(t=t||[])?[]:{};e(t,function(e,t,r){n(e,function(e,n){o[t]=n,r(e)})},function(e){i(e,o)})}function P(e,t,n,r){var i=[];e(t,function(e,t,r){n(e,function(n){n&&i.push({index:t,value:e}),r()})},function(){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function k(e,t,n,r){P(e,t,function(e,t){n(e,function(e){t(!e)})},r)}function I(e,t,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function c(e,r,i){if(!s)return i();o(e,function(r){s&&t(r)&&(s(n(!0,e)),s=o=!1),i()})}arguments.length>3?e(r,i,c,a):(s=o,o=i,e(r,c,a))}}function O(e,t){return t}function F(e,t,n){n=n||r;var i=p(t)?[]:{};e(t,function(e,t,n){e(C(function(e,r){r.length<=1&&(r=r[0]),i[t]=r,n(e)}))},function(e){n(e,i)})}function N(e,t,n,r){var i=[];e(t,function(e,t,r){n(e,function(e,t){i=i.concat(t||[]),r(e)})},function(e){r(e,i)})}function M(e,t,i){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function o(e,t,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(e.started=!0,d(t)||(t=[t]),0===t.length&&e.idle())return n.setImmediate(function(){e.drain()});m(t,function(t){var n={data:t,callback:o||r};i?e.tasks.unshift(n):e.tasks.push(n),e.tasks.length===e.concurrency&&e.saturated()}),n.setImmediate(e.process)}function s(e,t){return function(){a-=1;var n=!1,r=arguments;m(t,function(e){m(u,function(t,r){t!==e||n||(u.splice(r,1),n=!0)}),e.callback.apply(e,r)}),e.tasks.length+a===0&&e.drain(),e.process()}}var a=0,u=[],l={tasks:[],concurrency:t,payload:i,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(e,t){o(l,e,!1,t)},kill:function(){l.drain=r,l.tasks=[]},unshift:function(e,t){o(l,e,!0,t)},process:function(){for(;!l.paused&&a<l.concurrency&&l.tasks.length;){var t=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),n=h(t,function(e){return e.data});0===l.tasks.length&&l.empty(),a+=1,u.push(t[0]);var r=c(s(l,t));e(n,r)}},length:function(){return l.tasks.length},running:function(){return a},workersList:function(){return u},idle:function(){return l.tasks.length+a===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var e=Math.min(l.concurrency,l.tasks.length),t=1;t<=e;t++)n.setImmediate(l.process)}}};return l}function L(e){return C(function(t,n){t.apply(null,n.concat([C(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&m(n,function(t){console[e](t)}))})]))})}function A(e){return function(t,n,r){e(f(t),n,r)}}function q(e){return C(function(t,n){var r=C(function(n){var r=this,i=n.pop();return e(t,function(e,t,i){e.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function j(e){return C(function(t){var r=t.pop();t.push(function(){var e=arguments;i?n.setImmediate(function(){r.apply(null,e)}):r.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}"object"==typeof process&&"function"==typeof process.nextTick?n.nextTick=process.nextTick:n.nextTick=S,n.setImmediate=R?S:n.nextTick,n.forEach=n.each=function(e,t,r){return n.eachOf(e,E(t),r)},n.forEachSeries=n.eachSeries=function(e,t,r){return n.eachOfSeries(e,E(t),r)},n.forEachLimit=n.eachLimit=function(e,t,n,r){return $(t)(e,E(n),r)},n.forEachOf=n.eachOf=function(e,t,n){n=u(n||r);for(var i,o=w(e=e||[]),s=0;null!=(i=o());)s+=1,t(e[i],i,c(a));function a(e){s--,e?n(e):null===i&&s<=0&&n(null)}0===s&&n(null)},n.forEachOfSeries=n.eachOfSeries=function(e,t,i){i=u(i||r);var o=w(e=e||[]),s=o();!function r(){var a=!0;if(null===s)return i(null);t(e[s],s,c(function(e){if(e)i(e);else{if(null===(s=o()))return i(null);a?n.setImmediate(r):r()}})),a=!1}()},n.forEachOfLimit=n.eachOfLimit=function(e,t,n,r){$(t)(e,n,r)},n.map=b(D),n.mapSeries=T(D),n.mapLimit=x(D),n.inject=n.foldl=n.reduce=function(e,t,r,i){n.eachOfSeries(e,function(e,n,i){r(t,e,function(e,n){t=n,i(e)})},function(e){i(e,t)})},n.foldr=n.reduceRight=function(e,t,r,o){var s=h(e,i).reverse();n.reduce(s,t,r,o)},n.transform=function(e,t,r,i){3===arguments.length&&(i=r,r=t,t=d(e)?[]:{}),n.eachOf(e,function(e,n,i){r(t,e,n,i)},function(e){i(e,t)})},n.select=n.filter=b(P),n.selectLimit=n.filterLimit=x(P),n.selectSeries=n.filterSeries=T(P),n.reject=b(k),n.rejectLimit=x(k),n.rejectSeries=T(k),n.any=n.some=I(n.eachOf,o,i),n.someLimit=I(n.eachOfLimit,o,i),n.all=n.every=I(n.eachOf,s,s),n.everyLimit=I(n.eachOfLimit,s,s),n.detect=I(n.eachOf,i,O),n.detectSeries=I(n.eachOfSeries,i,O),n.detectLimit=I(n.eachOfLimit,i,O),n.sortBy=function(e,t,r){function i(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}n.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);r(null,h(t.sort(i),function(e){return e.value}))})},n.auto=function(e,t,i){"function"==typeof arguments[1]&&(i=t,t=null),i=u(i||r);var o=y(e),s=o.length;if(!s)return i(null);t||(t=s);var a={},c=0,l=!1,p=[];function h(e){p.unshift(e)}function f(e){var t=_(p,e);t>=0&&p.splice(t,1)}function w(){s--,m(p.slice(0),function(e){e()})}h(function(){s||i(null,a)}),m(o,function(r){if(!l){for(var o,s=d(e[r])?e[r]:[e[r]],u=C(function(e,t){if(c--,t.length<=1&&(t=t[0]),e){var o={};v(a,function(e,t){o[t]=e}),o[r]=t,l=!0,i(e,o)}else a[r]=t,n.setImmediate(w)}),p=s.slice(0,s.length-1),m=p.length;m--;){if(!(o=e[p[m]]))throw new Error("Has nonexistent dependency in "+p.join(", "));if(d(o)&&_(o,r)>=0)throw new Error("Has cyclic dependencies")}y()?(c++,s[s.length-1](u,a)):h(function e(){y()&&(c++,f(e),s[s.length-1](u,a))})}function y(){return c<t&&g(p,function(e,t){return e&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(r)}})},n.retry=function(e,t,r){var i=5,o=0,s=[],a={times:i,interval:o};function c(e,t){if("number"==typeof t)e.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||i,e.interval=parseInt(t.interval,10)||o}}var u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(e,t){function r(e,n){return function(r){e(function(e,t){r(!e||n,{err:e,result:t})},t)}}function i(e){return function(t){setTimeout(function(){t(null)},e)}}for(;a.times;){var o=!(a.times-=1);s.push(r(a.task,o)),!o&&a.interval>0&&s.push(i(a.interval))}n.series(s,function(t,n){n=n[n.length-1],(e||a.callback)(n.err,n.result)})}return u<=2&&"function"==typeof e&&(r=t,t=e),"function"!=typeof e&&c(a,e),a.callback=r,a.task=t,a.callback?l():l},n.waterfall=function(e,t){if(t=u(t||r),!d(e)){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();!function e(n){return C(function(r,i){if(r)t.apply(null,[r].concat(i));else{var o=n.next();o?i.push(e(o)):i.push(t),j(n).apply(null,i)}})}(n.iterator(e))()},n.parallel=function(e,t){F(n.eachOf,e,t)},n.parallelLimit=function(e,t,n){F($(t),e,n)},n.series=function(e,t){F(n.eachOfSeries,e,t)},n.iterator=function(e){return function t(n){function r(){return e.length&&e[n].apply(null,arguments),r.next()}return r.next=function(){return n<e.length-1?t(n+1):null},r}(0)},n.apply=C(function(e,t){return C(function(n){return e.apply(null,t.concat(n))})}),n.concat=b(N),n.concatSeries=T(N),n.whilst=function(e,t,n){if(n=n||r,e()){var i=C(function(r,o){r?n(r):e.apply(this,o)?t(i):n.apply(null,[null].concat(o))});t(i)}else n(null)},n.doWhilst=function(e,t,r){var i=0;return n.whilst(function(){return++i<=1||t.apply(this,arguments)},e,r)},n.until=function(e,t,r){return n.whilst(function(){return!e.apply(this,arguments)},t,r)},n.doUntil=function(e,t,r){return n.doWhilst(e,function(){return!t.apply(this,arguments)},r)},n.during=function(e,t,n){n=n||r;var i=C(function(t,r){t?n(t):(r.push(o),e.apply(this,r))}),o=function(e,r){e?n(e):r?t(i):n(null)};e(o)},n.doDuring=function(e,t,r){var i=0;n.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,r)},n.queue=function(e,t){return M(function(t,n){e(t[0],n)},t,1)},n.priorityQueue=function(e,t){function i(e,t){return e.priority-t.priority}var o=n.queue(e,t);return o.push=function(e,t,s){!function(e,t,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(e.started=!0,d(t)||(t=[t]),0===t.length)return n.setImmediate(function(){e.drain()});m(t,function(t){var a={data:t,priority:o,callback:"function"==typeof s?s:r};e.tasks.splice(function(e,t,n){for(var r=-1,i=e.length-1;r<i;){var o=r+(i-r+1>>>1);n(t,e[o])>=0?r=o:i=o-1}return r}(e.tasks,a,i)+1,0,a),e.tasks.length===e.concurrency&&e.saturated(),n.setImmediate(e.process)})}(o,e,t,s)},delete o.unshift,o},n.cargo=function(e,t){return M(e,1,t)},n.log=L("log"),n.dir=L("dir"),n.memoize=function(e,t){var r={},o={},s=Object.prototype.hasOwnProperty;t=t||i;var a=C(function(i){var a=i.pop(),c=t.apply(null,i);s.call(r,c)?n.setImmediate(function(){a.apply(null,r[c])}):s.call(o,c)?o[c].push(a):(o[c]=[a],e.apply(null,i.concat([C(function(e){r[c]=e;var t=o[c];delete o[c];for(var n=0,i=t.length;n<i;n++)t[n].apply(null,e)})])))});return a.memo=r,a.unmemoized=e,a},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},n.times=A(n.map),n.timesSeries=A(n.mapSeries),n.timesLimit=function(e,t,r,i){return n.mapLimit(f(e),t,r,i)},n.seq=function(){var e=arguments;return C(function(t){var i=this,o=t[t.length-1];"function"==typeof o?t.pop():o=r,n.reduce(e,t,function(e,t,n){t.apply(i,e.concat([C(function(e,t){n(e,t)})]))},function(e,t){o.apply(i,[e].concat(t))})})},n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))},n.applyEach=q(n.eachOf),n.applyEachSeries=q(n.eachOfSeries),n.forever=function(e,t){var n=c(t||r),i=j(e);!function e(t){if(t)return n(t);i(e)}()},n.ensureAsync=j,n.constant=C(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),n.wrapSync=n.asyncify=function(e){return C(function(t){var n,r,i,o=t.pop();try{n=e.apply(this,t)}catch(e){return o(e)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then(function(e){o(null,e)}).catch(function(e){o(e.message?e:new Error(e))}):o(null,n)})},e.exports?e.exports=n:a.async=n}()}),_0777=parseInt("0777",8),mkdirp=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(e,t,n,r){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var i=t.mode,o=t.fs||fs$1;void 0===i&&(i=_0777&~process.umask()),r||(r=null);var s=n||function(){};e=path$1.resolve(e),o.mkdir(e,i,function(n){if(!n)return s(null,r=r||e);switch(n.code){case"ENOENT":mkdirP(path$1.dirname(e),t,function(n,r){n?s(n,r):mkdirP(e,t,s,r)});break;default:o.stat(e,function(e,t){e||!t.isDirectory()?s(n,r):s(null,r)})}})}mkdirP.sync=function e(t,n,r){n&&"object"==typeof n||(n={mode:n});var i=n.mode,o=n.fs||fs$1;void 0===i&&(i=_0777&~process.umask()),r||(r=null),t=path$1.resolve(t);try{o.mkdirSync(t,i),r=r||t}catch(i){switch(i.code){case"ENOENT":r=e(path$1.dirname(t),n,r),e(t,n,r);break;default:var s;try{s=o.statSync(t)}catch(e){throw i}if(!s.isDirectory())throw i}}return r};var isWindows="win32"===process.platform,DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var e;if(DEBUG){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}function maybeCallback(e){return"function"==typeof e?e:rethrow()}var normalize=path$1.normalize;if(isWindows)var nextPartRe=/(.*?)(?:[\/\\]+|$)/g;else nextPartRe=/(.*?)(?:[\/]+|$)/g;if(isWindows)var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else splitRootRe=/^[\/]*/;var realpathSync=function(e,t){if(e=path$1.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,r,i,o,s=e,a={},c={};function u(){var t=splitRootRe.exec(e);n=t[0].length,r=t[0],i=t[0],o="",isWindows&&!c[i]&&(fs$1.lstatSync(i),c[i]=!0)}for(u();n<e.length;){nextPartRe.lastIndex=n;var l=nextPartRe.exec(e);if(o=r,r+=l[0],i=o+l[1],n=nextPartRe.lastIndex,!(c[i]||t&&t[i]===i)){var d;if(t&&Object.prototype.hasOwnProperty.call(t,i))d=t[i];else{var p=fs$1.lstatSync(i);if(!p.isSymbolicLink()){c[i]=!0,t&&(t[i]=i);continue}var m=null;if(!isWindows){var h=p.dev.toString(32)+":"+p.ino.toString(32);a.hasOwnProperty(h)&&(m=a[h])}null===m&&(fs$1.statSync(i),m=fs$1.readlinkSync(i)),d=path$1.resolve(o,m),t&&(t[i]=d),isWindows||(a[h]=m)}e=path$1.resolve(d,e.slice(n)),u()}}return t&&(t[s]=e),e},realpath=function(e,t,n){if("function"!=typeof n&&(n=maybeCallback(t),t=null),e=path$1.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var r,i,o,s,a=e,c={},u={};function l(){var t=splitRootRe.exec(e);r=t[0].length,i=t[0],o=t[0],s="",isWindows&&!u[o]?fs$1.lstat(o,function(e){if(e)return n(e);u[o]=!0,d()}):process.nextTick(d)}function d(){if(r>=e.length)return t&&(t[a]=e),n(null,e);nextPartRe.lastIndex=r;var c=nextPartRe.exec(e);return s=i,i+=c[0],o=s+c[1],r=nextPartRe.lastIndex,u[o]||t&&t[o]===o?process.nextTick(d):t&&Object.prototype.hasOwnProperty.call(t,o)?h(t[o]):fs$1.lstat(o,p)}function p(e,r){if(e)return n(e);if(!r.isSymbolicLink())return u[o]=!0,t&&(t[o]=o),process.nextTick(d);if(!isWindows){var i=r.dev.toString(32)+":"+r.ino.toString(32);if(c.hasOwnProperty(i))return m(null,c[i],o)}fs$1.stat(o,function(e){if(e)return n(e);fs$1.readlink(o,function(e,t){isWindows||(c[i]=t),m(e,t)})})}function m(e,r,i){if(e)return n(e);var o=path$1.resolve(s,r);t&&(t[i]=o),h(o)}function h(t){e=path$1.resolve(t,e.slice(r)),l()}l()},old={realpathSync:realpathSync,realpath:realpath},fs_realpath=realpath$1;realpath$1.realpath=realpath$1,realpath$1.sync=realpathSync$1,realpath$1.realpathSync=realpathSync$1,realpath$1.monkeypatch=monkeypatch,realpath$1.unmonkeypatch=unmonkeypatch;var origRealpath=fs$1.realpath,origRealpathSync=fs$1.realpathSync,version=process.version,ok=/^v[0-5]\./.test(version);function newError(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function realpath$1(e,t,n){if(ok)return origRealpath(e,t,n);"function"==typeof t&&(n=t,t=null),origRealpath(e,t,function(r,i){newError(r)?old.realpath(e,t,n):n(r,i)})}function realpathSync$1(e,t){if(ok)return origRealpathSync(e,t);try{return origRealpathSync(e,t)}catch(n){if(newError(n))return old.realpathSync(e,t);throw n}}function monkeypatch(){fs$1.realpath=realpath$1,fs$1.realpathSync=realpathSync$1}function unmonkeypatch(){fs$1.realpath=origRealpath,fs$1.realpathSync=origRealpathSync}var concatMap=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=t(e[r],r);isArray(i)?n.push.apply(n,i):n.push(i)}return n},isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},balancedMatch=balanced;function balanced(e,t,n){e instanceof RegExp&&(e=maybeMatch(e,n)),t instanceof RegExp&&(t=maybeMatch(t,n));var r=range(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function maybeMatch(e,t){var n=t.match(e);return n?n[0]:null}function range(e,t,n){var r,i,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(e,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(t,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}balanced.range=range;var braceExpansion=expandTop,escSlash="\0SLASH"+Math.random()+"\0",escOpen="\0OPEN"+Math.random()+"\0",escClose="\0CLOSE"+Math.random()+"\0",escComma="\0COMMA"+Math.random()+"\0",escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(e){return e.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[],n=balancedMatch("{","}",e);if(!n)return e.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=parseCommaParts(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),t.push.apply(t,s),t}function expandTop(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),expand(escapeBraces(e),!0).map(unescapeBraces)):[]}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var n=[],r=balancedMatch("{","}",e);if(!r||/\$$/.test(r.pre))return[e];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=o||s,c=r.body.indexOf(",")>=0;if(!a&&!c)return r.post.match(/,.*\}/)?expand(e=r.pre+"{"+r.body+escClose+r.post):[e];if(a)i=r.body.split(/\.\./);else if(1===(i=parseCommaParts(r.body)).length&&1===(i=expand(i[0],!1).map(embrace)).length)return(d=r.post.length?expand(r.post,!1):[""]).map(function(e){return r.pre+i[0]+e});var u,l=r.pre,d=r.post.length?expand(r.post,!1):[""];if(a){var p=numeric(i[0]),m=numeric(i[1]),h=Math.max(i[0].length,i[1].length),f=3==i.length?Math.abs(numeric(i[2])):1,g=lte;m<p&&(f*=-1,g=gte);var v=i.some(isPadded);u=[];for(var _=p;g(_,m);_+=f){var y;if(s)"\\"===(y=String.fromCharCode(_))&&(y="");else if(y=String(_),v){var w=h-y.length;if(w>0){var C=new Array(w+1).join("0");y=_<0?"-"+C+y.slice(1):C+y}}u.push(y)}}else u=concatMap(i,function(e){return expand(e,!1)});for(var E=0;E<u.length;E++)for(var R=0;R<d.length;R++){var S=l+u[E]+d[R];(!t||a||S)&&n.push(S)}return n}var minimatch_1=minimatch;minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=path$1}catch(e){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}var slashSplit=/\/+/;function filter(e,t){return t=t||{},function(n,r,i){return minimatch(n,e,t)}}function ext(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function minimatch(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new Minimatch(t,n).match(e))}function Minimatch(e,t){if(!(this instanceof Minimatch))return new Minimatch(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==path.sep&&(e=e.split(path.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function make(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map(function(e){return e.split(slashSplit)}),this.debug(this.pattern,n),n=n.map(function(e,t,n){return e.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0}}function parseNegate(){var e=this.pattern,t=!1,n=0;if(!this.options.nonegate){for(var r=0,i=e.length;r<i&&"!"===e.charAt(r);r++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}function braceExpand(e,t){if(t||(t=this instanceof Minimatch?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:braceExpansion(e)}minimatch.filter=filter,minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch,n=function(n,r,i){return t.minimatch(n,r,ext(e,i))};return n.Minimatch=function(n,r){return new t.Minimatch(n,ext(e,r))},n},Minimatch.defaults=function(e){return e&&Object.keys(e).length?minimatch.defaults(e).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=make,Minimatch.prototype.parseNegate=parseNegate,minimatch.braceExpand=function(e,t){return braceExpand(e,t)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return GLOBSTAR;if(""===e)return"";var r,i="",o=!!n.nocase,s=!1,a=[],c=[],u=!1,l=-1,d=-1,p="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function h(){if(r){switch(r){case"*":i+=star,o=!0;break;case"?":i+=qmark,o=!0;break;default:i+="\\"+r}m.debug("clearStateChar %j %j",r,i),r=!1}}for(var f,g=0,v=e.length;g<v&&(f=e.charAt(g));g++)if(this.debug("%s\t%s %s %j",e,g,i,f),s&&reSpecials[f])i+="\\"+f,s=!1;else switch(f){case"/":return!1;case"\\":h(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,g,i,f),u){this.debug("  in class"),"!"===f&&g===d+1&&(f="^"),i+=f;continue}m.debug("call clearStateChar %j",r),h(),r=f,n.noext&&h();continue;case"(":if(u){i+="(";continue}if(!r){i+="\\(";continue}a.push({type:r,start:g-1,reStart:i.length,open:plTypes[r].open,close:plTypes[r].close}),i+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,i),r=!1;continue;case")":if(u||!a.length){i+="\\)";continue}h(),o=!0;var _=a.pop();i+=_.close,"!"===_.type&&c.push(_),_.reEnd=i.length;continue;case"|":if(u||!a.length||s){i+="\\|",s=!1;continue}h(),i+="|";continue;case"[":if(h(),u){i+="\\"+f;continue}u=!0,d=g,l=i.length,i+=f;continue;case"]":if(g===d+1||!u){i+="\\"+f,s=!1;continue}if(u){var y=e.substring(d+1,g);try{RegExp("["+y+"]")}catch(e){var w=this.parse(y,SUBPARSE);i=i.substr(0,l)+"\\["+w[0]+"\\]",o=o||w[1],u=!1;continue}}o=!0,u=!1,i+=f;continue;default:h(),s?s=!1:!reSpecials[f]||"^"===f&&u||(i+="\\"),i+=f}for(u&&(y=e.substr(d+1),w=this.parse(y,SUBPARSE),i=i.substr(0,l)+"\\["+w[0],o=o||w[1]),_=a.pop();_;_=a.pop()){var C=i.slice(_.reStart+_.open.length);this.debug("setting tail",i,_),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){return n||(n="\\"),t+t+n+"|"}),this.debug("tail=%j\n   %s",C,C,_,i);var E="*"===_.type?star:"?"===_.type?qmark:"\\"+_.type;o=!0,i=i.slice(0,_.reStart)+E+"\\("+C}h(),s&&(i+="\\\\");var R=!1;switch(i.charAt(0)){case".":case"[":case"(":R=!0}for(var S=c.length-1;S>-1;S--){var $=c[S],b=i.slice(0,$.reStart),x=i.slice($.reStart,$.reEnd-8),T=i.slice($.reEnd-8,$.reEnd),D=i.slice($.reEnd);T+=D;var P=b.split("(").length-1,k=D;for(g=0;g<P;g++)k=k.replace(/\)[+*?]?/,"");var I="";""===(D=k)&&t!==SUBPARSE&&(I="$"),i=b+x+D+I+T}if(""!==i&&o&&(i="(?=.)"+i),R&&(i=p+i),t===SUBPARSE)return[i,o];if(!o)return globUnescape(e);var O=n.nocase?"i":"";try{var F=new RegExp("^"+i+"$",O)}catch(e){return new RegExp("$.")}return F._glob=e,F._src=i,F}function makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?star:t.dot?twoStarDot:twoStarNoDot,r=t.nocase?"i":"",i=e.map(function(e){return e.map(function(e){return e===GLOBSTAR?n:"string"==typeof e?regExpEscape(e):e._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch(e){this.regexp=!1}return this.regexp}function match(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==path.sep&&(e=e.split(path.sep).join("/")),e=e.split(slashSplit),this.debug(this.pattern,"split",e);var r,i,o=this.set;for(this.debug(this.pattern,"set",o),i=e.length-1;i>=0&&!(r=e[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=e;if(n.matchBase&&1===s.length&&(a=[r]),this.matchOne(a,s,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()},Minimatch.prototype.makeRe=makeRe,minimatch.match=function(e,t,n){var r=new Minimatch(t,n=n||{});return e=e.filter(function(e){return r.match(e)}),r.options.nonull&&!e.length&&e.push(t),e},Minimatch.prototype.match=match,Minimatch.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,o=0,s=e.length,a=t.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,u=t[o],l=e[i];if(this.debug(t,u,l),!1===u)return!1;if(u===GLOBSTAR){this.debug("GLOBSTAR",[t,u,l]);var d=i,p=o+1;if(p===a){for(this.debug("** at the end");i<s;i++)if("."===e[i]||".."===e[i]||!r.dot&&"."===e[i].charAt(0))return!1;return!0}for(;d<s;){var m=e[d];if(this.debug("\nglobstar while",e,d,t,p,m),this.matchOne(e.slice(d),t.slice(p),n))return this.debug("globstar found match!",d,s,m),!0;if("."===m||".."===m||!r.dot&&"."===m.charAt(0)){this.debug("dot detected!",e,d,t,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!n||(this.debug("\n>>> no match, partial?",e,d,t,p),d!==s))}if("string"==typeof u?(c=r.nocase?l.toLowerCase()===u.toLowerCase():l===u,this.debug("string match",u,l,c)):(c=l.match(u),this.debug("pattern match",u,l,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return n;if(o===a)return i===s-1&&""===e[i];throw new Error("wtf?")};var inherits_browser=createCommonjsModule(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),inherits=createCommonjsModule(function(e){try{var t=util;if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=inherits_browser}});function posix(e){return"/"===e.charAt(0)}function win32(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||r)}var pathIsAbsolute="win32"===process.platform?win32:posix,posix_1=posix,win32_1=win32;pathIsAbsolute.posix=posix_1,pathIsAbsolute.win32=win32_1;var alphasort_1=alphasort,alphasorti_1=alphasorti,setopts_1=setopts,ownProp_1=ownProp,makeAbs_1=makeAbs,finish_1=finish,mark_1=mark,isIgnored_1=isIgnored,childrenIgnored_1=childrenIgnored;function ownProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Minimatch$1=minimatch_1.Minimatch;function alphasorti(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function alphasort(e,t){return e.localeCompare(t)}function setupIgnores(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(ignoreMap))}function ignoreMap(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new Minimatch$1(n,{dot:!0})}return{matcher:new Minimatch$1(e,{dot:!0}),gmatcher:t}}function setopts(e,t,n){if(n||(n={}),n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0),e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),setupIgnores(e,n),e.changedCwd=!1;var r=process.cwd();ownProp(n,"cwd")?(e.cwd=path$1.resolve(n.cwd),e.changedCwd=e.cwd!==r):e.cwd=r,e.root=n.root||path$1.resolve(e.cwd,"/"),e.root=path$1.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=pathIsAbsolute(e.cwd)?e.cwd:makeAbs(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new Minimatch$1(t,n),e.options=e.minimatch.options}function finish(e){for(var t=e.nounique,n=t?[]:Object.create(null),r=0,i=e.matches.length;r<i;r++){var o=e.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach(function(e){n[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[r];t?n.push(a):n[a]=!0}}if(t||(n=Object.keys(n)),e.nosort||(n=n.sort(e.nocase?alphasorti:alphasort)),e.mark){for(r=0;r<n.length;r++)n[r]=e._mark(n[r]);e.nodir&&(n=n.filter(function(t){var n=!/\/$/.test(t),r=e.cache[t]||e.cache[makeAbs(e,t)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n}))}e.ignore.length&&(n=n.filter(function(t){return!isIgnored(e,t)})),e.found=n}function mark(e,t){var n=makeAbs(e,t),r=e.cache[n],i=t;if(r){var o="DIR"===r||Array.isArray(r),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=makeAbs(e,i);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return i}function makeAbs(e,t){var n=t;return n="/"===t.charAt(0)?path$1.join(e.root,t):pathIsAbsolute(t)||""===t?t:e.changedCwd?path$1.resolve(e.cwd,t):path$1.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function isIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}function childrenIgnored(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})}var common={alphasort:alphasort_1,alphasorti:alphasorti_1,setopts:setopts_1,ownProp:ownProp_1,makeAbs:makeAbs_1,finish:finish_1,mark:mark_1,isIgnored:isIgnored_1,childrenIgnored:childrenIgnored_1},sync=globSync;globSync.GlobSync=GlobSync;var setopts$1=common.setopts,ownProp$1=common.ownProp,childrenIgnored$1=common.childrenIgnored,isIgnored$1=common.isIgnored;function globSync(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(e,t).found}function GlobSync(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(e,t);if(setopts$1(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}GlobSync.prototype._finish=function(){if(assert(this instanceof GlobSync),this.realpath){var e=this;this.matches.forEach(function(t,n){var r=e.matches[n]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),r[fs_realpath.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;r[e._makeAbs(i)]=!0}})}common.finish(this)},GlobSync.prototype._process=function(e,t,n){assert(this instanceof GlobSync);for(var r,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:r=null;break;default:r=e.slice(0,i).join("/")}var o,s=e.slice(i);null===r?o=".":pathIsAbsolute(r)||pathIsAbsolute(e.join("/"))?(r&&pathIsAbsolute(r)||(r="/"+r),o=r):o=r;var a=this._makeAbs(o);childrenIgnored$1(this,o)||(s[0]===minimatch_1.GLOBSTAR?this._processGlobStar(r,o,a,s,t,n):this._processReaddir(r,o,a,s,t,n))},GlobSync.prototype._processReaddir=function(e,t,n,r,i,o){var s=this._readdir(n,o);if(s){for(var a=r[0],c=!!this.minimatch.negate,u=a._glob,l=this.dot||"."===u.charAt(0),d=[],p=0;p<s.length;p++){if("."!==(f=s[p]).charAt(0)||l)(c&&!e?!f.match(a):f.match(a))&&d.push(f)}var m=d.length;if(0!==m)if(1!==r.length||this.mark||this.stat){r.shift();for(p=0;p<m;p++){var h;f=d[p];h=e?[e,f]:[f],this._process(h.concat(r),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<m;p++){var f=d[p];e&&(f="/"!==e.slice(-1)?e+"/"+f:e+f),"/"!==f.charAt(0)||this.nomount||(f=path$1.join(this.root,f)),this._emitMatch(i,f)}}}},GlobSync.prototype._emitMatch=function(e,t){if(!isIgnored$1(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},GlobSync.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=fs$1.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[e]=r,r||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},GlobSync.prototype._readdir=function(e,t){if(t&&!ownProp$1(this.symlinks,e))return this._readdirInGlobStar(e);if(ownProp$1(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,fs$1.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},GlobSync.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var r=t[n];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,t},GlobSync.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=t.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},GlobSync.prototype._processGlobStar=function(e,t,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var d=0;d<l;d++){if("."!==s[d].charAt(0)||this.dot){var p=c.concat(s[d],a);this._process(p,i,!0);var m=c.concat(s[d],r);this._process(m,i,!0)}}}},GlobSync.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&pathIsAbsolute(e)&&!this.nomount){var r=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=path$1.join(this.root,e):(e=path$1.resolve(this.root,e),r&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},GlobSync.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&ownProp$1(this.cache,t)){var r=this.cache[t];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var i=this.statCache[t];if(!i){var o;try{o=fs$1.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{i=fs$1.statSync(t)}catch(e){i=o}else i=o}this.statCache[t]=i;r=!0;return i&&(r=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||r,(!n||"FILE"!==r)&&r},GlobSync.prototype._mark=function(e){return common.mark(this,e)},GlobSync.prototype._makeAbs=function(e){return common.makeAbs(this,e)};var wrappy_1=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){n[t]=e[t]}),n;function n(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}}var once_1=wrappy_1(once),strict=wrappy_1(onceStrict);function once(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function onceStrict(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}),once_1.strict=strict;var reqs=Object.create(null),inflight_1=wrappy_1(inflight);function inflight(e,t){return reqs[e]?(reqs[e].push(t),null):(reqs[e]=[t],makeres(e))}function makeres(e){return once_1(function t(){var n=reqs[e],r=n.length,i=slice(arguments);try{for(var o=0;o<r;o++)n[o].apply(null,i)}finally{n.length>r?(n.splice(0,r),process.nextTick(function(){t.apply(null,i)})):delete reqs[e]}})}function slice(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r]=e[r];return n}var glob_1=glob,EE=events$1.EventEmitter,setopts$2=common.setopts,ownProp$2=common.ownProp,childrenIgnored$2=common.childrenIgnored,isIgnored$2=common.isIgnored;function glob(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return sync(e,t)}return new Glob(e,t,n)}glob.sync=sync;var GlobSync$1=glob.GlobSync=sync.GlobSync;function extend(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function Glob(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new GlobSync$1(e,t)}if(!(this instanceof Glob))return new Glob(e,t,n);setopts$2(this,e,t),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=once_1(n),this.on("error",n),this.on("end",function(e){n(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return a();for(var o=!0,s=0;s<r;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}o=!1}function readdirCb(e,t,n){return function(r,i){r?e._readdirError(t,r,n):e._readdirEntries(t,i,n)}}glob.glob=glob,glob.hasMagic=function(e,t){var n=extend({},t);n.noprocess=!0;var r=new Glob(e,n).minimatch.set;if(!e)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},glob.Glob=Glob,inherits(Glob,EE),Glob.prototype._finish=function(){if(assert(this instanceof Glob),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this),this.emit("end",this.found)}},Glob.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--e&&t._finish()}},Glob.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),i=this,o=r.length;if(0===o)return t();var s=this.matches[e]=Object.create(null);r.forEach(function(n,r){n=i._makeAbs(n),fs_realpath.realpath(n,i.realpathCache,function(r,a){r?"stat"===r.syscall?s[n]=!0:i.emit("error",r):s[a]=!0,0==--o&&(i.matches[e]=s,t())})})},Glob.prototype._mark=function(e){return common.mark(this,e)},Glob.prototype._makeAbs=function(e){return common.makeAbs(this,e)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<r.length;t++){var i=r[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},Glob.prototype._process=function(e,t,n,r){if(assert(this instanceof Glob),assert("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,r]);else{for(var i,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,r);case 0:i=null;break;default:i=e.slice(0,o).join("/")}var s,a=e.slice(o);null===i?s=".":pathIsAbsolute(i)||pathIsAbsolute(e.join("/"))?(i&&pathIsAbsolute(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(childrenIgnored$2(this,s))return r();a[0]===minimatch_1.GLOBSTAR?this._processGlobStar(i,s,c,a,t,n,r):this._processReaddir(i,s,c,a,t,n,r)}},Glob.prototype._processReaddir=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,function(c,u){return a._processReaddir2(e,t,n,r,i,o,u,s)})},Glob.prototype._processReaddir2=function(e,t,n,r,i,o,s,a){if(!s)return a();for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,d=this.dot||"."===l.charAt(0),p=[],m=0;m<s.length;m++){if("."!==(f=s[m]).charAt(0)||d)(u&&!e?!f.match(c):f.match(c))&&p.push(f)}var h=p.length;if(0===h)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(m=0;m<h;m++){var f=p[m];e&&(f="/"!==e?e+"/"+f:e+f),"/"!==f.charAt(0)||this.nomount||(f=path$1.join(this.root,f)),this._emitMatch(i,f)}return a()}r.shift();for(m=0;m<h;m++){f=p[m];e&&(f="/"!==e?e+"/"+f:e+f),this._process([f].concat(r),i,o,a)}a()},Glob.prototype._emitMatch=function(e,t){if(!this.aborted&&!isIgnored$2(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=pathIsAbsolute(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0;var i=this.statCache[n];i&&this.emit("stat",t,i),this.emit("match",t)}}},Glob.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,r=inflight_1("lstat\0"+e,function(r,i){if(r&&"ENOENT"===r.code)return t();var o=i&&i.isSymbolicLink();n.symlinks[e]=o,o||!i||i.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())});r&&fs$1.lstat(e,r)}},Glob.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=inflight_1("readdir\0"+e+"\0"+t,n))){if(t&&!ownProp$2(this.symlinks,e))return this._readdirInGlobStar(e,n);if(ownProp$2(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}fs$1.readdir(e,readdirCb(this,e,n))}},Glob.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,n(null,t)}},Glob.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},Glob.prototype._processGlobStar=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,function(c,u){a._processGlobStar2(e,t,n,r,i,o,u,s)})},Glob.prototype._processGlobStar2=function(e,t,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,a);var d=this.symlinks[n],p=s.length;if(d&&o)return a();for(var m=0;m<p;m++){if("."!==s[m].charAt(0)||this.dot){var h=u.concat(s[m],c);this._process(h,i,!0,a);var f=u.concat(s[m],r);this._process(f,i,!0,a)}}a()},Glob.prototype._processSimple=function(e,t,n){var r=this;this._stat(e,function(i,o){r._processSimple2(e,t,i,o,n)})},Glob.prototype._processSimple2=function(e,t,n,r,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!r)return i();if(e&&pathIsAbsolute(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=path$1.join(this.root,e):(e=path$1.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},Glob.prototype._stat=function(e,t){var n=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&ownProp$2(this.cache,n)){var i=this.cache[n];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return t(null,i);if(r&&"FILE"===i)return t()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return t(null,o);var s=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===s?t():t(null,s,o)}var a=this,c=inflight_1("stat\0"+n,function(r,i){if(i&&i.isSymbolicLink())return fs$1.stat(n,function(r,o){r?a._stat2(e,n,null,i,t):a._stat2(e,n,r,o,t)});a._stat2(e,n,r,i,t)});c&&fs$1.lstat(n,c)},Glob.prototype._stat2=function(e,t,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=r,"/"===t.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,r)};var rimraf_1=rimraf;rimraf.sync=rimrafSync;var _0666=parseInt("666",8),defaultGlobOpts={nosort:!0,silent:!0},timeout=0,isWindows$1="win32"===process.platform;function defaults(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(function(t){e[t]=e[t]||fs$1[t],e[t+="Sync"]=e[t]||fs$1[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),e.disableGlob=e.disableGlob||!1,e.glob=e.glob||defaultGlobOpts}function rimraf(e,t,n){"function"==typeof t&&(n=t,t={}),assert(e,"rimraf: missing path"),assert.equal(typeof e,"string","rimraf: path should be a string"),assert.equal(typeof n,"function","rimraf: callback function required"),assert(t,"rimraf: invalid options argument provided"),assert.equal(typeof t,"object","rimraf: options should be object"),defaults(t);var r=0,i=null,o=0;if(t.disableGlob||!glob_1.hasMagic(e))return s(null,[e]);function s(e,s){return e?n(e):0===(o=s.length)?n():void s.forEach(function(e){rimraf_(e,t,function s(a){if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&r<t.maxBusyTries)return r++,setTimeout(function(){rimraf_(e,t,s)},100*r);if("EMFILE"===a.code&&timeout<t.emfileWait)return setTimeout(function(){rimraf_(e,t,s)},timeout++);"ENOENT"===a.code&&(a=null)}timeout=0,function(e){i=i||e,0==--o&&n(i)}(a)})})}t.lstat(e,function(n,r){if(!n)return s(null,[e]);glob_1(e,t.glob,s)})}function rimraf_(e,t,n){assert(e),assert(t),assert("function"==typeof n),t.lstat(e,function(r,i){return r&&"ENOENT"===r.code?n(null):(r&&"EPERM"===r.code&&isWindows$1&&fixWinEPERM(e,t,r,n),i&&i.isDirectory()?rmdir(e,t,r,n):void t.unlink(e,function(r){if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return isWindows$1?fixWinEPERM(e,t,r,n):rmdir(e,t,r,n);if("EISDIR"===r.code)return rmdir(e,t,r,n)}return n(r)}))})}function fixWinEPERM(e,t,n,r){assert(e),assert(t),assert("function"==typeof r),n&&assert(n instanceof Error),t.chmod(e,_0666,function(i){i?r("ENOENT"===i.code?null:n):t.stat(e,function(i,o){i?r("ENOENT"===i.code?null:n):o.isDirectory()?rmdir(e,t,n,r):t.unlink(e,r)})})}function fixWinEPERMSync(e,t,n){assert(e),assert(t),n&&assert(n instanceof Error);try{t.chmodSync(e,_0666)}catch(e){if("ENOENT"===e.code)return;throw n}try{var r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?rmdirSync(e,t,n):t.unlinkSync(e)}function rmdir(e,t,n,r){assert(e),assert(t),n&&assert(n instanceof Error),assert("function"==typeof r),t.rmdir(e,function(i){!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):rmkids(e,t,r)})}function rmkids(e,t,n){assert(e),assert(t),assert("function"==typeof n),t.readdir(e,function(r,i){if(r)return n(r);var o,s=i.length;if(0===s)return t.rmdir(e,n);i.forEach(function(r){rimraf(path$1.join(e,r),t,function(r){if(!o)return r?n(o=r):void(0==--s&&t.rmdir(e,n))})})})}function rimrafSync(e,t){var n;if(defaults(t=t||{}),assert(e,"rimraf: missing path"),assert.equal(typeof e,"string","rimraf: path should be a string"),assert(t,"rimraf: missing options"),assert.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!glob_1.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch(r){n=glob_1.sync(e,t.glob)}if(n.length)for(var r=0;r<n.length;r++){e=n[r];try{var i=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&isWindows$1&&fixWinEPERMSync(e,t,n)}try{i&&i.isDirectory()?rmdirSync(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return isWindows$1?fixWinEPERMSync(e,t,n):rmdirSync(e,t,n);if("EISDIR"!==n.code)throw n;rmdirSync(e,t,n)}}}function rmdirSync(e,t,n){assert(e),assert(t),n&&assert(n instanceof Error);try{t.rmdirSync(e)}catch(r){if("ENOENT"===r.code)return;if("ENOTDIR"===r.code)throw n;"ENOTEMPTY"!==r.code&&"EEXIST"!==r.code&&"EPERM"!==r.code||rmkidsSync(e,t)}}function rmkidsSync(e,t){assert(e),assert(t),t.readdirSync(e).forEach(function(n){rimrafSync(path$1.join(e,n),t)});for(var n=isWindows$1?100:1,r=0;;){var i=!0;try{var o=t.rmdirSync(e,t);return i=!1,o}finally{if(++r<n&&i)continue}}}var fsPlus=createCommonjsModule(function(e){(function(){var t,n,r,i,o,s,a,c,u,l,d,p,m,h,f,g,v,_,y,w=[].slice;c=fs$1,o=module$1,g=path$1,y=underscorePlus,s=async$1,f=mkdirp,v=rimraf_1,u={__esModule:!1,getHomeDirectory:function(){return"win32"!==process.platform||process.env.HOME?process.env.HOME:process.env.USERPROFILE},absolute:function(e){if(null==e)return null;e=u.resolveHome(e);try{return c.realpathSync(e)}catch(t){return e}},normalize:function(e){return null==e?null:u.resolveHome(g.normalize(e.toString()))},resolveHome:function(e){return"~"===e?u.getHomeDirectory():0===e.indexOf("~"+g.sep)?""+u.getHomeDirectory()+e.substring(1):e},tildify:function(e){var t,n;return"win32"===process.platform?e:(n=u.normalize(e),null==(t=u.getHomeDirectory())?e:n===t?"~":n.startsWith(g.join(t,g.sep))?g.join("~",g.sep,n.substring(t.length+1)):e)},getAppDataDirectory:function(){switch(process.platform){case"darwin":return u.absolute(g.join("~","Library","Application Support"));case"linux":return"/var/lib";case"win32":return process.env.APPDATA;default:return null}},isAbsolute:function(e){return null==e&&(e=""),"win32"!==process.platform?"/"===e[0]:":"===e[1]||"\\"===e[0]&&"\\"===e[1]},existsSync:function(e){return m(e)&&!1!==_(e)},isDirectorySync:function(e){var t;return!!m(e)&&(!!(t=_(e))&&t.isDirectory())},isDirectory:function(e,t){return m(e)?c.stat(e,function(e,n){return t(null==e&&n.isDirectory())}):t(!1)},isFileSync:function(e){var t;return!!m(e)&&(!!(t=_(e))&&t.isFile())},isSymbolicLinkSync:function(e){var t;return!!m(e)&&(!!(t=h(e))&&t.isSymbolicLink())},isSymbolicLink:function(e,t){return m(e)?c.lstat(e,function(e,n){return"function"==typeof t?t(null!=n&&n.isSymbolicLink()):void 0}):process.nextTick(function(){return"function"==typeof t?t(!1):void 0})},isExecutableSync:function(e){var t;return!!m(e)&&(!!(t=_(e))&&0!=(1&t.mode))},getSizeSync:function(e){var t;return m(e)&&null!=(t=_(e).size)?t:-1},listSync:function(e,t){var n;return u.isDirectorySync(e)?(n=c.readdirSync(e),t&&(n=u.filterExtensions(n,t)),n=(n=n.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map(function(t){return g.join(e,t)})):[]},list:function(){var e,t,n,r;return r=arguments[0],(n=2<=arguments.length?w.call(arguments,1):[]).length>1&&(t=n.shift()),e=n.shift(),c.readdir(r,function(n,i){return null!=n?e(n):(t&&(i=u.filterExtensions(i,t)),i=(i=i.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map(function(e){return g.join(r,e)}),e(null,i))})},filterExtensions:function(e,t){return t=t.map(function(e){return""===e?e:"."+e.replace(/^\./,"")}),e.filter(function(e){return y.include(t,g.extname(e))})},listTreeSync:function(e){var t,n;return n=[],t=function(e){return n.push(e),!0},u.traverseTreeSync(e,t,t),n},move:function(e,t,n){return d(e,t,function(r,i){var o,s;if(!r)return i?(s=g.dirname(t),c.exists(s,function(r){if(!r)return u.makeTree(s,function(r){if(!r)return c.rename(e,t,n);n(r)});c.rename(e,t,n)})):((o=new Error("'"+t+"' already exists.")).code="EEXIST",void n(o));n(r)})},moveSync:function(e,t){var n,r;if(!p(e,t))throw(n=new Error("'"+t+"' already exists.")).code="EEXIST",n;return r=g.dirname(t),c.existsSync(r)||u.makeTreeSync(r),c.renameSync(e,t)},removeSync:function(e){return v.sync(e)},remove:function(e,t){return v(e,t)},writeFileSync:function(e,t,n){return f.sync(g.dirname(e)),c.writeFileSync(e,t,n)},writeFile:function(e,t,n,r){return r=y.last(arguments),f(g.dirname(e),function(i){return null!=i?"function"==typeof r?r(i):void 0:c.writeFile(e,t,n,r)})},copy:function(e,t,n){return f(g.dirname(t),function(r){var i,o;if(null==r)return(o=c.createReadStream(e)).on("error",function(e){return"function"==typeof n&&n(e),n=null}),(i=c.createWriteStream(t)).on("error",function(e){return"function"==typeof n&&n(e),n=null}),i.on("close",function(){return"function"==typeof n&&n(),n=null}),o.pipe(i);"function"==typeof n&&n(r)})},copySync:function(e,t){var n,r,i,o,s,a,l;for(o=c.readdirSync(e),f.sync(t),l=[],s=0,a=o.length;s<a;s++)r=o[s],i=g.join(e,r),n=g.join(t,r),u.isDirectorySync(i)?l.push(u.copySync(i,n)):l.push(u.copyFileSync(i,n));return l},copyFileSync:function(e,t,n){var r,i,o,s,a,u;null==n&&(n=16384),f.sync(g.dirname(t)),s=null,a=null;try{for(s=c.openSync(e,"r"),a=c.openSync(t,"w"),i=1,o=0,u=[];i>0;)r=new Buffer(n),i=c.readSync(s,r,0,r.length,o),c.writeSync(a,r,0,i,o),u.push(o+=i);return u}finally{null!=s&&c.closeSync(s),null!=a&&c.closeSync(a)}},makeTreeSync:function(e){if(!u.isDirectorySync(e))return f.sync(e)},makeTree:function(e,t){return u.isDirectory(e,function(n){return n?"function"==typeof t?t():void 0:f(e,function(e){return"function"==typeof t?t(e):void 0})})},traverseTreeSync:function(e,t,n){var r;if(null==n&&(n=t),u.isDirectorySync(e))return(r=function(e,t,n){var i,o,s,a,u,l,d;for(u=0,l=(d=c.readdirSync(e)).length;u<l;u++)o=d[u],i=g.join(e,o),(a=c.lstatSync(i)).isSymbolicLink()&&(s=_(i))&&(a=s),a.isDirectory()?n(i)&&r(i,t,n):a.isFile()&&t(i)})(e,t,n)},traverseTree:function(e,t,n,r){return c.readdir(e,function(i,o){var a,u,l,d,p;if(i)return"function"==typeof r?r():void 0;for((u=s.queue(function(e,r){return c.stat(e,function(i,o){return i?r(i):o.isFile()?(t(e),r()):o.isDirectory()&&n(e)?c.readdir(e,function(t,n){var i,o,s;if(t)return r(t);for(o=0,s=n.length;o<s;o++)i=n[o],u.unshift(g.join(e,i));return r()}):r()})})).concurrency=1,u.drain=r,p=[],l=0,d=o.length;l<d;l++)a=o[l],p.push(u.push(g.join(e,a)));return p})},md5ForPath:function(e){var t;return t=c.readFileSync(e),crypto.createHash("md5").update(t).digest("hex")},resolve:function(){var e,t,n,r,i,o,s,a,c,l;if(e=1<=arguments.length?w.call(arguments,0):[],y.isArray(y.last(e))&&(n=e.pop()),o=null!=(l=e.pop())?l.toString():void 0,i=e,o){if(u.isAbsolute(o)){if(n&&(s=u.resolveExtension(o,n)))return s;if(u.existsSync(o))return o}for(a=0,c=i.length;a<c;a++)if(r=i[a],t=g.join(r,o),n){if(s=u.resolveExtension(t,n))return s}else if(u.existsSync(t))return u.absolute(t)}},resolveOnLoadPath:function(){var t,n,r;return t=1<=arguments.length?w.call(arguments,0):[],r=null,r=null!=e.paths?e.paths:process.resourcesPath?[g.join(process.resourcesPath,"app","node_modules")]:[],n=o.globalPaths.concat(r),u.resolve.apply(u,w.call(n).concat(w.call(t)))},resolveExtension:function(e,t){var n,r,i,o;for(i=0,o=t.length;i<o;i++)if(""===(n=t[i])){if(u.existsSync(e))return u.absolute(e)}else if(r=e+"."+n.replace(/^\./,""),u.existsSync(r))return u.absolute(r)},isCompressedExtension:function(e){return null!=e&&n.hasOwnProperty(e.toLowerCase())},isImageExtension:function(e){return null!=e&&r.hasOwnProperty(e.toLowerCase())},isPdfExtension:function(e){return".pdf"===(null!=e?e.toLowerCase():void 0)},isBinaryExtension:function(e){return null!=e&&t.hasOwnProperty(e.toLowerCase())},isReadmePath:function(e){var t;return t=g.extname(e),"readme"===g.basename(e,t).toLowerCase()&&(""===t||u.isMarkdownExtension(t))},isMarkdownExtension:function(e){return null!=e&&i.hasOwnProperty(e.toLowerCase())},isCaseInsensitive:function(){var e,t;return null==u.caseInsensitiveFs&&(e=_(process.execPath.toLowerCase()),t=_(process.execPath.toUpperCase()),u.caseInsensitiveFs=!(!e||!t)&&(e.dev===t.dev&&e.ino===t.ino)),u.caseInsensitiveFs},isCaseSensitive:function(){return!u.isCaseInsensitive()},statSyncNoException:function(){var e;return e=1<=arguments.length?w.call(arguments,0):[],_.apply(null,e)},lstatSyncNoException:function(){var e;return e=1<=arguments.length?w.call(arguments,0):[],h.apply(null,e)}},l=null,a=function(){return null===l&&(l=process.versions.electron&&parseInt(process.versions.electron.split(".")[0])<=2),l},_=function(){var e;if(e=1<=arguments.length?w.call(arguments,0):[],c.statSyncNoException&&a())return c.statSyncNoException.apply(c,e);try{return c.statSync.apply(c,e)}catch(e){return!1}},h=function(){var e;if(e=1<=arguments.length?w.call(arguments,0):[],c.lstatSyncNoException&&a())return c.lstatSyncNoException.apply(c,e);try{return c.lstatSync.apply(c,e)}catch(e){return!1}},t={".ds_store":!0,".a":!0,".exe":!0,".o":!0,".pyc":!0,".pyo":!0,".so":!0,".woff":!0},n={".bz2":!0,".egg":!0,".epub":!0,".gem":!0,".gz":!0,".jar":!0,".lz":!0,".lzma":!0,".lzo":!0,".rar":!0,".tar":!0,".tgz":!0,".war":!0,".whl":!0,".xpi":!0,".xz":!0,".z":!0,".zip":!0},r={".gif":!0,".ico":!0,".jpeg":!0,".jpg":!0,".png":!0,".tif":!0,".tiff":!0,".webp":!0},i={".markdown":!0,".md":!0,".mdown":!0,".mkd":!0,".mkdown":!0,".rmd":!0,".ron":!0},m=function(e){return null!=e&&"string"==typeof e&&e.length>0},d=function(e,t,n){return c.stat(e,function(r,i){if(!r)return c.stat(t,function(r,o){if(!r||"ENOENT"!==r.code)return n(void 0,e.toLowerCase()===t.toLowerCase()&&i.dev===o.dev&&i.ino===o.ino);n(void 0,!0)});n(r)})},p=function(e,t){var n,r;return r=_(e),n=_(t),!r||!n||e.toLowerCase()===t.toLowerCase()&&r.dev===n.dev&&r.ino===n.ino},e.exports=new Proxy({},{get:function(e,t){var n;return null!=(n=u[t])?n:c[t]},set:function(e,t,n){return u[t]=n}})}).call(commonjsGlobal)}),fs=unwrapExports(fsPlus);async function findFlowconfig(e,t,n){const r=path$1.resolve(t),i=path$1.join(r,e);return await checkFileExists(i)?i:r===n?null:findFlowconfig(e,path$1.dirname(r),n)}function checkFileExists(e){return new Promise(t=>{fs.access(e,e=>{t(!e)})})}function findDocumentFlowconfig(e,t){const n=vscode.workspace.getWorkspaceFolder(t.uri);return n?findFlowconfig(e,path$1.dirname(t.uri.fsPath),n.uri.fsPath):Promise.resolve(null)}class FlowconfigCache{constructor(e){_defineProperty(this,"_cache",new Map),_defineProperty(this,"_flowconfigName",void 0),this._flowconfigName=e}async get(e){const t=e.uri.fsPath,n=this._cache.get(t);if(void 0!==n)return Promise.resolve(n);const r=await findDocumentFlowconfig(this._flowconfigName,e);return this._cache.set(t,r),r}delete(e){this._cache.delete(e.uri.fsPath)}}function format(e){try{return runPrettier(`type t = ${e}`).replace("type t = ","")}catch(t){try{return runPrettier(e)}catch(t){return e}}}function runPrettier(e){return prettier.format(e,{parser:"flow",plugins:[parserFlow],semi:!1,printWidth:60})}function formatMarkedDownString(e){const t=format(extractCode(e,"flow")),n=new vscode.MarkdownString;return n.appendCodeblock(t,"javascript"),n}function extractCode(e,t){return e.value.replace(`\`\`\`${t}`,"").replace("```","").trim()}var semver$1=createCommonjsModule(function(e,t){var n;t=e.exports=p,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=t.tokens={},c=0;function u(e){a[e]=c++}u("NUMERICIDENTIFIER"),s[a.NUMERICIDENTIFIER]="0|[1-9]\\d*",u("NUMERICIDENTIFIERLOOSE"),s[a.NUMERICIDENTIFIERLOOSE]="[0-9]+",u("NONNUMERICIDENTIFIER"),s[a.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",u("MAINVERSION"),s[a.MAINVERSION]="("+s[a.NUMERICIDENTIFIER]+")\\.("+s[a.NUMERICIDENTIFIER]+")\\.("+s[a.NUMERICIDENTIFIER]+")",u("MAINVERSIONLOOSE"),s[a.MAINVERSIONLOOSE]="("+s[a.NUMERICIDENTIFIERLOOSE]+")\\.("+s[a.NUMERICIDENTIFIERLOOSE]+")\\.("+s[a.NUMERICIDENTIFIERLOOSE]+")",u("PRERELEASEIDENTIFIER"),s[a.PRERELEASEIDENTIFIER]="(?:"+s[a.NUMERICIDENTIFIER]+"|"+s[a.NONNUMERICIDENTIFIER]+")",u("PRERELEASEIDENTIFIERLOOSE"),s[a.PRERELEASEIDENTIFIERLOOSE]="(?:"+s[a.NUMERICIDENTIFIERLOOSE]+"|"+s[a.NONNUMERICIDENTIFIER]+")",u("PRERELEASE"),s[a.PRERELEASE]="(?:-("+s[a.PRERELEASEIDENTIFIER]+"(?:\\."+s[a.PRERELEASEIDENTIFIER]+")*))",u("PRERELEASELOOSE"),s[a.PRERELEASELOOSE]="(?:-?("+s[a.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+s[a.PRERELEASEIDENTIFIERLOOSE]+")*))",u("BUILDIDENTIFIER"),s[a.BUILDIDENTIFIER]="[0-9A-Za-z-]+",u("BUILD"),s[a.BUILD]="(?:\\+("+s[a.BUILDIDENTIFIER]+"(?:\\."+s[a.BUILDIDENTIFIER]+")*))",u("FULL"),u("FULLPLAIN"),s[a.FULLPLAIN]="v?"+s[a.MAINVERSION]+s[a.PRERELEASE]+"?"+s[a.BUILD]+"?",s[a.FULL]="^"+s[a.FULLPLAIN]+"$",u("LOOSEPLAIN"),s[a.LOOSEPLAIN]="[v=\\s]*"+s[a.MAINVERSIONLOOSE]+s[a.PRERELEASELOOSE]+"?"+s[a.BUILD]+"?",u("LOOSE"),s[a.LOOSE]="^"+s[a.LOOSEPLAIN]+"$",u("GTLT"),s[a.GTLT]="((?:<|>)?=?)",u("XRANGEIDENTIFIERLOOSE"),s[a.XRANGEIDENTIFIERLOOSE]=s[a.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",u("XRANGEIDENTIFIER"),s[a.XRANGEIDENTIFIER]=s[a.NUMERICIDENTIFIER]+"|x|X|\\*",u("XRANGEPLAIN"),s[a.XRANGEPLAIN]="[v=\\s]*("+s[a.XRANGEIDENTIFIER]+")(?:\\.("+s[a.XRANGEIDENTIFIER]+")(?:\\.("+s[a.XRANGEIDENTIFIER]+")(?:"+s[a.PRERELEASE]+")?"+s[a.BUILD]+"?)?)?",u("XRANGEPLAINLOOSE"),s[a.XRANGEPLAINLOOSE]="[v=\\s]*("+s[a.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[a.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[a.XRANGEIDENTIFIERLOOSE]+")(?:"+s[a.PRERELEASELOOSE]+")?"+s[a.BUILD]+"?)?)?",u("XRANGE"),s[a.XRANGE]="^"+s[a.GTLT]+"\\s*"+s[a.XRANGEPLAIN]+"$",u("XRANGELOOSE"),s[a.XRANGELOOSE]="^"+s[a.GTLT]+"\\s*"+s[a.XRANGEPLAINLOOSE]+"$",u("COERCE"),s[a.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",u("COERCERTL"),o[a.COERCERTL]=new RegExp(s[a.COERCE],"g"),u("LONETILDE"),s[a.LONETILDE]="(?:~>?)",u("TILDETRIM"),s[a.TILDETRIM]="(\\s*)"+s[a.LONETILDE]+"\\s+",o[a.TILDETRIM]=new RegExp(s[a.TILDETRIM],"g");u("TILDE"),s[a.TILDE]="^"+s[a.LONETILDE]+s[a.XRANGEPLAIN]+"$",u("TILDELOOSE"),s[a.TILDELOOSE]="^"+s[a.LONETILDE]+s[a.XRANGEPLAINLOOSE]+"$",u("LONECARET"),s[a.LONECARET]="(?:\\^)",u("CARETTRIM"),s[a.CARETTRIM]="(\\s*)"+s[a.LONECARET]+"\\s+",o[a.CARETTRIM]=new RegExp(s[a.CARETTRIM],"g");u("CARET"),s[a.CARET]="^"+s[a.LONECARET]+s[a.XRANGEPLAIN]+"$",u("CARETLOOSE"),s[a.CARETLOOSE]="^"+s[a.LONECARET]+s[a.XRANGEPLAINLOOSE]+"$",u("COMPARATORLOOSE"),s[a.COMPARATORLOOSE]="^"+s[a.GTLT]+"\\s*("+s[a.LOOSEPLAIN]+")$|^$",u("COMPARATOR"),s[a.COMPARATOR]="^"+s[a.GTLT]+"\\s*("+s[a.FULLPLAIN]+")$|^$",u("COMPARATORTRIM"),s[a.COMPARATORTRIM]="(\\s*)"+s[a.GTLT]+"\\s*("+s[a.LOOSEPLAIN]+"|"+s[a.XRANGEPLAIN]+")",o[a.COMPARATORTRIM]=new RegExp(s[a.COMPARATORTRIM],"g");u("HYPHENRANGE"),s[a.HYPHENRANGE]="^\\s*("+s[a.XRANGEPLAIN]+")\\s+-\\s+("+s[a.XRANGEPLAIN]+")\\s*$",u("HYPHENRANGELOOSE"),s[a.HYPHENRANGELOOSE]="^\\s*("+s[a.XRANGEPLAINLOOSE]+")\\s+-\\s+("+s[a.XRANGEPLAINLOOSE]+")\\s*$",u("STAR"),s[a.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<c;l++)n(l,s[l]),o[l]||(o[l]=new RegExp(s[l]));function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof p)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[a.LOOSE]:o[a.FULL]).test(e))return null;try{return new p(e,t)}catch(e){return null}}function p(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof p){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof p))return new p(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=d,t.valid=function(e,t){var n=d(e,t);return n?n.version:null},t.clean=function(e,t){var n=d(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=p,p.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},p.prototype.toString=function(){return this.version},p.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof p||(e=new p(e,this.options)),this.compareMain(e)||this.comparePre(e)},p.prototype.compareMain=function(e){return e instanceof p||(e=new p(e,this.options)),h(this.major,e.major)||h(this.minor,e.minor)||h(this.patch,e.patch)},p.prototype.comparePre=function(e){if(e instanceof p||(e=new p(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return h(r,i)}while(++t)},p.prototype.compareBuild=function(e){e instanceof p||(e=new p(e,this.options));var t=0;do{var r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return h(r,i)}while(++t)},p.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new p(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(_(e,t))return null;var n=d(e),r=d(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=h;var m=/^[0-9]+$/;function h(e,t){var n=m.test(e),r=m.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function f(e,t,n){return new p(e,n).compare(new p(t,n))}function g(e,t,n){return f(e,t,n)>0}function v(e,t,n){return f(e,t,n)<0}function _(e,t,n){return 0===f(e,t,n)}function y(e,t,n){return 0!==f(e,t,n)}function w(e,t,n){return f(e,t,n)>=0}function C(e,t,n){return f(e,t,n)<=0}function E(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return _(e,n,r);case"!=":return y(e,n,r);case">":return g(e,n,r);case">=":return w(e,n,r);case"<":return v(e,n,r);case"<=":return C(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function R(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof R){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof R))return new R(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===S?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return h(t,e)},t.major=function(e,t){return new p(e,t).major},t.minor=function(e,t){return new p(e,t).minor},t.patch=function(e,t){return new p(e,t).patch},t.compare=f,t.compareLoose=function(e,t){return f(e,t,!0)},t.compareBuild=function(e,t,n){var r=new p(e,n),i=new p(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return f(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compareBuild(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.compareBuild(r,e,n)})},t.gt=g,t.lt=v,t.eq=_,t.neq=y,t.gte=w,t.lte=C,t.cmp=E,t.Comparator=R;var S={};function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new $(e.raw,t);if(e instanceof R)return new $(e.value,t);if(!(this instanceof $))return new $(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function b(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every(function(e){return i.intersects(e,t)}),i=r.pop();return n}function x(e){return!e||"x"===e.toLowerCase()||"*"===e}function T(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=x(n)?"":x(r)?">="+n+".0.0":x(i)?">="+n+"."+r+".0":">="+t)+" "+(a=x(c)?"":x(u)?"<"+(+c+1)+".0.0":x(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function D(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==S&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function P(e,t,n){try{t=new $(t,n)}catch(e){return!1}return t.test(e)}function k(e,t,n,r){var i,o,s,a,c;switch(e=new p(e,r),t=new $(t,r),n){case">":i=g,o=C,s=v,a=">",c=">=";break;case"<":i=v,o=w,s=g,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(P(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,m=null;if(l.forEach(function(e){e.semver===S&&(e=new R(">=0.0.0")),d=d||e,m=m||e,i(e.semver,d.semver,r)?d=e:s(e.semver,m.semver,r)&&(m=e)}),d.operator===a||d.operator===c)return!1;if((!m.operator||m.operator===a)&&o(e,m.semver))return!1;if(m.operator===c&&s(e,m.semver))return!1}return!0}R.prototype.parse=function(e){var t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new p(n[2],this.options.loose):this.semver=S},R.prototype.toString=function(){return this.value},R.prototype.test=function(e){if(n("Comparator.test",e,this.options.loose),this.semver===S||e===S)return!0;if("string"==typeof e)try{e=new p(e,this.options)}catch(e){return!1}return E(e,this.operator,this.semver,this.options)},R.prototype.intersects=function(e,t){if(!(e instanceof R))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new $(e.value,t),P(this.value,n,t));if(""===e.operator)return""===e.value||(n=new $(this.value,t),P(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=E(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=E(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=$,$.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},$.prototype.toString=function(){return this.range},$.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[a.HYPHENRANGELOOSE]:o[a.HYPHENRANGE];e=e.replace(r,T),n("hyphen replace",e),e=e.replace(o[a.COMPARATORTRIM],"$1$2$3"),n("comparator trim",e,o[a.COMPARATORTRIM]),e=(e=(e=e.replace(o[a.TILDETRIM],"$1~")).replace(o[a.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[a.CARETLOOSE]:o[a.CARET];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),x(r)?a="":x(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":x(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t.loose?o[a.TILDELOOSE]:o[a.TILDE];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),x(r)?a="":x(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":x(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t.loose?o[a.XRANGELOOSE]:o[a.XRANGE];return e.replace(r,function(r,i,o,s,a,c){n("xRange",e,r,i,o,s,a,c);var u=x(o),l=u||x(s),d=l||x(a),p=d;return"="===i&&p&&(i=""),c=t.includePrerelease?"-0":"",u?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&p?(l&&(s=0),a=0,">"===i?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",l?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a+c):l?r=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:d&&(r=">="+o+"."+s+".0"+c+" <"+o+"."+(+s+1)+".0"+c),n("xRange return",r),r})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[a.STAR],"")}(e,t),n("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new R(e,this.options)},this)},$.prototype.intersects=function(e,t){if(!(e instanceof $))throw new TypeError("a Range is required");return this.set.some(function(n){return b(n,t)&&e.set.some(function(e){return b(e,t)&&n.every(function(n){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new $(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},$.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new p(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1},t.satisfies=P,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new $(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new p(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new $(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new p(r=e,n)))}),r},t.minVersion=function(e,t){e=new $(e,t);var n=new p("0.0.0");if(e.test(n))return n;if(n=new p("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(e){var t=new p(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!g(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new $(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return k(e,t,"<",n)},t.gtr=function(e,t,n){return k(e,t,">",n)},t.outside=k,t.prerelease=function(e,t){var n=d(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new $(e,n),t=new $(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof p)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=o[a.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),o[a.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;o[a.COERCERTL].lastIndex=-1}else n=e.match(o[a.COERCE]);if(null===n)return null;return d(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}),semver_1$1=semver$1.SEMVER_SPEC_VERSION,semver_2$1=semver$1.re,semver_3$1=semver$1.src,semver_4$1=semver$1.tokens,semver_5$1=semver$1.parse,semver_6$1=semver$1.valid,semver_7$1=semver$1.clean,semver_8$1=semver$1.SemVer,semver_9$1=semver$1.inc,semver_10$1=semver$1.diff,semver_11$1=semver$1.compareIdentifiers,semver_12$1=semver$1.rcompareIdentifiers,semver_13$1=semver$1.major,semver_14$1=semver$1.minor,semver_15$1=semver$1.patch,semver_16$1=semver$1.compare,semver_17$1=semver$1.compareLoose,semver_18$1=semver$1.compareBuild,semver_19$1=semver$1.rcompare,semver_20$1=semver$1.sort,semver_21$1=semver$1.rsort,semver_22$1=semver$1.gt,semver_23$1=semver$1.lt,semver_24$1=semver$1.eq,semver_25$1=semver$1.neq,semver_26$1=semver$1.gte,semver_27$1=semver$1.lte,semver_28$1=semver$1.cmp,semver_29$1=semver$1.Comparator,semver_30$1=semver$1.Range,semver_31$1=semver$1.toComparators,semver_32$1=semver$1.satisfies,semver_33$1=semver$1.maxSatisfying,semver_34$1=semver$1.minSatisfying,semver_35$1=semver$1.minVersion,semver_36$1=semver$1.validRange,semver_37$1=semver$1.ltr,semver_38$1=semver$1.gtr,semver_39$1=semver$1.outside,semver_40$1=semver$1.prerelease,semver_41=semver$1.intersects,semver_42=semver$1.coerce;function checkFlowVersionSatisfies(e,t){return semver$1.satisfies(e,t,{includePrerelease:!0})}function createMiddleware(e,t){const n=new FlowconfigCache(".flowconfig"),r=checkFlowVersionSatisfies(t,"0.97.0 - 0.100.0");return{didOpen(t,r){n.get(t).then(n=>{if(n===e)return r(t)})},didClose(t,r){n.get(t).then(i=>{if(n.delete(t),i===e)return r(t)})},didChange(t,r){n.get(t.document).then(n=>{if(n===e)return r(t)})},provideCompletionItem:(t,i,o,s,a)=>n.get(t).then(n=>n===e?a(t,i,o,s):null).then(e=>{if(e&&r){(Array.isArray(e)?e:e.items).forEach(e=>{delete e.range})}return e}),provideHover:(t,r,i,o)=>n.get(t).then(n=>n===e?Promise.resolve(o(t,r,i)).then(formatHoverContent):null),provideSignatureHelp:(t,r,i,o)=>n.get(t).then(n=>n===e?o(t,r,i):null),provideDefinition:(t,r,i,o)=>n.get(t).then(n=>n===e?o(t,r,i):null),provideReferences:(t,r,i,o,s)=>n.get(t).then(n=>n===e?s(t,fixPosition(t,r),i,o):null),provideDocumentHighlights:(t,r,i,o)=>n.get(t).then(n=>n===e?o(t,fixPosition(t,r),i):null),provideDocumentSymbols:(t,r,i)=>n.get(t).then(n=>n===e?i(t,r):null),provideRenameEdits:(t,r,i,o,s)=>n.get(t).then(n=>n===e?s(t,fixPosition(t,r),i,o):null),prepareRename:(t,r,i,o)=>n.get(t).then(n=>n===e?o(t,r,i):null),provideTypeCoverage:(t,r)=>n.get(t).then(n=>n===e?r(t):null)}}function formatHoverContent(e){return e?(e.contents=e.contents.map(e=>e instanceof vscode.MarkdownString?formatMarkedDownString(e):e),e):e}function fixPosition(e,t){const n=e.getWordRangeAtPosition(t);return n&&t.isEqual(n.end)?t.with({character:t.character-1}):t}class ClientCommands{constructor(e){_defineProperty(this,"_client",void 0),_defineProperty(this,"_commands",void 0),_defineProperty(this,"toggleCoverage",void 0),_defineProperty(this,"showStatus",void 0),_defineProperty(this,"restartClient",void 0),_defineProperty(this,"logDebugInfo",void 0),_defineProperty(this,"clientActions",void 0),_defineProperty(this,"showOutput",void 0),_defineProperty(this,"_registerCommands",()=>{this._commands=[vscode.commands.registerCommand(this.showStatus,this._handleShowStatus),vscode.commands.registerCommand(this.restartClient,()=>this._client.restart()),vscode.commands.registerCommand(this.clientActions,this._handleClientActionsCommand),vscode.commands.registerCommand(this.logDebugInfo,this._handleLogDebugInfo)]}),_defineProperty(this,"_handleClientActionsCommand",()=>{const e=this._client.getStatus();if(e&&"error"===e.state)return this.runShowStatusCommand(),null;const t=[{label:"Toggle display of uncovered areas",description:"Type coverage",command:this.toggleCoverage},{label:"Show Client Status",command:this.showStatus},{label:"Restart Client",command:this.restartClient},{label:"Log Debug Info",command:this.logDebugInfo},{label:"Show Output Channel",command:"flow.showOutputChannel"}];return vscode.window.showQuickPick(t,{placeHolder:"Select a command to run"}).then(e=>e?vscode.commands.executeCommand(e.command):null)}),_defineProperty(this,"_handleShowStatus",()=>{const e=this._client.getName(),t=this._client.getStatus();if(t)switch(t.state){case"error":{const n=t.actions||[];vscode.window.showErrorMessage(`[${e}] ${t.message||""}`,...n).then(e=>{e&&e.command()});break}case"busy":{const n=t.actions||[];vscode.window.showWarningMessage(`[${e}] ${t.message||""}`,...n).then(e=>{e&&e.command()});break}case"idle":vscode.window.showInformationMessage(`[${e}] ${t.message||""}`)}}),_defineProperty(this,"_handleLogDebugInfo",()=>{this._client.logDebugInfo(),setTimeout(()=>{this.runShowOutputCommand()},0)}),this._client=e;const t=this._client.getID();this.toggleCoverage=`flow.toggleCoverage.${t}`,this.showStatus=`flow.showStatus.${t}`,this.restartClient=`flow.restartClient.${t}`,this.logDebugInfo=`flow.logDebugInfo.${t}`,this.clientActions=`flow.clientActions.${t}`,this.showOutput="flow.showOutputChannel",this._registerCommands()}runRestartClientCommand(){vscode.commands.executeCommand(this.restartClient)}runShowStatusCommand(){vscode.commands.executeCommand(this.showStatus)}runShowOutputCommand(){vscode.commands.executeCommand(this.showOutput)}dispose(){this._commands.forEach(e=>e.dispose())}}const THIS_EXSTENSION_ID="flowtype.flow-for-vscode";function getExtensionPath(){const e=vscode.extensions.getExtension(THIS_EXSTENSION_ID);if(!e)throw new Error("Failed to find extensionPath");return e.extensionPath}var windows=isexe;function checkPathExt(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function checkStat(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&checkPathExt(t,n)}function isexe(e,t,n){fs$1.stat(e,function(r,i){n(r,!r&&checkStat(i,e,t))})}function sync$1(e,t){return checkStat(fs$1.statSync(e),e,t)}isexe.sync=sync$1;var core,mode=isexe$1;function isexe$1(e,t,n){fs$1.stat(e,function(e,r){n(e,!e&&checkStat$1(r,t))})}function sync$2(e,t){return checkStat$1(fs$1.statSync(e),t)}function checkStat$1(e,t){return e.isFile()&&checkMode(e,t)}function checkMode(e,t){var n=e.mode,r=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8);return n&parseInt("001",8)||n&c&&i===s||n&a&&r===o||n&(a|c)&&0===o}isexe$1.sync=sync$2,core="win32"===process.platform||commonjsGlobal.TESTING_WINDOWS?windows:mode;var isexe_1=isexe$2;function isexe$2(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(n,r){isexe$2(e,t||{},function(e,t){e?r(e):n(t)})})}core(e,t||{},function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)})}function sync$3(e,t){try{return core.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}isexe$2.sync=sync$3;var which_1=which;which.sync=whichSync;var isWindows$2="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,COLON=isWindows$2?";":":";function getNotFoundError(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function getPathInfo(e,t){var n=t.colon||COLON,r=t.path||process.env.PATH||"",i=[""];r=r.split(n);var o="";return isWindows$2&&(r.unshift(process.cwd()),i=(o=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(n),-1!==e.indexOf(".")&&""!==i[0]&&i.unshift("")),(e.match(/\//)||isWindows$2&&e.match(/\\/))&&(r=[""]),{env:r,ext:i,extExe:o}}function which(e,t,n){"function"==typeof t&&(n=t,t={});var r=getPathInfo(e,t),i=r.env,o=r.ext,s=r.extExe,a=[];!function r(c,u){if(c===u)return t.all&&a.length?n(null,a):n(getNotFoundError(e));var l=i[c];'"'===l.charAt(0)&&'"'===l.slice(-1)&&(l=l.slice(1,-1));var d=path$1.join(l,e);!l&&/^\.[\\\/]/.test(e)&&(d=e.slice(0,2)+d),function e(i,l){if(i===l)return r(c+1,u);var p=o[i];isexe_1(d+p,{pathExt:s},function(r,o){if(!r&&o){if(!t.all)return n(null,d+p);a.push(d+p)}return e(i+1,l)})}(0,o.length)}(0,i.length)}function whichSync(e,t){for(var n=getPathInfo(e,t=t||{}),r=n.env,i=n.ext,o=n.extExe,s=[],a=0,c=r.length;a<c;a++){var u=r[a];'"'===u.charAt(0)&&'"'===u.slice(-1)&&(u=u.slice(1,-1));var l=path$1.join(u,e);!u&&/^\.[\\\/]/.test(e)&&(l=e.slice(0,2)+l);for(var d=0,p=i.length;d<p;d++){var m=l+i[d];try{if(isexe_1.sync(m,{pathExt:o})){if(!t.all)return m;s.push(m)}}catch(e){}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw getNotFoundError(e)}function which$1(e){return new Promise(t=>{which_1(e,{pathExt:".cmd"},(e,n)=>{t(e?null:n)})})}const LOG_LEVEL=Object.freeze({error:3,warn:2,info:1,trace:0,debug:0}),MAX_LEVEL_LENGTH=Object.keys(LOG_LEVEL).reduce((e,t)=>t.length>e?t.length:e,0);class Logger{constructor(e,t,n){_defineProperty(this,"_outputChannel",void 0),_defineProperty(this,"_level",void 0),_defineProperty(this,"_context",void 0),this._outputChannel=t,this._level=n,this._context=e}error(e,t){this._getLevelVal()<=LOG_LEVEL.error&&this._write("Error",e,t)}warn(e,t){this._getLevelVal()<=LOG_LEVEL.warn&&this._write("Warn",e,t)}info(e,t){this._getLevelVal()<=LOG_LEVEL.info&&this._write("Info",e,t)}debug(e,t){this._getLevelVal()<=LOG_LEVEL.debug&&this._write("Debug",e,t)}trace(e,t){this._getLevelVal()<=LOG_LEVEL.trace&&this._write("Trace",e,t)}_getLevelVal(){return LOG_LEVEL[this._level]}_write(e,t,n){let r=`[${[e.padEnd(MAX_LEVEL_LENGTH),(new Date).toLocaleTimeString(),this._context?this._context:null].filter(Boolean).join(" - ")}] ${t}`;n&&(r+=" ${JSON.stringify(data)"),this._outputChannel.appendLine(r)}}function importFresh(e){return Object.keys(require.cache).forEach(t=>{t.startsWith(e)&&delete require.cache[t]}),require(e)}async function getFlowPath({pathToFlow:e,flowconfigDir:t,workspaceRoot:n,useNPMPackagedFlow:r,useBundledFlow:i,logger:o}){if(r)try{const e=getNpmPackagedFlow(t,n,o);return o.info("Found flow using option `useNPMPackagedFlow`"),e}catch(e){o.error(`Error loading flow using option 'useNPMPackagedFlow'\n${e.message}`)}try{const r=await getCommandFlowPath(normalizePathToFlow(e,{flowconfigDir:t,workspaceRoot:n}),o);return o.info("Found flow using option `pathToFlow`"),r}catch(e){o.error(`Error loading flow using option 'pathToFlow'\n${e.message}`)}if(i)try{const e=getBundledFlowPath();return o.info("Falling back to bundled flow."),e}catch(e){o.error(`Failed to load bundled flow.\n${e.message}`)}throw new Error("Flow not found")}function getNpmPackagedFlow(e,t,n){const r=[e,e!==t?t:null].filter(Boolean);for(let e=0;e<r.length;e+=1){const t=getFlowBinPath(r[e],n);if(t)return t}throw new Error(`Pkg flow-bin not found in ${r.join(", ")}`)}async function getCommandFlowPath(e,t){t.trace(`Checking '${e}'`);const n=await which$1(e);if(!n)throw new Error(`'${e}' not found`);return n}function getBundledFlowPath(){const e=getExtensionPath();return importFresh(path$1.join(e,"node_modules","flow-bin"))}function getFlowBinPath(e,t){t.trace(`Checking flow-bin in '${e}`);const n=path$1.join(e,"node_modules","flow-bin");try{return importFresh(n)}catch(n){t.trace(`Error loading flow-bin from '${e}'\n${n.message}`)}return null}function normalizePathToFlow(e,t){return path$1.normalize(e.replace("${workspaceFolder}",t.workspaceRoot).replace("${flowconfigDir}",t.flowconfigDir))}var src=function(e){try{return e()}catch(e){}},pathKey=e=>{const t=(e=e||{}).env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).find(e=>"PATH"===e.toUpperCase())||"Path"};const pathKey$1=pathKey();function resolveCommandAttempt(e,t){const n=process.cwd(),r=null!=e.options.cwd;if(r)try{process.chdir(e.options.cwd)}catch(e){}let i;try{i=which_1.sync(e.command,{path:(e.options.env||process.env)[pathKey$1],pathExt:t?path$1.delimiter:void 0})}catch(e){}finally{process.chdir(n)}return i&&(i=path$1.resolve(r?e.options.cwd:"",i)),i}function resolveCommand(e){return resolveCommandAttempt(e)||resolveCommandAttempt(e,!0)}var resolveCommand_1=resolveCommand;const metaCharsRegExp=/([()\][%!^"`<>&|;, *?])/g;function escapeCommand(e){return e=e.replace(metaCharsRegExp,"^$1")}function escapeArgument(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(metaCharsRegExp,"^$1"),t&&(e=e.replace(metaCharsRegExp,"^$1")),e}var command=escapeCommand,argument=escapeArgument,_escape={command:command,argument:argument},shebangRegex=/^#!.*/,shebangCommand=function(e){var t=e.match(shebangRegex);if(!t)return null;var n=t[0].replace(/#! ?/,"").split(" "),r=n[0].split("/").pop(),i=n[1];return"env"===r?i:r+(i?" "+i:"")};function readShebang(e){let t,n;Buffer.alloc?t=Buffer.alloc(150):(t=new Buffer(150)).fill(0);try{n=fs$1.openSync(e,"r"),fs$1.readSync(n,t,0,150,0),fs$1.closeSync(n)}catch(e){}return shebangCommand(t.toString())}var readShebang_1=readShebang,semver$2=createCommonjsModule(function(e,t){var n;t=e.exports=B,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var m=a++;s[m]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var f=a++;s[f]="(?:-("+s[m]+"(?:\\."+s[m]+")*))";var g=a++;s[g]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var _=a++;s[_]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var y=a++,w="v?"+s[d]+s[f]+"?"+s[_]+"?";s[y]="^"+w+"$";var C="[v=\\s]*"+s[p]+s[g]+"?"+s[_]+"?",E=a++;s[E]="^"+C+"$";var R=a++;s[R]="((?:<|>)?=?)";var S=a++;s[S]=s[u]+"|x|X|\\*";var $=a++;s[$]=s[c]+"|x|X|\\*";var b=a++;s[b]="[v=\\s]*("+s[$]+")(?:\\.("+s[$]+")(?:\\.("+s[$]+")(?:"+s[f]+")?"+s[_]+"?)?)?";var x=a++;s[x]="[v=\\s]*("+s[S]+")(?:\\.("+s[S]+")(?:\\.("+s[S]+")(?:"+s[g]+")?"+s[_]+"?)?)?";var T=a++;s[T]="^"+s[R]+"\\s*"+s[b]+"$";var D=a++;s[D]="^"+s[R]+"\\s*"+s[x]+"$";var P=a++;s[P]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var k=a++;s[k]="(?:~>?)";var I=a++;s[I]="(\\s*)"+s[k]+"\\s+",o[I]=new RegExp(s[I],"g");var O=a++;s[O]="^"+s[k]+s[b]+"$";var F=a++;s[F]="^"+s[k]+s[x]+"$";var N=a++;s[N]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[N]+"\\s+",o[M]=new RegExp(s[M],"g");var L=a++;s[L]="^"+s[N]+s[b]+"$";var A=a++;s[A]="^"+s[N]+s[x]+"$";var q=a++;s[q]="^"+s[R]+"\\s*("+C+")$|^$";var j=a++;s[j]="^"+s[R]+"\\s*("+w+")$|^$";var W=a++;s[W]="(\\s*)"+s[R]+"\\s*("+C+"|"+s[b]+")",o[W]=new RegExp(s[W],"g");var K=a++;s[K]="^\\s*("+s[b]+")\\s+-\\s+("+s[b]+")\\s*$";var U=a++;s[U]="^\\s*("+s[x]+")\\s+-\\s+("+s[x]+")\\s*$";var G=a++;s[G]="(<|>)?=?\\s*\\*";for(var z=0;z<35;z++)n(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function H(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof B)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[E]:o[y]).test(e))return null;try{return new B(e,t)}catch(e){return null}}function B(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof B){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof B))return new B(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[E]:o[y]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=H,t.valid=function(e,t){var n=H(e,t);return n?n.version:null},t.clean=function(e,t){var n=H(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=B,B.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},B.prototype.toString=function(){return this.version},B.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof B||(e=new B(e,this.options)),this.compareMain(e)||this.comparePre(e)},B.prototype.compareMain=function(e){return e instanceof B||(e=new B(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},B.prototype.comparePre=function(e){if(e instanceof B||(e=new B(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return X(r,i)}while(++t)},B.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new B(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var n=H(e),r=H(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=X;var V=/^[0-9]+$/;function X(e,t){var n=V.test(e),r=V.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function J(e,t,n){return new B(e,n).compare(new B(t,n))}function Z(e,t,n){return J(e,t,n)>0}function Q(e,t,n){return J(e,t,n)<0}function Y(e,t,n){return 0===J(e,t,n)}function ee(e,t,n){return 0!==J(e,t,n)}function te(e,t,n){return J(e,t,n)>=0}function ne(e,t,n){return J(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Y(e,n,r);case"!=":return ee(e,n,r);case">":return Z(e,n,r);case">=":return te(e,n,r);case"<":return Q(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new B(e,t).major},t.minor=function(e,t){return new B(e,t).minor},t.patch=function(e,t){return new B(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,n){return J(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Z,t.lt=Q,t.eq=Y,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,p){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new B(e,r),t=new se(t,r),n){case">":i=Z,o=ne,s=Q,a=">",c=">=";break;case"<":i=Q,o=te,s=Z,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:s(e.semver,p.semver,r)&&(p=e)}),d.operator===a||d.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[q]:o[j],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new B(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new B(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[U]:o[K];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[W],"$1$2$3"),n("comparator trim",e,o[W]),e=(e=(e=e.replace(o[I],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[j],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[A]:o[L];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t.loose?o[F]:o[O];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t.loose?o[D]:o[T];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s),d=l;return"="===r&&d&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&d?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),n("stars",e),e}(e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,this.options)},this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new B(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new B(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new B(r=e,n)))}),r},t.minVersion=function(e,t){e=new se(e,t);var n=new B("0.0.0");if(e.test(n))return n;if(n=new B("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(e){var t=new B(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Z(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=H(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof B)return e;if("string"!=typeof e)return null;var t=e.match(o[P]);if(null==t)return null;return H(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),semver_1$2=semver$2.SEMVER_SPEC_VERSION,semver_2$2=semver$2.re,semver_3$2=semver$2.src,semver_4$2=semver$2.parse,semver_5$2=semver$2.valid,semver_6$2=semver$2.clean,semver_7$2=semver$2.SemVer,semver_8$2=semver$2.inc,semver_9$2=semver$2.diff,semver_10$2=semver$2.compareIdentifiers,semver_11$2=semver$2.rcompareIdentifiers,semver_12$2=semver$2.major,semver_13$2=semver$2.minor,semver_14$2=semver$2.patch,semver_15$2=semver$2.compare,semver_16$2=semver$2.compareLoose,semver_17$2=semver$2.rcompare,semver_18$2=semver$2.sort,semver_19$2=semver$2.rsort,semver_20$2=semver$2.gt,semver_21$2=semver$2.lt,semver_22$2=semver$2.eq,semver_23$2=semver$2.neq,semver_24$2=semver$2.gte,semver_25$2=semver$2.lte,semver_26$2=semver$2.cmp,semver_27$2=semver$2.Comparator,semver_28$2=semver$2.Range,semver_29$2=semver$2.toComparators,semver_30$2=semver$2.satisfies,semver_31$2=semver$2.maxSatisfying,semver_32$2=semver$2.minSatisfying,semver_33$2=semver$2.minVersion,semver_34$2=semver$2.validRange,semver_35$2=semver$2.ltr,semver_36$2=semver$2.gtr,semver_37$2=semver$2.outside,semver_38$2=semver$2.prerelease,semver_39$2=semver$2.intersects,semver_40$2=semver$2.coerce;const isWin="win32"===process.platform,isExecutableRegExp=/\.(?:com|exe)$/i,isCmdShimRegExp=/node_modules[\\\/].bin[\\\/][^\\\/]+\.cmd$/i,supportsShellOption=src(()=>semver$2.satisfies(process.version,"^4.8.0 || ^5.7.0 || >= 6.0.0",!0))||!1;function detectShebang(e){e.file=resolveCommand_1(e);const t=e.file&&readShebang_1(e.file);return t?(e.args.unshift(e.file),e.command=t,resolveCommand_1(e)):e.file}function parseNonShell(e){if(!isWin)return e;const t=detectShebang(e),n=!isExecutableRegExp.test(t);if(e.options.forceShell||n){const n=isCmdShimRegExp.test(t);e.command=path$1.normalize(e.command),e.command=_escape.command(e.command),e.args=e.args.map(e=>_escape.argument(e,n));const r=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${r}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function parseShell(e){if(supportsShellOption)return e;const t=[e.command].concat(e.args).join(" ");return isWin?(e.command="string"==typeof e.options.shell?e.options.shell:process.env.comspec||"cmd.exe",e.args=["/d","/s","/c",`"${t}"`],e.options.windowsVerbatimArguments=!0):("string"==typeof e.options.shell?e.command=e.options.shell:"android"===process.platform?e.command="/system/bin/sh":e.command="/bin/sh",e.args=["-c",t]),e}function parse$1(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null);const r={command:e,args:t=t?t.slice(0):[],options:n=Object.assign({},n),file:void 0,original:{command:e,args:t}};return n.shell?parseShell(r):parseNonShell(r)}var parse_1=parse$1;const isWin$1="win32"===process.platform;function notFoundError(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function hookChildProcess(e,t){if(!isWin$1)return;const n=e.emit;e.emit=function(r,i){if("exit"===r){const r=verifyENOENT(i,t);if(r)return n.call(e,"error",r)}return n.apply(e,arguments)}}function verifyENOENT(e,t){return isWin$1&&1===e&&!t.file?notFoundError(t.original,"spawn"):null}function verifyENOENTSync(e,t){return isWin$1&&1===e&&!t.file?notFoundError(t.original,"spawnSync"):null}var enoent={hookChildProcess:hookChildProcess,verifyENOENT:verifyENOENT,verifyENOENTSync:verifyENOENTSync,notFoundError:notFoundError};function spawn(e,t,n){const r=parse_1(e,t,n),i=child_process.spawn(r.command,r.args,r.options);return enoent.hookChildProcess(i,r),i}function spawnSync(e,t,n){const r=parse_1(e,t,n),i=child_process.spawnSync(r.command,r.args,r.options);return i.error=i.error||enoent.verifyENOENTSync(i.status,r),i}var crossSpawn=spawn,spawn_1=spawn,sync$4=spawnSync,_parse=parse_1,_enoent=enoent;crossSpawn.spawn=spawn_1,crossSpawn.sync=sync$4,crossSpawn._parse=_parse,crossSpawn._enoent=_enoent;var stripEof=function(e){var t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e},npmRunPath=createCommonjsModule(function(e){e.exports=e=>{let t;e=Object.assign({cwd:process.cwd(),path:process.env[pathKey()]},e);let n=path$1.resolve(e.cwd);const r=[];for(;t!==n;)r.push(path$1.join(n,"node_modules/.bin")),t=n,n=path$1.resolve(n,"..");return r.push(path$1.dirname(process.execPath)),r.concat(e.path).join(path$1.delimiter)},e.exports.env=t=>{t=Object.assign({env:process.env},t);const n=Object.assign({},t.env),r=pathKey({env:n});return t.path=n[r],n[r]=e.exports(t),n}}),npmRunPath_1=npmRunPath.env,isStream_1=createCommonjsModule(function(e){var t=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};t.writable=function(e){return t(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},t.readable=function(e){return t(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},t.duplex=function(e){return t.writable(e)&&t.readable(e)},t.transform=function(e){return t.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}}),noop=function(){},isRequest=function(e){return e.setHeader&&"function"==typeof e.abort},isChildProcess=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},eos=function(e,t,n){if("function"==typeof t)return eos(e,null,t);t||(t={}),n=once_1(n||noop);var r=e._writableState,i=e._readableState,o=t.readable||!1!==t.readable&&e.readable,s=t.writable||!1!==t.writable&&e.writable,a=function(){e.writable||c()},c=function(){s=!1,o||n.call(e)},u=function(){o=!1,s||n.call(e)},l=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},d=function(t){n.call(e,t)},p=function(){return(!o||i&&i.ended)&&(!s||r&&r.ended)?void 0:n.call(e,new Error("premature close"))},m=function(){e.req.on("finish",c)};return isRequest(e)?(e.on("complete",c),e.on("abort",p),e.req?m():e.on("request",m)):s&&!r&&(e.on("end",a),e.on("close",a)),isChildProcess(e)&&e.on("exit",l),e.on("end",u),e.on("finish",c),!1!==t.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",c),e.removeListener("exit",l),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",p)}},endOfStream=eos,noop$1=function(){},ancient=/^v?\.0/.test(process.version),isFn=function(e){return"function"==typeof e},isFS=function(e){return!!ancient&&(!!fs$1&&((e instanceof(fs$1.ReadStream||noop$1)||e instanceof(fs$1.WriteStream||noop$1))&&isFn(e.close)))},isRequest$1=function(e){return e.setHeader&&isFn(e.abort)},destroyer=function(e,t,n,r){r=once_1(r);var i=!1;e.on("close",function(){i=!0}),endOfStream(e,{readable:t,writable:n},function(e){if(e)return r(e);i=!0,r()});var o=!1;return function(t){if(!i&&!o)return o=!0,isFS(e)?e.close(noop$1):isRequest$1(e)?e.abort():isFn(e.destroy)?e.destroy():void r(t||new Error("stream was destroyed"))}},call=function(e){e()},pipe=function(e,t){return e.pipe(t)},pump=function(){var e,t=Array.prototype.slice.call(arguments),n=isFn(t[t.length-1]||noop$1)&&t.pop()||noop$1;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r=t.map(function(i,o){var s=o<t.length-1;return destroyer(i,s,o>0,function(t){e||(e=t),t&&r.forEach(call),s||(r.forEach(call),n(e))})});return t.reduce(pipe)},pump_1=pump;const{PassThrough:PassThrough}=stream;var bufferStream=e=>{e=Object.assign({},e);const{array:t}=e;let{encoding:n}=e;const r="buffer"===n;let i=!1;t?i=!(n||r):n=n||"utf8",r&&(n=null);let o=0;const s=[],a=new PassThrough({objectMode:i});return n&&a.setEncoding(n),a.on("data",e=>{s.push(e),i?o=s.length:o+=e.length}),a.getBufferedValue=()=>t?s:r?Buffer.concat(s,o):s.join(""),a.getBufferedLength=()=>o,a};class MaxBufferError extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}function getStream(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t=Object.assign({maxBuffer:1/0},t);const{maxBuffer:n}=t;let r;return new Promise((i,o)=>{const s=e=>{e&&(e.bufferedData=r.getBufferedValue()),o(e)};(r=pump_1(e,bufferStream(t),e=>{e?s(e):i()})).on("data",()=>{r.getBufferedLength()>n&&s(new MaxBufferError)})}).then(()=>r.getBufferedValue())}var getStream_1=getStream,buffer=(e,t)=>getStream(e,Object.assign({},t,{encoding:"buffer"})),array=(e,t)=>getStream(e,Object.assign({},t,{array:!0})),MaxBufferError_1=MaxBufferError;getStream_1.buffer=buffer,getStream_1.array=array,getStream_1.MaxBufferError=MaxBufferError_1;var emitter,pFinally=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e}))),signals=createCommonjsModule(function(e){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}),signals$1=signals,EE$1=events$1;"function"!=typeof EE$1&&(EE$1=EE$1.EventEmitter),process.__signal_exit_emitter__?emitter=process.__signal_exit_emitter__:((emitter=process.__signal_exit_emitter__=new EE$1).count=0,emitter.emitted={}),emitter.infinite||(emitter.setMaxListeners(1/0),emitter.infinite=!0);var signalExit=function(e,t){assert.equal(typeof e,"function","a callback must be provided for exit handler"),!1===loaded&&load();var n="exit";t&&t.alwaysLast&&(n="afterexit");return emitter.on(n,e),function(){emitter.removeListener(n,e),0===emitter.listeners("exit").length&&0===emitter.listeners("afterexit").length&&unload()}},unload_1=unload;function unload(){loaded&&(loaded=!1,signals$1.forEach(function(e){try{process.removeListener(e,sigListeners[e])}catch(e){}}),process.emit=originalProcessEmit,process.reallyExit=originalProcessReallyExit,emitter.count-=1)}function emit(e,t,n){emitter.emitted[e]||(emitter.emitted[e]=!0,emitter.emit(e,t,n))}var sigListeners={};signals$1.forEach(function(e){sigListeners[e]=function(){process.listeners(e).length===emitter.count&&(unload(),emit("exit",null,e),emit("afterexit",null,e),process.kill(process.pid,e))}});var signals_1=function(){return signals$1},load_1=load,loaded=!1;function load(){loaded||(loaded=!0,emitter.count+=1,signals$1=signals$1.filter(function(e){try{return process.on(e,sigListeners[e]),!0}catch(e){return!1}}),process.emit=processEmit,process.reallyExit=processReallyExit)}var originalProcessReallyExit=process.reallyExit;function processReallyExit(e){process.exitCode=e||0,emit("exit",process.exitCode,null),emit("afterexit",process.exitCode,null),originalProcessReallyExit.call(process,process.exitCode)}var originalProcessEmit=process.emit;function processEmit(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var n=originalProcessEmit.apply(this,arguments);return emit("exit",process.exitCode,null),emit("afterexit",process.exitCode,null),n}return originalProcessEmit.apply(this,arguments)}signalExit.unload=unload_1,signalExit.signals=signals_1,signalExit.load=load_1;var errname_1=createCommonjsModule(function(e){let t;if("function"==typeof util.getSystemErrorName)e.exports=util.getSystemErrorName;else{try{if("function"!=typeof(t=process.binding("uv")).errname)throw new TypeError("uv.errname is not a function")}catch(e){console.error("execa/lib/errname: unable to establish process.binding('uv')",e),t=null}e.exports=e=>n(t,e)}function n(e,t){if(e)return e.errname(t);if(!(t<0))throw new Error("err >= 0");return`Unknown system error ${t}`}e.exports.__test__=n}),errname_2=errname_1.__test__;const alias=["stdin","stdout","stderr"],hasAlias=e=>alias.some(t=>Boolean(e[t]));var stdio=e=>{if(!e)return null;if(e.stdio&&hasAlias(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${alias.map(e=>`\`${e}\``).join(", ")}`);if("string"==typeof e.stdio)return e.stdio;const t=e.stdio||[];if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const n=[],r=Math.max(t.length,alias.length);for(let i=0;i<r;i++){let r=null;void 0!==t[i]?r=t[i]:void 0!==e[alias[i]]&&(r=e[alias[i]]),n[i]=r}return n},execa=createCommonjsModule(function(e){const t=1e7;function n(e,n,r){let i;return(r=Object.assign({extendEnv:!0,env:{}},r)).extendEnv&&(r.env=Object.assign({},process.env,r.env)),!0===r.__winShell?(delete r.__winShell,i={command:e,args:n,options:r,file:e,original:{cmd:e,args:n}}):i=crossSpawn._parse(e,n,r),(r=Object.assign({maxBuffer:t,buffer:!0,stripEof:!0,preferLocal:!0,localDir:i.options.cwd||process.cwd(),encoding:"utf8",reject:!0,cleanup:!0},i.options)).stdio=stdio(r),r.preferLocal&&(r.env=npmRunPath.env(Object.assign({},r,{cwd:r.localDir}))),r.detached&&(r.cleanup=!1),"win32"===process.platform&&"cmd.exe"===path$1.basename(i.command)&&i.args.unshift("/q"),{cmd:i.command,args:i.args,opts:r,parsed:i}}function r(e,t){return t&&e.stripEof&&(t=stripEof(t)),t}function i(e,t,n){let r="/bin/sh",i=["-c",t];return n=Object.assign({},n),"win32"===process.platform&&(n.__winShell=!0,r=process.env.comspec||"cmd.exe",i=["/s","/c",`"${t}"`],n.windowsVerbatimArguments=!0),n.shell&&(r=n.shell,delete n.shell),e(r,i,n)}function o(e,t,{encoding:n,buffer:r,maxBuffer:i}){if(!e[t])return null;let o;return(o=r?n?getStream_1(e[t],{encoding:n,maxBuffer:i}):getStream_1.buffer(e[t],{maxBuffer:i}):new Promise((n,r)=>{e[t].once("end",n).once("error",r)})).catch(e=>{throw e.stream=t,e.message=`${t} ${e.message}`,e})}function s(e,t){const{stdout:n,stderr:r}=e;let i=e.error;const{code:o,signal:s}=e,{parsed:a,joinedCmd:c}=t,u=t.timedOut||!1;if(!i){let e="";Array.isArray(a.opts.stdio)?("inherit"!==a.opts.stdio[2]&&(e+=e.length>0?r:`\n${r}`),"inherit"!==a.opts.stdio[1]&&(e+=`\n${n}`)):"inherit"!==a.opts.stdio&&(e=`\n${r}${n}`),(i=new Error(`Command failed: ${c}${e}`)).code=o<0?errname_1(o):o}return i.stdout=n,i.stderr=r,i.failed=!0,i.signal=s||null,i.cmd=c,i.timedOut=u,i}function a(e,t){let n=e;return Array.isArray(t)&&t.length>0&&(n+=" "+t.join(" ")),n}e.exports=(e,t,i)=>{const c=n(e,t,i),{encoding:u,buffer:l,maxBuffer:d}=c.opts,p=a(e,t);let m,h;try{m=child_process.spawn(c.cmd,c.args,c.opts)}catch(e){return Promise.reject(e)}c.opts.cleanup&&(h=signalExit(()=>{m.kill()}));let f=null,g=!1;const v=()=>{f&&(clearTimeout(f),f=null),h&&h()};c.opts.timeout>0&&(f=setTimeout(()=>{f=null,g=!0,m.kill(c.opts.killSignal)},c.opts.timeout));const _=new Promise(e=>{m.on("exit",(t,n)=>{v(),e({code:t,signal:n})}),m.on("error",t=>{v(),e({error:t})}),m.stdin&&m.stdin.on("error",t=>{v(),e({error:t})})});function y(){m.stdout&&m.stdout.destroy(),m.stderr&&m.stderr.destroy()}const w=()=>pFinally(Promise.all([_,o(m,"stdout",{encoding:u,buffer:l,maxBuffer:d}),o(m,"stderr",{encoding:u,buffer:l,maxBuffer:d})]).then(e=>{const t=e[0];if(t.stdout=e[1],t.stderr=e[2],t.error||0!==t.code||null!==t.signal){const e=s(t,{joinedCmd:p,parsed:c,timedOut:g});if(e.killed=e.killed||m.killed,!c.opts.reject)return e;throw e}return{stdout:r(c.opts,t.stdout),stderr:r(c.opts,t.stderr),code:0,failed:!1,killed:!1,signal:null,cmd:p,timedOut:!1}}),y);return crossSpawn._enoent.hookChildProcess(m,c.parsed),function(e,t){null!=t&&(isStream_1(t)?t.pipe(e.stdin):e.stdin.end(t))}(m,c.opts.input),m.then=(e,t)=>w().then(e,t),m.catch=e=>w().catch(e),m},e.exports.stdout=(...t)=>e.exports(...t).then(e=>e.stdout),e.exports.stderr=(...t)=>e.exports(...t).then(e=>e.stderr),e.exports.shell=(t,n)=>i(e.exports,t,n),e.exports.sync=(e,t,i)=>{const o=n(e,t,i),c=a(e,t);if(isStream_1(o.opts.input))throw new TypeError("The `input` option cannot be a stream in sync mode");const u=child_process.spawnSync(o.cmd,o.args,o.opts);if(u.code=u.status,u.error||0!==u.status||null!==u.signal){const e=s(u,{joinedCmd:c,parsed:o});if(!o.opts.reject)return e;throw e}return{stdout:r(o.opts,u.stdout),stderr:r(o.opts,u.stderr),code:0,failed:!1,signal:null,cmd:c,timedOut:!1}},e.exports.shellSync=(t,n)=>i(e.exports.sync,t,n)}),execa_1=execa.stdout,execa_2=execa.stderr,execa_3=execa.shell,execa_4=execa.sync,execa_5=execa.shellSync,semverRegex=()=>/\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b/gi,arrayUniq=e=>[...new Set(e)],findVersions=(e,t={})=>{if("string"!=typeof e)throw new TypeError(`Expected a string, got ${typeof e}`);const n=new RegExp(`(?:${semverRegex().source})|(?:v?(?:\\d+\\.\\d+)(?:\\.\\d+)?)`,"g"),r=e.match(!0===t.loose?n:semverRegex())||[];return arrayUniq(r.map(e=>e.trim().replace(/^v/,"").replace(/^\d+\.\d+$/,"$&.0")))};const knownBinaryArguments=new Map([...["ffmpeg","ffprobe","ffplay"].map(e=>[e,["-version"]]),["openssl",["version"]]]),defaultPossibleArguments=[["--version"],["version"]];var binVersion=async(e,t={})=>{let n;if(void 0===t.args){const t=knownBinaryArguments.get(e);n=void 0===t?defaultPossibleArguments:[t]}else n=[t.args];for(const t of n)try{const{stdout:n,stderr:r}=await execa(e,t),[i]=findVersions(n||r,{loose:!0});if(void 0!==i)return i}catch(t){if("ENOENT"===t.code){const n=new Error(`Couldn't find the \`${e}\` binary. Make sure it's installed and in your $PATH.`);throw n.sourceError=t,n}if("EACCES"===t.code)throw t}throw new Error(`Couldn't find version of \`${e}\``)};function getFlowVersion(e){return binVersion(e)}const FLOW_VERSION_FOR_LSP=">=0.75";function assertFlowSupportsLSP(e){if(!checkFlowVersionSatisfies(e,FLOW_VERSION_FOR_LSP))throw new Error(`Flow version ${e} doesn't support 'flow lsp'.`+` Please upgrade flow to version ${FLOW_VERSION_FOR_LSP}.`)}function isWindows$3(){return"win32"===process.platform}const CharCode={Colon:58,Slash:47,A:65,Z:90,a:97,z:122};function uriToString(e){return isWindows$3()?uriToStringWindows(e):e.toString(!0)}function uriToStringWindows(e){const t=e.toString(!0),n=getWindowsDriveLetter(e);return n?makeWindowsDriveLetterUppercase(t,n):t}function isAlphabet(e){return e>=CharCode.A&&e<=CharCode.Z||e>=CharCode.a&&e<=CharCode.z}function getWindowsDriveLetter(e){const{path:t}=e;let n=null;if(t.length>=3&&t.charCodeAt(0)===CharCode.Slash&&t.charCodeAt(2)===CharCode.Colon){const e=t.charCodeAt(1);(e>=CharCode.A&&e<=CharCode.Z||e>=CharCode.a&&e<=CharCode.z)&&(n=t.charAt(1))}else if(t.length>=2&&t.charCodeAt(1)===CharCode.Colon){isAlphabet(t.charCodeAt(0))&&(n=t.charAt(0))}return n}function makeWindowsDriveLetterUppercase(e,t){const n=t.toLowerCase(),r=t.toUpperCase();return e.replace(`/${n}:`,`/${r}:`)}class FlowLanguageClient{constructor(e){_defineProperty(this,"_options",void 0),_defineProperty(this,"_statusBarWidget",void 0),_defineProperty(this,"_logger",void 0),_defineProperty(this,"_client",null),_defineProperty(this,"_id",void 0),_defineProperty(this,"commands",void 0),_defineProperty(this,"_handleInitError",e=>{const t=`Failed to start flow\n${e.toString()}`;this._logger.error(t),this._setStatus({state:"error",message:`${t}`,actions:[{title:"Retry",command:()=>{this._reinit()}}]})}),this._id=uuid_5(),this._options=e,this.commands=new ClientCommands(this),this._statusBarWidget=new StatusBarWidget({clientName:this.getName(),flowconfig:this._options.flowconfigPath,onClickCommand:this.commands.clientActions}),this._init()}getID(){return this._id}getStatus(){return this._statusBarWidget.getStatus()}dispose(){return this._statusBarWidget.dispose(),this.commands.dispose(),this._disposeClient()}getName(){const{_options:e}=this;return path$1.relative(path$1.dirname(e.workspaceRoot),e.flowconfigPath)}restart(){this._logger.info("restarting client"),this._reinit()}setActive(e){e?this._statusBarWidget.show():this._statusBarWidget.hide()}getWorkspaceRoot(){return this._options.workspaceRoot}getFlowconfig(){return this._options.flowconfigPath}getLogger(){return this._logger}async _reinit(){try{await this._disposeClient()}catch(e){}await this._init()}async _init(){try{const e=this._options.getConfig();this._logger=this._createLogger(e),this._client=await this._createClient(e),this._client.start()}catch(e){this._handleInitError(e)}}async _createClient(e){const{_logger:t,_options:n,_statusBarWidget:r}=this,{outputChannel:i,flowconfigPath:o,workspaceRoot:s}=n,a=path$1.dirname(o),c=await getFlowPath({pathToFlow:e.pathToFlow,flowconfigDir:path$1.dirname(o),workspaceRoot:s,useNPMPackagedFlow:e.useNPMPackagedFlow,useBundledFlow:e.useBundledFlow,logger:t}),u=await getFlowVersion(c);t.info(`Using flow '${c}' (v${u})`),assertFlowSupportsLSP(u),r.setFlowInfo({path:c,version:u});const l={command:c,args:["lsp","--from","vscode",...e.lazyMode?["--lazy-mode",e.lazyMode]:[],e.stopFlowOnExit?"--autostop":null].filter(Boolean)},d=this._options.canUseRelativePattern?new vscode.RelativePattern(a,"**/*"):"**/*",p={documentSelector:[{scheme:"file",language:"javascript",pattern:d},{scheme:"file",language:"javascriptreact",pattern:d}],middleware:createMiddleware(o,u),uriConverters:{code2Protocol:uriToString,protocol2Code:e=>vscode.Uri.parse(e)},outputChannel:i,revealOutputChannelOn:main_2$2.Never,initializationOptions:{liveSyntaxErrors:e.liveSyntaxErrors,useCodeSnippetOnFunctionSuggest:e.useCodeSnippetOnFunctionSuggest},initializationFailedHandler:e=>(this._handleInitError(e),!1),errorHandler:{error:(e,t,n)=>n&&n<=3?main_3$2.Continue:(this._setStatus({state:"error",message:"Connection to flow server is erroring. Shutting down server. See the output for more information.",actions:[{title:"Go to output",command:()=>{this.commands.runShowOutputCommand()}},{title:"Restart Client",command:()=>{this.commands.runRestartClientCommand()}}]}),main_3$2.Shutdown),closed:()=>(this._setStatus({state:"error",message:"Connection to flow server got closed. See the output for more information.",actions:[{title:"Go to output",command:()=>{this.commands.runShowOutputCommand()}},{title:"Restart Client",command:()=>{this.commands.runRestartClientCommand()}}]}),main_4$2.DoNotRestart)},workspaceFolder:{name:o,index:0,uri:vscode.Uri.file(a)},extensions:{status:{onChange:e=>{e&&"error"===e.state&&(e.actions=[{title:"Restart Client",command:()=>{this.commands.runRestartClientCommand()}},...(e.actions||[]).filter(e=>"restart"!==e.title.toLowerCase())]),this._setStatus(e)}},typeCoverage:{onChange:e=>{this._statusBarWidget.setCoverage(e)},command:this.commands.toggleCoverage,defaultShowUncovered:e.coverage.showUncovered,diagnosticSeverity:e.coverage.diagnosticSeverity}}};return new LanguageClientEx("flow","Flow",l,p)}_disposeClient(){return Promise.resolve(this._client?this._client.stop():void 0)}_createLogger(e){const{_options:t}=this;return new Logger(this.getName(),t.outputChannel,e.logLevel)}_setStatus(e){this._statusBarWidget.setStatus(e),e&&"error"===e.state&&this.commands.runShowStatusCommand()}logDebugInfo(){this._logger.info(JSON.stringify({flowconfig:this._options.flowconfigPath,flow:this._statusBarWidget.getFlowInfo(),serverStatus:this._statusBarWidget.getStatus()},null,2))}}class FlowClients{constructor(e){_defineProperty(this,"_clients",new Map),_defineProperty(this,"_logger",void 0),_defineProperty(this,"_activeClient",null),this._logger=e}add(e,t){this._clients.set(e,t)}has(e){return this._clients.has(e)}get(e){return this._clients.get(e)}dispose(){this._logger.trace("Disposing all clients");const e=[];return this._clients.forEach(t=>{e.push(this._disposeClient(t))}),Promise.all(e).then(()=>void 0)}disposeByWorkspaceFolder(e){const t=this._getClientByWorkspaceFolder(e);this._logger.trace(`Disposing all clients of workspaceFolder '${e.uri.fsPath}'`),t.forEach(e=>{this._disposeClient(e)})}setActive(e){this._activeClient&&this._activeClient.setActive(!1),this._activeClient=e,this._activeClient&&this._activeClient.setActive(!0)}getActive(){return this._activeClient}pick(e){const t=[];return this._clients.forEach(e=>{const n=e===this._activeClient,r={label:e.getName(),description:n?"active editor client":"",client:e};n?t.unshift(r):t.push(r)}),0===t.length?(vscode.window.showErrorMessage("No flow client found"),Promise.resolve(null)):1===t.length?Promise.resolve(t[0].client):vscode.window.showQuickPick(t,{placeHolder:e}).then(e=>e?e.client:null)}_disposeClient(e){return this._activeClient===e&&this.setActive(null),this._clients.delete(e.getFlowconfig()),e.getLogger().info("disposing client"),e.dispose()}_getClientByWorkspaceFolder(e){const t=[];return this._clients.forEach(n=>{n.getWorkspaceRoot()===e.uri.fsPath&&t.push(n)}),t}}class PluginCommands{constructor(e,t){_defineProperty(this,"_clients",void 0),_defineProperty(this,"_outputChannel",void 0),_defineProperty(this,"_subscriptions",[]),this._clients=e,this._outputChannel=t,this._registerCommands()}dispose(){this._subscriptions.forEach(e=>{e.dispose()})}_registerCommands(){this._subscriptions.push(vscode.commands.registerCommand("flow.toggleCoverage",this.toggleCoverage,this),vscode.commands.registerCommand("flow.showStatus",this.showStatus,this),vscode.commands.registerCommand("flow.restartClient",this.restartClient,this),vscode.commands.registerCommand("flow.logClientDebugInfo",this.logClientDebugInfo,this),vscode.commands.registerCommand("flow.showOutputChannel",this.showOutputChannel,this))}showStatus(){this._clients.pick("Select a client to show status").then(e=>{e&&vscode.commands.executeCommand(e.commands.showStatus)})}toggleCoverage(){this._clients.pick("Select a client to toggle coverage").then(e=>{e&&vscode.commands.executeCommand(e.commands.toggleCoverage)})}restartClient(){this._clients.pick("Select a client to restart").then(e=>{e&&vscode.commands.executeCommand(e.commands.restartClient)})}logClientDebugInfo(){this._clients.pick("Select a client to log debug info").then(e=>{e&&vscode.commands.executeCommand(e.commands.logDebugInfo)})}showOutputChannel(){this._outputChannel.show(!0)}}function toDiagnosticSeverity(e,t){switch(e){case"error":return vscode.DiagnosticSeverity.Error;case"warn":return vscode.DiagnosticSeverity.Warning;case"info":return vscode.DiagnosticSeverity.Information;default:return t}}const activationDocumentSelector=[{scheme:"file",language:"javascript"},{scheme:"file",language:"javascriptreact"},{scheme:"file",pattern:"**/.flowconfig"}];function onDidChangeActiveTextEditor(e,t){e.setActive(null),t&&vscode.languages.match(activationDocumentSelector,t.document)&&findDocumentFlowconfig(".flowconfig",t.document).then(n=>{n&&vscode.window.activeTextEditor===t&&e.setActive(e.get(n))})}function onDidOpenTextDocument(e,t,n,r,i){if(!vscode.languages.match(activationDocumentSelector,t))return;const o=vscode.workspace.getWorkspaceFolder(t.uri);if(!o)return;const s=t.uri.fsPath,a=o.uri.fsPath,c=path$1.dirname(s);i.trace(`File opened ${t.uri.fsPath}.`),i.trace(`Searching flowconfig for file ${s}`),findFlowconfig(".flowconfig",c,a).then(a=>{if(!a)return void i.info(`Not starting flow client. No .flowconfig found for file ${s}.`);if(i.trace(`Found flowconfig ${a} for file ${s}`),e.has(a))return void i.trace(`Flow client already exists for flowconfig ${a}.`);i.trace(`Creating flow client for flowconfig ${a}`);const c=new FlowLanguageClient({flowconfigPath:a,workspaceRoot:o.uri.fsPath,outputChannel:n,canUseRelativePattern:r,getConfig:()=>{const e=vscode.workspace.getConfiguration("flow",o.uri);return{useNPMPackagedFlow:e.get("useNPMPackagedFlow"),pathToFlow:e.get("pathToFlow"),useBundledFlow:e.get("useBundledFlow"),stopFlowOnExit:e.get("stopFlowOnExit"),liveSyntaxErrors:e.get("runOnEdit"),useCodeSnippetOnFunctionSuggest:e.get("useCodeSnippetOnFunctionSuggest"),logLevel:e.get("logLevel"),lazyMode:e.get("lazyMode"),coverage:{showUncovered:e.get("showUncovered"),diagnosticSeverity:toDiagnosticSeverity(e.get("coverageSeverity"),vscode.DiagnosticSeverity.Information)}}}});e.add(a,c),vscode.window.activeTextEditor&&vscode.window.activeTextEditor.document===t&&e.setActive(c)})}function onDidRemoveWorkspaceFolders(e,t){t.forEach(t=>{e.disposeByWorkspaceFolder(t)})}function onDidChangeConfiguration(){vscode.window.showInformationMessage("Flow settings changed, reload vscode to apply changes.","Reload").then(e=>{"Reload"===e&&vscode.commands.executeCommand("workbench.action.reloadWindow")})}const EXECUTION_CONTEXT_REMOTE=2;function checkRelativePatternSupported(e){return e.executionContext!==EXECUTION_CONTEXT_REMOTE}function activate(e){const t=vscode.window.createOutputChannel("Flow"),n=new Logger("",t,"error"),r=new FlowClients(n),i=new PluginCommands(r,t),o=checkRelativePatternSupported(e);n.info("Open javascript or flowconfig to start flow."),e.subscriptions.push(r,vscode.workspace.onDidOpenTextDocument(e=>{onDidOpenTextDocument(r,e,t,o,n)}),vscode.window.onDidChangeActiveTextEditor(e=>{onDidChangeActiveTextEditor(r,e)}),vscode.workspace.onDidChangeWorkspaceFolders(e=>{e.removed.length>0&&onDidRemoveWorkspaceFolders(r,e.removed)}),vscode.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("flow")&&onDidChangeConfiguration()}),i,t),vscode.workspace.textDocuments.forEach(e=>{onDidOpenTextDocument(r,e,t,o,n)})}exports.activate=activate;
//# sourceMappingURL=flowLSP.js.map
